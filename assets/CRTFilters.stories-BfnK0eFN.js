const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./browserAll-CzRYDzxh.js","./webworkerAll-B5LmJjhl.js","./colorToUniform-KTpA7KSL.js","./jsx-runtime-D_zvdyIk.js","./index-0yr9KlQE.js","./iframe-BSX9WTsV.js","./WebGPURenderer-BbaVs6ez.js","./SharedSystems-C6QZP7EY.js","./WebGLRenderer-zwUVsnc6.js"])))=>i.map(i=>d[i]);
import{j as Bt}from"./jsx-runtime-D_zvdyIk.js";import{r as ct,g as br,b as Fy}from"./index-0yr9KlQE.js";import{_ as mr}from"./iframe-BSX9WTsV.js";function Zd(s,t,n){if(!s)return;if(n(s)===!0)return s;let a=s.child;for(;a;){const r=Zd(a,t,n);if(r)return r;a=a.sibling}}function Jd(s){try{return Object.defineProperties(s,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return s}}const bu=Jd(ct.createContext(null));let $d=class extends ct.Component{render(){return ct.createElement(bu.Provider,{value:this._reactInternals},this.props.children)}};function qy(){const s=ct.useContext(bu);if(s===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=ct.useId();return ct.useMemo(()=>{for(const n of[s,s?.alternate]){if(!n)continue;const a=Zd(n,!1,r=>{let o=r.memoizedState;for(;o;){if(o.memoizedState===t)return!0;o=o.next}});if(a)return a}},[s,t])}const ky=Symbol.for("react.context"),Iy=s=>s!==null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===ky;function Ky(){const s=qy(),[t]=ct.useState(()=>new Map);t.clear();let n=s;for(;n;){const a=n.type;Iy(a)&&a!==bu&&!t.has(a)&&t.set(a,ct.use(Jd(a))),n=n.return}return t}function Qy(){const s=Ky();return ct.useMemo(()=>Array.from(s.keys()).reduce((t,n)=>a=>ct.createElement(t,null,ct.createElement(n.Provider,{...a,value:s.get(n)})),t=>ct.createElement($d,{...t})),[s])}var nt=(s=>(s.Application="application",s.WebGLPipes="webgl-pipes",s.WebGLPipesAdaptor="webgl-pipes-adaptor",s.WebGLSystem="webgl-system",s.WebGPUPipes="webgpu-pipes",s.WebGPUPipesAdaptor="webgpu-pipes-adaptor",s.WebGPUSystem="webgpu-system",s.CanvasSystem="canvas-system",s.CanvasPipesAdaptor="canvas-pipes-adaptor",s.CanvasPipes="canvas-pipes",s.Asset="asset",s.LoadParser="load-parser",s.ResolveParser="resolve-parser",s.CacheParser="cache-parser",s.DetectionParser="detection-parser",s.MaskEffect="mask-effect",s.BlendMode="blend-mode",s.TextureSource="texture-source",s.Environment="environment",s.ShapeBuilder="shape-builder",s.Batcher="batcher",s))(nt||{});const Wo=s=>{if(typeof s=="function"||typeof s=="object"&&s.extension){if(!s.extension)throw new Error("Extension class must have an extension object");s={...typeof s.extension!="object"?{type:s.extension}:s.extension,ref:s}}if(typeof s=="object")s={...s};else throw new Error("Invalid extension type");return typeof s.type=="string"&&(s.type=[s.type]),s},Qa=(s,t)=>Wo(s).priority??t,te={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...s){return s.map(Wo).forEach(t=>{t.type.forEach(n=>this._removeHandlers[n]?.(t))}),this},add(...s){return s.map(Wo).forEach(t=>{t.type.forEach(n=>{const a=this._addHandlers,r=this._queue;a[n]?a[n]?.(t):(r[n]=r[n]||[],r[n]?.push(t))})}),this},handle(s,t,n){const a=this._addHandlers,r=this._removeHandlers;if(a[s]||r[s])throw new Error(`Extension type ${s} already has a handler`);a[s]=t,r[s]=n;const o=this._queue;return o[s]&&(o[s]?.forEach(c=>t(c)),delete o[s]),this},handleByMap(s,t){return this.handle(s,n=>{n.name&&(t[n.name]=n.ref)},n=>{n.name&&delete t[n.name]})},handleByNamedList(s,t,n=-1){return this.handle(s,a=>{t.findIndex(o=>o.name===a.name)>=0||(t.push({name:a.name,value:a.ref}),t.sort((o,c)=>Qa(c.value,n)-Qa(o.value,n)))},a=>{const r=t.findIndex(o=>o.name===a.name);r!==-1&&t.splice(r,1)})},handleByList(s,t,n=-1){return this.handle(s,a=>{t.includes(a.ref)||(t.push(a.ref),t.sort((r,o)=>Qa(o,n)-Qa(r,n)))},a=>{const r=t.indexOf(a.ref);r!==-1&&t.splice(r,1)})},mixin(s,...t){for(const n of t)Object.defineProperties(s.prototype,Object.getOwnPropertyDescriptors(n))}},Wy={extension:{type:nt.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await mr(()=>import("./browserAll-CzRYDzxh.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)}},Zy={extension:{type:nt.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await mr(()=>import("./webworkerAll-B5LmJjhl.js"),__vite__mapDeps([1,2,3,4,5]),import.meta.url)}};class De{constructor(t,n,a){this._x=n||0,this._y=a||0,this._observer=t}clone(t){return new De(t??this._observer,this._x,this._y)}set(t=0,n=t){return(this._x!==t||this._y!==n)&&(this._x=t,this._y=n,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}var uo={exports:{}},Mf;function Jy(){return Mf||(Mf=1,(function(s){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function r(d,m,g){this.fn=d,this.context=m,this.once=g||!1}function o(d,m,g,y,v){if(typeof g!="function")throw new TypeError("The listener must be a function");var x=new r(g,y||d,v),C=n?n+m:m;return d._events[C]?d._events[C].fn?d._events[C]=[d._events[C],x]:d._events[C].push(x):(d._events[C]=x,d._eventsCount++),d}function c(d,m){--d._eventsCount===0?d._events=new a:delete d._events[m]}function h(){this._events=new a,this._eventsCount=0}h.prototype.eventNames=function(){var m=[],g,y;if(this._eventsCount===0)return m;for(y in g=this._events)t.call(g,y)&&m.push(n?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},h.prototype.listeners=function(m){var g=n?n+m:m,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var v=0,x=y.length,C=new Array(x);v<x;v++)C[v]=y[v].fn;return C},h.prototype.listenerCount=function(m){var g=n?n+m:m,y=this._events[g];return y?y.fn?1:y.length:0},h.prototype.emit=function(m,g,y,v,x,C){var E=n?n+m:m;if(!this._events[E])return!1;var S=this._events[E],w=arguments.length,R,N;if(S.fn){switch(S.once&&this.removeListener(m,S.fn,void 0,!0),w){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,g),!0;case 3:return S.fn.call(S.context,g,y),!0;case 4:return S.fn.call(S.context,g,y,v),!0;case 5:return S.fn.call(S.context,g,y,v,x),!0;case 6:return S.fn.call(S.context,g,y,v,x,C),!0}for(N=1,R=new Array(w-1);N<w;N++)R[N-1]=arguments[N];S.fn.apply(S.context,R)}else{var P=S.length,X;for(N=0;N<P;N++)switch(S[N].once&&this.removeListener(m,S[N].fn,void 0,!0),w){case 1:S[N].fn.call(S[N].context);break;case 2:S[N].fn.call(S[N].context,g);break;case 3:S[N].fn.call(S[N].context,g,y);break;case 4:S[N].fn.call(S[N].context,g,y,v);break;default:if(!R)for(X=1,R=new Array(w-1);X<w;X++)R[X-1]=arguments[X];S[N].fn.apply(S[N].context,R)}}return!0},h.prototype.on=function(m,g,y){return o(this,m,g,y,!1)},h.prototype.once=function(m,g,y){return o(this,m,g,y,!0)},h.prototype.removeListener=function(m,g,y,v){var x=n?n+m:m;if(!this._events[x])return this;if(!g)return c(this,x),this;var C=this._events[x];if(C.fn)C.fn===g&&(!v||C.once)&&(!y||C.context===y)&&c(this,x);else{for(var E=0,S=[],w=C.length;E<w;E++)(C[E].fn!==g||v&&!C[E].once||y&&C[E].context!==y)&&S.push(C[E]);S.length?this._events[x]=S.length===1?S[0]:S:c(this,x)}return this},h.prototype.removeAllListeners=function(m){var g;return m?(g=n?n+m:m,this._events[g]&&c(this,g)):(this._events=new a,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=n,h.EventEmitter=h,s.exports=h})(uo)),uo.exports}var $y=Jy();const nn=br($y),t0=Math.PI*2,e0=180/Math.PI,n0=Math.PI/180;class de{constructor(t=0,n=0){this.x=0,this.y=0,this.x=t,this.y=n}clone(){return new de(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,n=t){return this.x=t,this.y=n,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return co.x=0,co.y=0,co}}const co=new de;class mt{constructor(t=1,n=0,a=0,r=1,o=0,c=0){this.array=null,this.a=t,this.b=n,this.c=a,this.d=r,this.tx=o,this.ty=c}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,n,a,r,o,c){return this.a=t,this.b=n,this.c=a,this.d=r,this.tx=o,this.ty=c,this}toArray(t,n){this.array||(this.array=new Float32Array(9));const a=n||this.array;return t?(a[0]=this.a,a[1]=this.b,a[2]=0,a[3]=this.c,a[4]=this.d,a[5]=0,a[6]=this.tx,a[7]=this.ty,a[8]=1):(a[0]=this.a,a[1]=this.c,a[2]=this.tx,a[3]=this.b,a[4]=this.d,a[5]=this.ty,a[6]=0,a[7]=0,a[8]=1),a}apply(t,n){n=n||new de;const a=t.x,r=t.y;return n.x=this.a*a+this.c*r+this.tx,n.y=this.b*a+this.d*r+this.ty,n}applyInverse(t,n){n=n||new de;const a=this.a,r=this.b,o=this.c,c=this.d,h=this.tx,d=this.ty,m=1/(a*c+o*-r),g=t.x,y=t.y;return n.x=c*m*g+-o*m*y+(d*o-h*c)*m,n.y=a*m*y+-r*m*g+(-d*a+h*r)*m,n}translate(t,n){return this.tx+=t,this.ty+=n,this}scale(t,n){return this.a*=t,this.d*=n,this.c*=t,this.b*=n,this.tx*=t,this.ty*=n,this}rotate(t){const n=Math.cos(t),a=Math.sin(t),r=this.a,o=this.c,c=this.tx;return this.a=r*n-this.b*a,this.b=r*a+this.b*n,this.c=o*n-this.d*a,this.d=o*a+this.d*n,this.tx=c*n-this.ty*a,this.ty=c*a+this.ty*n,this}append(t){const n=this.a,a=this.b,r=this.c,o=this.d;return this.a=t.a*n+t.b*r,this.b=t.a*a+t.b*o,this.c=t.c*n+t.d*r,this.d=t.c*a+t.d*o,this.tx=t.tx*n+t.ty*r+this.tx,this.ty=t.tx*a+t.ty*o+this.ty,this}appendFrom(t,n){const a=t.a,r=t.b,o=t.c,c=t.d,h=t.tx,d=t.ty,m=n.a,g=n.b,y=n.c,v=n.d;return this.a=a*m+r*y,this.b=a*g+r*v,this.c=o*m+c*y,this.d=o*g+c*v,this.tx=h*m+d*y+n.tx,this.ty=h*g+d*v+n.ty,this}setTransform(t,n,a,r,o,c,h,d,m){return this.a=Math.cos(h+m)*o,this.b=Math.sin(h+m)*o,this.c=-Math.sin(h-d)*c,this.d=Math.cos(h-d)*c,this.tx=t-(a*this.a+r*this.c),this.ty=n-(a*this.b+r*this.d),this}prepend(t){const n=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const a=this.a,r=this.c;this.a=a*t.a+this.b*t.c,this.b=a*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this}decompose(t){const n=this.a,a=this.b,r=this.c,o=this.d,c=t.pivot,h=-Math.atan2(-r,o),d=Math.atan2(a,n),m=Math.abs(h+d);return m<1e-5||Math.abs(t0-m)<1e-5?(t.rotation=d,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=h,t.skew.y=d),t.scale.x=Math.sqrt(n*n+a*a),t.scale.y=Math.sqrt(r*r+o*o),t.position.x=this.tx+(c.x*n+c.y*r),t.position.y=this.ty+(c.x*a+c.y*o),t}invert(){const t=this.a,n=this.b,a=this.c,r=this.d,o=this.tx,c=t*r-n*a;return this.a=r/c,this.b=-n/c,this.c=-a/c,this.d=t/c,this.tx=(a*this.ty-r*o)/c,this.ty=-(t*this.ty-n*o)/c,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new mt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return s0.identity()}static get shared(){return i0.identity()}}const i0=new mt,s0=new mt,Si=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ai=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ci=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ti=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Zo=[],tp=[],Wa=Math.sign;function a0(){for(let s=0;s<16;s++){const t=[];Zo.push(t);for(let n=0;n<16;n++){const a=Wa(Si[s]*Si[n]+Ci[s]*Ai[n]),r=Wa(Ai[s]*Si[n]+Ti[s]*Ai[n]),o=Wa(Si[s]*Ci[n]+Ci[s]*Ti[n]),c=Wa(Ai[s]*Ci[n]+Ti[s]*Ti[n]);for(let h=0;h<16;h++)if(Si[h]===a&&Ai[h]===r&&Ci[h]===o&&Ti[h]===c){t.push(h);break}}}for(let s=0;s<16;s++){const t=new mt;t.set(Si[s],Ai[s],Ci[s],Ti[s],0,0),tp.push(t)}}a0();const Pt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:s=>Si[s],uY:s=>Ai[s],vX:s=>Ci[s],vY:s=>Ti[s],inv:s=>s&8?s&15:-s&7,add:(s,t)=>Zo[s][t],sub:(s,t)=>Zo[s][Pt.inv(t)],rotate180:s=>s^4,isVertical:s=>(s&3)===2,byDirection:(s,t)=>Math.abs(s)*2<=Math.abs(t)?t>=0?Pt.S:Pt.N:Math.abs(t)*2<=Math.abs(s)?s>0?Pt.E:Pt.W:t>0?s>0?Pt.SE:Pt.SW:s>0?Pt.NE:Pt.NW,matrixAppendRotationInv:(s,t,n=0,a=0)=>{const r=tp[Pt.inv(t)];r.tx=n,r.ty=a,s.append(r)}},Za=[new de,new de,new de,new de];class Qt{constructor(t=0,n=0,a=0,r=0){this.type="rectangle",this.x=Number(t),this.y=Number(n),this.width=Number(a),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Qt(0,0,0,0)}clone(){return new Qt(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,n){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&n>=this.y&&n<this.y+this.height}strokeContains(t,n,a,r=.5){const{width:o,height:c}=this;if(o<=0||c<=0)return!1;const h=this.x,d=this.y,m=a*(1-r),g=a-m,y=h-m,v=h+o+m,x=d-m,C=d+c+m,E=h+g,S=h+o-g,w=d+g,R=d+c-g;return t>=y&&t<=v&&n>=x&&n<=C&&!(t>E&&t<S&&n>w&&n<R)}intersects(t,n){if(!n){const it=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=it)return!1;const I=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>I}const a=this.left,r=this.right,o=this.top,c=this.bottom;if(r<=a||c<=o)return!1;const h=Za[0].set(t.left,t.top),d=Za[1].set(t.left,t.bottom),m=Za[2].set(t.right,t.top),g=Za[3].set(t.right,t.bottom);if(m.x<=h.x||d.y<=h.y)return!1;const y=Math.sign(n.a*n.d-n.b*n.c);if(y===0||(n.apply(h,h),n.apply(d,d),n.apply(m,m),n.apply(g,g),Math.max(h.x,d.x,m.x,g.x)<=a||Math.min(h.x,d.x,m.x,g.x)>=r||Math.max(h.y,d.y,m.y,g.y)<=o||Math.min(h.y,d.y,m.y,g.y)>=c))return!1;const v=y*(d.y-h.y),x=y*(h.x-d.x),C=v*a+x*o,E=v*r+x*o,S=v*a+x*c,w=v*r+x*c;if(Math.max(C,E,S,w)<=v*h.x+x*h.y||Math.min(C,E,S,w)>=v*g.x+x*g.y)return!1;const R=y*(h.y-m.y),N=y*(m.x-h.x),P=R*a+N*o,X=R*r+N*o,V=R*a+N*c,Y=R*r+N*c;return!(Math.max(P,X,V,Y)<=R*h.x+N*h.y||Math.min(P,X,V,Y)>=R*g.x+N*g.y)}pad(t=0,n=t){return this.x-=t,this.y-=n,this.width+=t*2,this.height+=n*2,this}fit(t){const n=Math.max(this.x,t.x),a=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=n,this.width=Math.max(a-n,0),this.y=r,this.height=Math.max(o-r,0),this}ceil(t=1,n=.001){const a=Math.ceil((this.x+this.width-n)*t)/t,r=Math.ceil((this.y+this.height-n)*t)/t;return this.x=Math.floor((this.x+n)*t)/t,this.y=Math.floor((this.y+n)*t)/t,this.width=a-this.x,this.height=r-this.y,this}enlarge(t){const n=Math.min(this.x,t.x),a=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=n,this.width=a-n,this.y=r,this.height=o-r,this}getBounds(t){return t||(t=new Qt),t.copyFrom(this),t}containsRect(t){if(this.width<=0||this.height<=0)return!1;const n=t.x,a=t.y,r=t.x+t.width,o=t.y+t.height;return n>=this.x&&n<this.x+this.width&&a>=this.y&&a<this.y+this.height&&r>=this.x&&r<this.x+this.width&&o>=this.y&&o<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const ho={default:-1};function Wt(s="default"){return ho[s]===void 0&&(ho[s]=-1),++ho[s]}const Ef={},Rt="8.0.0",r0="8.3.4";function bt(s,t,n=3){if(Ef[t])return;let a=new Error().stack;typeof a>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`):(a=a.split(`
`).splice(n).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${s}`),console.warn(a),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`),console.warn(a))),Ef[t]=!0}const ep=()=>{};function gr(s){return s+=s===0?1:0,--s,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s+1}function wf(s){return!(s&s-1)&&!!s}function np(s){const t={};for(const n in s)s[n]!==void 0&&(t[n]=s[n]);return t}const Rf=Object.create(null);function l0(s){const t=Rf[s];return t===void 0&&(Rf[s]=Wt("resource")),t}const ip=class sp extends nn{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...sp.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){bt(Rt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=l0(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};ip.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let o0=ip;const ap=class rp extends nn{constructor(t={}){super(),this.options=t,this.uid=Wt("textureSource"),this._resourceType="textureSource",this._resourceId=Wt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...rp.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new o0(np(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){this.style!==t&&(this._style?.off("change",this._onStyleChange,this),this._style=t,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Wt("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,n,a){a||(a=this._resolution),t||(t=this.width),n||(n=this.height);const r=Math.round(t*a),o=Math.round(n*a);return this.width=r/a,this.height=o/a,this._resolution=a,this.pixelWidth===r&&this.pixelHeight===o?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=o,this.emit("resize",this),this._resourceId=Wt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=wf(this.pixelWidth)&&wf(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};ap.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let fn=ap;class Su extends fn{constructor(t){const n=t.resource||new Float32Array(t.width*t.height*4);let a=t.format;a||(n instanceof Float32Array?a="rgba32float":n instanceof Int32Array||n instanceof Uint32Array?a="rgba32uint":n instanceof Int16Array||n instanceof Uint16Array?a="rgba16uint":(n instanceof Int8Array,a="bgra8unorm")),super({...t,resource:n,format:a}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}Su.extension=nt.TextureSource;const Bf=new mt;class u0{constructor(t,n){this.mapCoord=new mt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof n>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=n,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,n){n===void 0&&(n=t);const a=this.mapCoord;for(let r=0;r<t.length;r+=2){const o=t[r],c=t[r+1];n[r]=o*a.a+c*a.c+a.tx,n[r+1]=o*a.b+c*a.d+a.ty}return n}update(){const t=this._texture;this._updateID++;const n=t.uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const a=t.orig,r=t.trim;r&&(Bf.set(a.width/r.width,0,0,a.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Bf));const o=t.source,c=this.uClampFrame,h=this.clampMargin/o._resolution,d=this.clampOffset/o._resolution;return c[0]=(t.frame.x+h+d)/o.width,c[1]=(t.frame.y+h+d)/o.height,c[2]=(t.frame.x+t.frame.width-h+d)/o.width,c[3]=(t.frame.y+t.frame.height-h+d)/o.height,this.uClampOffset[0]=this.clampOffset/o.pixelWidth,this.uClampOffset[1]=this.clampOffset/o.pixelHeight,this.isSimple=t.frame.width===o.width&&t.frame.height===o.height&&t.rotate===0,!0}}class pt extends nn{constructor({source:t,label:n,frame:a,orig:r,trim:o,defaultAnchor:c,defaultBorders:h,rotate:d,dynamic:m}={}){if(super(),this.uid=Wt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Qt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=n,this.source=t?.source??new fn,this.noFrame=!a,a)this.frame.copyFrom(a);else{const{width:g,height:y}=this._source;this.frame.width=g,this.frame.height=y}this.orig=r||this.frame,this.trim=o,this.rotate=d??0,this.defaultAnchor=c,this.defaultBorders=h,this.destroyed=!1,this.dynamic=m||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new u0(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:n}=this,{width:a,height:r}=this._source,o=n.x/a,c=n.y/r,h=n.width/a,d=n.height/r;let m=this.rotate;if(m){const g=h/2,y=d/2,v=o+g,x=c+y;m=Pt.add(m,Pt.NW),t.x0=v+g*Pt.uX(m),t.y0=x+y*Pt.uY(m),m=Pt.add(m,2),t.x1=v+g*Pt.uX(m),t.y1=x+y*Pt.uY(m),m=Pt.add(m,2),t.x2=v+g*Pt.uX(m),t.y2=x+y*Pt.uY(m),m=Pt.add(m,2),t.x3=v+g*Pt.uX(m),t.y3=x+y*Pt.uY(m)}else t.x0=o,t.y0=c,t.x1=o+h,t.y1=c,t.x2=o+h,t.y2=c+d,t.x3=o,t.y3=c+d}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return bt(Rt,"Texture.baseTexture is now Texture.source"),this._source}}pt.EMPTY=new pt({label:"EMPTY",source:new fn({label:"EMPTY"})});pt.EMPTY.destroy=ep;pt.WHITE=new pt({source:new Su({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});pt.WHITE.destroy=ep;function c0(s,t,n){const{width:a,height:r}=n.orig,o=n.trim;if(o){const c=o.width,h=o.height;s.minX=o.x-t._x*a,s.maxX=s.minX+c,s.minY=o.y-t._y*r,s.maxY=s.minY+h}else s.minX=-t._x*a,s.maxX=s.minX+a,s.minY=-t._y*r,s.maxY=s.minY+r}const zf=new mt;class en{constructor(t=1/0,n=1/0,a=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=zf,this.minX=t,this.minY=n,this.maxX=a,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Qt);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=zf,this}set(t,n,a,r){this.minX=t,this.minY=n,this.maxX=a,this.maxY=r}addFrame(t,n,a,r,o){o||(o=this.matrix);const c=o.a,h=o.b,d=o.c,m=o.d,g=o.tx,y=o.ty;let v=this.minX,x=this.minY,C=this.maxX,E=this.maxY,S=c*t+d*n+g,w=h*t+m*n+y;S<v&&(v=S),w<x&&(x=w),S>C&&(C=S),w>E&&(E=w),S=c*a+d*n+g,w=h*a+m*n+y,S<v&&(v=S),w<x&&(x=w),S>C&&(C=S),w>E&&(E=w),S=c*t+d*r+g,w=h*t+m*r+y,S<v&&(v=S),w<x&&(x=w),S>C&&(C=S),w>E&&(E=w),S=c*a+d*r+g,w=h*a+m*r+y,S<v&&(v=S),w<x&&(x=w),S>C&&(C=S),w>E&&(E=w),this.minX=v,this.minY=x,this.maxX=C,this.maxY=E}addRect(t,n){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,n)}addBounds(t,n){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,n)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const n=this.minX,a=this.minY,r=this.maxX,o=this.maxY,{a:c,b:h,c:d,d:m,tx:g,ty:y}=t;let v=c*n+d*a+g,x=h*n+m*a+y;this.minX=v,this.minY=x,this.maxX=v,this.maxY=x,v=c*r+d*a+g,x=h*r+m*a+y,this.minX=v<this.minX?v:this.minX,this.minY=x<this.minY?x:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=x>this.maxY?x:this.maxY,v=c*n+d*o+g,x=h*n+m*o+y,this.minX=v<this.minX?v:this.minX,this.minY=x<this.minY?x:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=x>this.maxY?x:this.maxY,v=c*r+d*o+g,x=h*r+m*o+y,this.minX=v<this.minX?v:this.minX,this.minY=x<this.minY?x:this.minY,this.maxX=v>this.maxX?v:this.maxX,this.maxY=x>this.maxY?x:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,n,a,r){return this.minX<t&&(this.minX=t),this.maxX>n&&(this.maxX=n),this.minY<a&&(this.minY=a),this.maxY>r&&(this.maxY=r),this}pad(t,n=t){return this.minX-=t,this.maxX+=t,this.minY-=n,this.maxY+=n,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new en(this.minX,this.minY,this.maxX,this.maxY)}scale(t,n=t){return this.minX*=t,this.minY*=n,this.maxX*=t,this.maxY*=n,this}get x(){return this.minX}set x(t){const n=this.maxX-this.minX;this.minX=t,this.maxX=t+n}get y(){return this.minY}set y(t){const n=this.maxY-this.minY;this.minY=t,this.maxY=t+n}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,n,a,r){let o=this.minX,c=this.minY,h=this.maxX,d=this.maxY;r||(r=this.matrix);const m=r.a,g=r.b,y=r.c,v=r.d,x=r.tx,C=r.ty;for(let E=n;E<a;E+=2){const S=t[E],w=t[E+1],R=m*S+y*w+x,N=g*S+v*w+C;o=R<o?R:o,c=N<c?N:c,h=R>h?R:h,d=N>d?N:d}this.minX=o,this.minY=c,this.maxX=h,this.maxY=d}containsPoint(t,n){return this.minX<=t&&this.minY<=n&&this.maxX>=t&&this.maxY>=n}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}var h0={grad:.9,turn:360,rad:360/(2*Math.PI)},En=function(s){return typeof s=="string"?s.length>0:typeof s=="number"},se=function(s,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*s)/n+0},Ie=function(s,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),s>n?n:s>t?s:t},lp=function(s){return(s=isFinite(s)?s%360:0)>0?s:s+360},Uf=function(s){return{r:Ie(s.r,0,255),g:Ie(s.g,0,255),b:Ie(s.b,0,255),a:Ie(s.a)}},fo=function(s){return{r:se(s.r),g:se(s.g),b:se(s.b),a:se(s.a,3)}},f0=/^#([0-9a-f]{3,8})$/i,Ja=function(s){var t=s.toString(16);return t.length<2?"0"+t:t},op=function(s){var t=s.r,n=s.g,a=s.b,r=s.a,o=Math.max(t,n,a),c=o-Math.min(t,n,a),h=c?o===t?(n-a)/c:o===n?2+(a-t)/c:4+(t-n)/c:0;return{h:60*(h<0?h+6:h),s:o?c/o*100:0,v:o/255*100,a:r}},up=function(s){var t=s.h,n=s.s,a=s.v,r=s.a;t=t/360*6,n/=100,a/=100;var o=Math.floor(t),c=a*(1-n),h=a*(1-(t-o)*n),d=a*(1-(1-t+o)*n),m=o%6;return{r:255*[a,h,c,c,d,a][m],g:255*[d,a,a,h,c,c][m],b:255*[c,c,d,a,a,h][m],a:r}},Nf=function(s){return{h:lp(s.h),s:Ie(s.s,0,100),l:Ie(s.l,0,100),a:Ie(s.a)}},Of=function(s){return{h:se(s.h),s:se(s.s),l:se(s.l),a:se(s.a,3)}},Df=function(s){return up((n=(t=s).s,{h:t.h,s:(n*=((a=t.l)<50?a:100-a)/100)>0?2*n/(a+n)*100:0,v:a+n,a:t.a}));var t,n,a},$s=function(s){return{h:(t=op(s)).h,s:(r=(200-(n=t.s))*(a=t.v)/100)>0&&r<200?n*a/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,n,a,r},d0=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p0=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m0=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,g0=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Jo={string:[[function(s){var t=f0.exec(s);return t?(s=t[1]).length<=4?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?se(parseInt(s[3]+s[3],16)/255,2):1}:s.length===6||s.length===8?{r:parseInt(s.substr(0,2),16),g:parseInt(s.substr(2,2),16),b:parseInt(s.substr(4,2),16),a:s.length===8?se(parseInt(s.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(s){var t=m0.exec(s)||g0.exec(s);return t?t[2]!==t[4]||t[4]!==t[6]?null:Uf({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(s){var t=d0.exec(s)||p0.exec(s);if(!t)return null;var n,a,r=Nf({h:(n=t[1],a=t[2],a===void 0&&(a="deg"),Number(n)*(h0[a]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Df(r)},"hsl"]],object:[[function(s){var t=s.r,n=s.g,a=s.b,r=s.a,o=r===void 0?1:r;return En(t)&&En(n)&&En(a)?Uf({r:Number(t),g:Number(n),b:Number(a),a:Number(o)}):null},"rgb"],[function(s){var t=s.h,n=s.s,a=s.l,r=s.a,o=r===void 0?1:r;if(!En(t)||!En(n)||!En(a))return null;var c=Nf({h:Number(t),s:Number(n),l:Number(a),a:Number(o)});return Df(c)},"hsl"],[function(s){var t=s.h,n=s.s,a=s.v,r=s.a,o=r===void 0?1:r;if(!En(t)||!En(n)||!En(a))return null;var c=(function(h){return{h:lp(h.h),s:Ie(h.s,0,100),v:Ie(h.v,0,100),a:Ie(h.a)}})({h:Number(t),s:Number(n),v:Number(a),a:Number(o)});return up(c)},"hsv"]]},Gf=function(s,t){for(var n=0;n<t.length;n++){var a=t[n][0](s);if(a)return[a,t[n][1]]}return[null,void 0]},y0=function(s){return typeof s=="string"?Gf(s.trim(),Jo.string):typeof s=="object"&&s!==null?Gf(s,Jo.object):[null,void 0]},po=function(s,t){var n=$s(s);return{h:n.h,s:Ie(n.s+100*t,0,100),l:n.l,a:n.a}},mo=function(s){return(299*s.r+587*s.g+114*s.b)/1e3/255},Pf=function(s,t){var n=$s(s);return{h:n.h,s:n.s,l:Ie(n.l+100*t,0,100),a:n.a}},$o=(function(){function s(t){this.parsed=y0(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return s.prototype.isValid=function(){return this.parsed!==null},s.prototype.brightness=function(){return se(mo(this.rgba),2)},s.prototype.isDark=function(){return mo(this.rgba)<.5},s.prototype.isLight=function(){return mo(this.rgba)>=.5},s.prototype.toHex=function(){return t=fo(this.rgba),n=t.r,a=t.g,r=t.b,c=(o=t.a)<1?Ja(se(255*o)):"","#"+Ja(n)+Ja(a)+Ja(r)+c;var t,n,a,r,o,c},s.prototype.toRgb=function(){return fo(this.rgba)},s.prototype.toRgbString=function(){return t=fo(this.rgba),n=t.r,a=t.g,r=t.b,(o=t.a)<1?"rgba("+n+", "+a+", "+r+", "+o+")":"rgb("+n+", "+a+", "+r+")";var t,n,a,r,o},s.prototype.toHsl=function(){return Of($s(this.rgba))},s.prototype.toHslString=function(){return t=Of($s(this.rgba)),n=t.h,a=t.s,r=t.l,(o=t.a)<1?"hsla("+n+", "+a+"%, "+r+"%, "+o+")":"hsl("+n+", "+a+"%, "+r+"%)";var t,n,a,r,o},s.prototype.toHsv=function(){return t=op(this.rgba),{h:se(t.h),s:se(t.s),v:se(t.v),a:se(t.a,3)};var t},s.prototype.invert=function(){return cn({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},s.prototype.saturate=function(t){return t===void 0&&(t=.1),cn(po(this.rgba,t))},s.prototype.desaturate=function(t){return t===void 0&&(t=.1),cn(po(this.rgba,-t))},s.prototype.grayscale=function(){return cn(po(this.rgba,-1))},s.prototype.lighten=function(t){return t===void 0&&(t=.1),cn(Pf(this.rgba,t))},s.prototype.darken=function(t){return t===void 0&&(t=.1),cn(Pf(this.rgba,-t))},s.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},s.prototype.alpha=function(t){return typeof t=="number"?cn({r:(n=this.rgba).r,g:n.g,b:n.b,a:t}):se(this.rgba.a,3);var n},s.prototype.hue=function(t){var n=$s(this.rgba);return typeof t=="number"?cn({h:t,s:n.s,l:n.l,a:n.a}):se(n.h)},s.prototype.isEqual=function(t){return this.toHex()===cn(t).toHex()},s})(),cn=function(s){return s instanceof $o?s:new $o(s)},Hf=[],x0=function(s){s.forEach(function(t){Hf.indexOf(t)<0&&(t($o,Jo),Hf.push(t))})};function v0(s,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},a={};for(var r in n)a[n[r]]=r;var o={};s.prototype.toName=function(c){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var h,d,m=a[this.toHex()];if(m)return m;if(c?.closest){var g=this.toRgb(),y=1/0,v="black";if(!o.length)for(var x in n)o[x]=new s(n[x]).toRgb();for(var C in n){var E=(h=g,d=o[C],Math.pow(h.r-d.r,2)+Math.pow(h.g-d.g,2)+Math.pow(h.b-d.b,2));E<y&&(y=E,v=C)}return v}},t.string.push([function(c){var h=c.toLowerCase(),d=h==="transparent"?"#0000":n[h];return d?new s(d).toRgb():null},"name"])}x0([v0]);const rs=class Is{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Is)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,n){const a=typeof t;if(a!==typeof n)return!1;if(a==="number"||a==="string"||t instanceof Number)return t===n;if(Array.isArray(t)&&Array.isArray(n)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(n))return t.length!==n.length?!1:t.every((o,c)=>o===n[c]);if(t!==null&&n!==null){const o=Object.keys(t),c=Object.keys(n);return o.length!==c.length?!1:o.every(h=>t[h]===n[h])}return t===n}toRgba(){const[t,n,a,r]=this._components;return{r:t,g:n,b:a,a:r}}toRgb(){const[t,n,a]=this._components;return{r:t,g:n,b:a}}toRgbaString(){const[t,n,a]=this.toUint8RgbArray();return`rgba(${t},${n},${a},${this.alpha})`}toUint8RgbArray(t){const[n,a,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(n*255),t[1]=Math.round(a*255),t[2]=Math.round(r*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[n,a,r,o]=this._components;return t[0]=n,t[1]=a,t[2]=r,t[3]=o,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[n,a,r]=this._components;return t[0]=n,t[1]=a,t[2]=r,t}toNumber(){return this._int}toBgrNumber(){const[t,n,a]=this.toUint8RgbArray();return(a<<16)+(n<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[n,a,r,o]=Is._temp.setValue(t)._components;return this._components[0]*=n,this._components[1]*=a,this._components[2]*=r,this._components[3]*=o,this._refreshInt(),this._value=null,this}premultiply(t,n=!0){return n&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,n=!0){if(t===1)return(255<<24)+this._int;if(t===0)return n?0:this._int;let a=this._int>>16&255,r=this._int>>8&255,o=this._int&255;return n&&(a=a*t+.5|0,r=r*t+.5|0,o=o*t+.5|0),(t*255<<24)+(a<<16)+(r<<8)+o}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const n=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-n.length)+n}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let n,a,r,o;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const c=t;n=(c>>16&255)/255,a=(c>>8&255)/255,r=(c&255)/255,o=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[n,a,r,o=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[n,a,r,o=255]=t,n/=255,a/=255,r/=255,o/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const h=Is.HEX_PATTERN.exec(t);h&&(t=`#${h[2]}`)}const c=cn(t);c.isValid()&&({r:n,g:a,b:r,a:o}=c.rgba,n/=255,a/=255,r/=255)}if(n!==void 0)this._components[0]=n,this._components[1]=a,this._components[2]=r,this._components[3]=o,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,n,a]=this._components;this._int=(t*255<<16)+(n*255<<8)+(a*255|0)}_clamp(t,n=0,a=1){return typeof t=="number"?Math.min(Math.max(t,n),a):(t.forEach((r,o)=>{t[o]=Math.min(Math.max(r,n),a)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof Is||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};rs.shared=new rs;rs._temp=new rs;rs.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Zt=rs;const _0={cullArea:null,cullable:!1,cullableChildren:!0};class Au{constructor(t,n){this._pool=[],this._count=0,this._index=0,this._classType=t,n&&this.prepopulate(n)}prepopulate(t){for(let n=0;n<t;n++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let n;return this._index>0?n=this._pool[--this._index]:n=new this._classType,n.init?.(t),n}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class b0{constructor(){this._poolsByClass=new Map}prepopulate(t,n){this.getPool(t).prepopulate(n)}get(t,n){return this.getPool(t).get(n)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new Au(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(n=>{const a=t[n._classType.name]?n._classType.name+n._classType.ID:n._classType.name;t[a]={free:n.totalFree,used:n.totalUsed,size:n.totalSize}}),t}}const Rn=new b0,S0={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(s){typeof s=="boolean"&&s===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(s===!0?{}:s))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(s){bt("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(s)}};function A0(s,t,n){const a=s.length;let r;if(t>=a||n===0)return;n=t+n>a?a-t:n;const o=a-n;for(r=t;r<o;++r)s[r]=s[r+n];s.length=o}const C0={allowChildren:!0,removeChildren(s=0,t){const n=t??this.children.length,a=n-s,r=[];if(a>0&&a<=n){for(let c=n-1;c>=s;c--){const h=this.children[c];h&&(r.push(h),h.parent=null)}A0(this.children,s,n);const o=this.renderGroup||this.parentRenderGroup;o&&o.removeChildren(r);for(let c=0;c<r.length;++c)this.emit("childRemoved",r[c],this,c),r[c].emit("removed",this);return r.length>0&&this._didViewChangeTick++,r}else if(a===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(s){const t=this.getChildAt(s);return this.removeChild(t)},getChildAt(s){if(s<0||s>=this.children.length)throw new Error(`getChildAt: Index (${s}) does not exist.`);return this.children[s]},setChildIndex(s,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(s),this.addChildAt(s,t)},getChildIndex(s){const t=this.children.indexOf(s);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(s,t){this.allowChildren||bt(Rt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:n}=this;if(t<0||t>n.length)throw new Error(`${s}addChildAt: The index ${t} supplied is out of bounds ${n.length}`);if(s.parent){const r=s.parent.children.indexOf(s);if(s.parent===this&&r===t)return s;r!==-1&&s.parent.children.splice(r,1)}t===n.length?n.push(s):n.splice(t,0,s),s.parent=this,s.didChange=!0,s._updateFlags=15;const a=this.renderGroup||this.parentRenderGroup;return a&&a.addChild(s),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",s,this,t),s.emit("added",this),s},swapChildren(s,t){if(s===t)return;const n=this.getChildIndex(s),a=this.getChildIndex(t);this.children[n]=t,this.children[a]=s;const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...s){return s.length===1?this.reparentChildAt(s[0],this.children.length):(s.forEach(t=>this.reparentChildAt(t,this.children.length)),s[0])},reparentChildAt(s,t){if(s.parent===this)return this.setChildIndex(s,t),s;const n=s.worldTransform.clone();s.removeFromParent(),this.addChildAt(s,t);const a=this.worldTransform.clone();return a.invert(),n.prepend(a),s.setFromMatrix(n),s}},T0={collectRenderables(s,t,n){this.parentRenderLayer&&this.parentRenderLayer!==n||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(s,t,n):this.renderGroup?t.renderPipes.renderGroup.addRenderGroup(this.renderGroup,s):this.collectRenderablesWithEffects(s,t,n))},collectRenderablesSimple(s,t,n){const a=this.children,r=a.length;for(let o=0;o<r;o++)a[o].collectRenderables(s,t,n)},collectRenderablesWithEffects(s,t,n){const{renderPipes:a}=t;for(let r=0;r<this.effects.length;r++){const o=this.effects[r];a[o.pipe].push(o,this,s)}this.collectRenderablesSimple(s,t,n);for(let r=this.effects.length-1;r>=0;r--){const o=this.effects[r];a[o.pipe].pop(o,this,s)}}};class Vf{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class M0{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let n=0;n<this._tests.length;n++){const a=this._tests[n];if(a.test(t))return Rn.get(a.maskClass,t)}return t}returnMaskEffect(t){Rn.return(t)}}const tu=new M0;te.handleByList(nt.MaskEffect,tu._effectClasses);const E0={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0)},addEffect(s){this.effects.indexOf(s)===-1&&(this.effects.push(s),this.effects.sort((n,a)=>n.priority-a.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(s){const t=this.effects.indexOf(s);t!==-1&&(this.effects.splice(t,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(s){const t=this._maskEffect;t?.mask!==s&&(t&&(this.removeEffect(t),tu.returnMaskEffect(t),this._maskEffect=null),s!=null&&(this._maskEffect=tu.getMaskEffect(s),this.addEffect(this._maskEffect)))},setMask(s){this._maskOptions={...this._maskOptions,...s},s.mask&&(this.mask=s.mask),this._markStructureAsChanged()},get mask(){return this._maskEffect?.mask},set filters(s){!Array.isArray(s)&&s&&(s=[s]);const t=this._filterEffect||(this._filterEffect=new Vf);s=s;const n=s?.length>0,a=t.filters?.length>0,r=n!==a;s=Array.isArray(s)?s.slice(0):s,t.filters=Object.freeze(s),r&&(n?this.addEffect(t):(this.removeEffect(t),t.filters=s??null))},get filters(){return this._filterEffect?.filters},set filterArea(s){this._filterEffect||(this._filterEffect=new Vf),this._filterEffect.filterArea=s},get filterArea(){return this._filterEffect?.filterArea}},w0={label:null,get name(){return bt(Rt,"Container.name property has been removed, use Container.label instead"),this.label},set name(s){bt(Rt,"Container.name property has been removed, use Container.label instead"),this.label=s},getChildByName(s,t=!1){return this.getChildByLabel(s,t)},getChildByLabel(s,t=!1){const n=this.children;for(let a=0;a<n.length;a++){const r=n[a];if(r.label===s||s instanceof RegExp&&s.test(r.label))return r}if(t)for(let a=0;a<n.length;a++){const o=n[a].getChildByLabel(s,!0);if(o)return o}return null},getChildrenByLabel(s,t=!1,n=[]){const a=this.children;for(let r=0;r<a.length;r++){const o=a[r];(o.label===s||s instanceof RegExp&&s.test(o.label))&&n.push(o)}if(t)for(let r=0;r<a.length;r++)a[r].getChildrenByLabel(s,!0,n);return n}},xe=new Au(mt),Bn=new Au(en),R0=new mt,B0={getFastGlobalBounds(s,t){t||(t=new en),t.clear(),this._getGlobalBoundsRecursive(!!s,t,this.parentRenderLayer),t.isValid||t.set(0,0,0,0);const n=this.renderGroup||this.parentRenderGroup;return t.applyMatrix(n.worldTransform),t},_getGlobalBoundsRecursive(s,t,n){let a=t;if(s&&this.parentRenderLayer&&this.parentRenderLayer!==n||this.localDisplayStatus!==7||!this.measurable)return;const r=!!this.effects.length;if((this.renderGroup||r)&&(a=Bn.get().clear()),this.boundsArea)t.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const c=this.bounds;a.addFrame(c.minX,c.minY,c.maxX,c.maxY,this.groupTransform)}const o=this.children;for(let c=0;c<o.length;c++)o[c]._getGlobalBoundsRecursive(s,a,n)}if(r){let o=!1;const c=this.renderGroup||this.parentRenderGroup;for(let h=0;h<this.effects.length;h++)this.effects[h].addBounds&&(o||(o=!0,a.applyMatrix(c.worldTransform)),this.effects[h].addBounds(a,!0));o&&(a.applyMatrix(c.worldTransform.copyTo(R0).invert()),t.addBounds(a,this.relativeGroupTransform)),t.addBounds(a),Bn.return(a)}else this.renderGroup&&(t.addBounds(a,this.relativeGroupTransform),Bn.return(a))}};function cp(s,t,n){n.clear();let a,r;return s.parent?t?a=s.parent.worldTransform:(r=xe.get().identity(),a=Cu(s,r)):a=mt.IDENTITY,hp(s,n,a,t),r&&xe.return(r),n.isValid||n.set(0,0,0,0),n}function hp(s,t,n,a){if(!s.visible||!s.measurable)return;let r;a?r=s.worldTransform:(s.updateLocalTransform(),r=xe.get(),r.appendFrom(s.localTransform,n));const o=t,c=!!s.effects.length;if(c&&(t=Bn.get().clear()),s.boundsArea)t.addRect(s.boundsArea,r);else{s.bounds&&(t.matrix=r,t.addBounds(s.bounds));for(let h=0;h<s.children.length;h++)hp(s.children[h],t,r,a)}if(c){for(let h=0;h<s.effects.length;h++)s.effects[h].addBounds?.(t);o.addBounds(t,mt.IDENTITY),Bn.return(t)}a||xe.return(r)}function Cu(s,t){const n=s.parent;return n&&(Cu(n,t),n.updateLocalTransform(),t.append(n.localTransform)),t}function fp(s,t){if(s===16777215||!t)return t;if(t===16777215||!s)return s;const n=s>>16&255,a=s>>8&255,r=s&255,o=t>>16&255,c=t>>8&255,h=t&255,d=n*o/255|0,m=a*c/255|0,g=r*h/255|0;return(d<<16)+(m<<8)+g}const Lf=16777215;function jf(s,t){return s===Lf?t:t===Lf?s:fp(s,t)}function ur(s){return((s&255)<<16)+(s&65280)+(s>>16&255)}const z0={getGlobalAlpha(s){if(s)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let t=this.alpha,n=this.parent;for(;n;)t*=n.alpha,n=n.parent;return t},getGlobalTransform(s,t){if(t)return s.copyFrom(this.worldTransform);this.updateLocalTransform();const n=Cu(this,xe.get().identity());return s.appendFrom(this.localTransform,n),xe.return(n),s},getGlobalTint(s){if(s)return this.renderGroup?ur(this.renderGroup.worldColor):this.parentRenderGroup?ur(jf(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let t=this.localColor,n=this.parent;for(;n;)t=jf(t,n.localColor),n=n.parent;return ur(t)}};let go=0;const Yf=500;function Ht(...s){go!==Yf&&(go++,go===Yf?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...s))}function dp(s,t,n){return t.clear(),n||(n=mt.IDENTITY),pp(s,t,n,s,!0),t.isValid||t.set(0,0,0,0),t}function pp(s,t,n,a,r){let o;if(r)o=xe.get(),o=n.copyTo(o);else{if(!s.visible||!s.measurable)return;s.updateLocalTransform();const d=s.localTransform;o=xe.get(),o.appendFrom(d,n)}const c=t,h=!!s.effects.length;if(h&&(t=Bn.get().clear()),s.boundsArea)t.addRect(s.boundsArea,o);else{s.renderPipeId&&(t.matrix=o,t.addBounds(s.bounds));const d=s.children;for(let m=0;m<d.length;m++)pp(d[m],t,o,a,!1)}if(h){for(let d=0;d<s.effects.length;d++)s.effects[d].addLocalBounds?.(t,a);c.addBounds(t,mt.IDENTITY),Bn.return(t)}xe.return(o)}function mp(s,t){const n=s.children;for(let a=0;a<n.length;a++){const r=n[a],o=r.uid,c=(r._didViewChangeTick&65535)<<16|r._didContainerChangeTick&65535,h=t.index;(t.data[h]!==o||t.data[h+1]!==c)&&(t.data[t.index]=o,t.data[t.index+1]=c,t.didChange=!0),t.index=h+2,r.children.length&&mp(r,t)}return t.didChange}const U0=new mt,N0={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(s,t){const n=Math.sign(this.scale.x)||1;t!==0?this.scale.x=s/t*n:this.scale.x=n},_setHeight(s,t){const n=Math.sign(this.scale.y)||1;t!==0?this.scale.y=s/t*n:this.scale.y=n},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new en});const s=this._localBoundsCacheData;return s.index=1,s.didChange=!1,s.data[0]!==this._didViewChangeTick&&(s.didChange=!0,s.data[0]=this._didViewChangeTick),mp(this,s),s.didChange&&dp(this,s.localBounds,U0),s.localBounds},getBounds(s,t){return cp(this,s,t||new en)}},O0={_onRender:null,set onRender(s){const t=this.renderGroup||this.parentRenderGroup;if(!s){this._onRender&&t?.removeOnRender(this),this._onRender=null;return}this._onRender||t?.addOnRender(this),this._onRender=s},get onRender(){return this._onRender}},D0={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(s){this._zIndex!==s&&(this._zIndex=s,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(G0))}};function G0(s,t){return s._zIndex-t._zIndex}const P0={getGlobalPosition(s=new de,t=!1){return this.parent?this.parent.toGlobal(this._position,s,t):(s.x=this._position.x,s.y=this._position.y),s},toGlobal(s,t,n=!1){const a=this.getGlobalTransform(xe.get(),n);return t=a.apply(s,t),xe.return(a),t},toLocal(s,t,n,a){t&&(s=t.toGlobal(s,n,a));const r=this.getGlobalTransform(xe.get(),a);return n=r.applyInverse(s,n),xe.return(r),n}};class gp{constructor(){this.uid=Wt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let H0=0;class V0{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,n,a){const r=new fn({...this.textureOptions,width:t,height:n,resolution:1,antialias:a,autoGarbageCollect:!1});return new pt({source:r,label:`texturePool_${H0++}`})}getOptimalTexture(t,n,a=1,r){let o=Math.ceil(t*a-1e-6),c=Math.ceil(n*a-1e-6);o=gr(o),c=gr(c);const h=(o<<17)+(c<<1)+(r?1:0);this._texturePool[h]||(this._texturePool[h]=[]);let d=this._texturePool[h].pop();return d||(d=this.createTexture(o,c,r)),d.source._resolution=a,d.source.width=o/a,d.source.height=c/a,d.source.pixelWidth=o,d.source.pixelHeight=c,d.frame.x=0,d.frame.y=0,d.frame.width=t,d.frame.height=n,d.updateUvs(),this._poolKeyHash[d.uid]=h,d}getSameSizeTexture(t,n=!1){const a=t.source;return this.getOptimalTexture(t.width,t.height,a._resolution,n)}returnTexture(t){const n=this._poolKeyHash[t.uid];this._texturePool[n].push(t)}clear(t){if(t=t!==!1,t)for(const n in this._texturePool){const a=this._texturePool[n];if(a)for(let r=0;r<a.length;r++)a[r].destroy(!0)}this._texturePool={}}}const L0=new V0;class j0{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new mt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new gp,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const n=t.children;for(let a=0;a<n.length;a++){const r=n[a];r._updateFlags=15,this.addChild(r)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(L0.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const n=this.childrenToUpdate[t];n.list.fill(null),n.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const n=this.renderGroupChildren.indexOf(t);n>-1&&this.renderGroupChildren.splice(n,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const n=t.children;for(let a=0;a<n.length;a++)this.addChild(n[a])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const n=t.children;for(let a=0;a<n.length;a++)this.removeChild(n[a])}removeChildren(t){for(let n=0;n<t.length;n++)this.removeChild(t[n])}onChildUpdate(t){let n=this.childrenToUpdate[t.relativeRenderGroupDepth];n||(n=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),n.list[n.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let n=0;n<this._onRenderContainers.length;n++)this._onRenderContainers[n]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const n=this.root.children;for(let a=0;a<n.length;a++)this._getChildren(n[a],t);return t}_getChildren(t,n=[]){if(n.push(t),t.renderGroup)return n;const a=t.children;for(let r=0;r<a.length;r++)this._getChildren(a[r],n);return n}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new mt),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new mt),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new mt),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function Y0(s,t,n={}){for(const a in t)!n[a]&&t[a]!==void 0&&(s[a]=t[a])}const yo=new De(null),xo=new De(null),vo=new De(null,1,1),Xf=1,X0=2,_o=4;class Pe extends nn{constructor(t={}){super(),this.uid=Wt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new mt,this.relativeGroupTransform=new mt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new De(this,0,0),this._scale=vo,this._pivot=xo,this._skew=yo,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],Y0(this,t,{children:!0,parent:!0,effects:!0}),t.children?.forEach(n=>this.addChild(n)),t.parent?.addChild(this)}static mixin(t){bt("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),te.mixin(Pe,t)}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||bt(Rt,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let r=0;r<t.length;r++)this.addChild(t[r]);return t[0]}const n=t[0],a=this.renderGroup||this.parentRenderGroup;return n.parent===this?(this.children.splice(this.children.indexOf(n),1),this.children.push(n),a&&(a.structureDidChange=!0),n):(n.parent&&n.parent.removeChild(n),this.children.push(n),this.sortableChildren&&(this.sortDirty=!0),n.parent=this,n.didChange=!0,n._updateFlags=15,a&&a.addChild(n),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this),this._didViewChangeTick++,n._zIndex!==0&&n.depthOfChildModified(),n)}removeChild(...t){if(t.length>1){for(let r=0;r<t.length;r++)this.removeChild(t[r]);return t[0]}const n=t[0],a=this.children.indexOf(n);return a>-1&&(this._didViewChangeTick++,this.children.splice(a,1),this.renderGroup?this.renderGroup.removeChild(n):this.parentRenderGroup&&this.parentRenderGroup.removeChild(n),n.parentRenderLayer&&n.parentRenderLayer.detach(n),n.parent=null,this.emit("childRemoved",n,this,a),n.emit("removed",this)),n}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),this.renderGroup=Rn.get(j0,this),this.groupTransform=mt.IDENTITY,t?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),Rn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new mt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*e0}set angle(t){this.rotation=t*n0}get pivot(){return this._pivot===xo&&(this._pivot=new De(this,0,0)),this._pivot}set pivot(t){this._pivot===xo&&(this._pivot=new De(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===yo&&(this._skew=new De(this,0,0)),this._skew}set skew(t){this._skew===yo&&(this._skew=new De(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===vo&&(this._scale=new De(this,1,1)),this._scale}set scale(t){this._scale===vo&&(this._scale=new De(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const n=this.getLocalBounds().width;this._setWidth(t,n)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const n=this.getLocalBounds().height;this._setHeight(t,n)}getSize(t){t||(t={});const n=this.getLocalBounds();return t.width=Math.abs(this.scale.x*n.width),t.height=Math.abs(this.scale.y*n.height),t}setSize(t,n){const a=this.getLocalBounds();typeof t=="object"?(n=t.height??t.width,t=t.width):n??(n=t),t!==void 0&&this._setWidth(t,a.width),n!==void 0&&this._setHeight(n,a.height)}_updateSkew(){const t=this._rotation,n=this._skew;this._cx=Math.cos(t+n._y),this._sx=Math.sin(t+n._y),this._cy=-Math.sin(t-n._x),this._sy=Math.cos(t-n._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const n=this.localTransform,a=this._scale,r=this._pivot,o=this._position,c=a._x,h=a._y,d=r._x,m=r._y;n.a=this._cx*c,n.b=this._sx*c,n.c=this._cy*h,n.d=this._sy*h,n.tx=o._x-(d*n.a+m*n.c),n.ty=o._y-(d*n.b+m*n.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=Xf,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const a=Zt.shared.setValue(t??16777215).toBgrNumber();a!==this.localColor&&(this.localColor=a,this._updateFlags|=Xf,this._onUpdate())}get tint(){return ur(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=X0,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const n=t?2:0;(this.localDisplayStatus&2)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=_o,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const n=t?0:4;(this.localDisplayStatus&4)!==n&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=_o,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const n=t?1:0;(this.localDisplayStatus&1)!==n&&(this._updateFlags|=_o,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){if(this.destroyed)return;this.destroyed=!0;let n;if(this.children.length&&(n=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof t=="boolean"?t:t?.children)&&n)for(let r=0;r<n.length;++r)n[r].destroy(t);this.renderGroup?.destroy(),this.renderGroup=null}}te.mixin(Pe,C0,B0,P0,O0,N0,E0,w0,D0,_0,S0,z0,T0);class yp extends Pe{constructor(t){super(t),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new en(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const n=this.bounds,{x:a,y:r}=t;return a>=n.minX&&a<=n.maxX&&r>=n.minY&&r<=n.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}collectRenderablesSimple(t,n,a){const{renderPipes:r,renderableGC:o}=n;r.blendMode.setBlendMode(this,this.groupBlendMode,t),r[this.renderPipeId].addRenderable(this,t),o.addRenderable(this),this.didViewUpdate=!1;const h=this.children,d=h.length;for(let m=0;m<d;m++)h[m].collectRenderables(t,n,a)}}class ls extends yp{constructor(t=pt.EMPTY){t instanceof pt&&(t={texture:t});const{texture:n=pt.EMPTY,anchor:a,roundPixels:r,width:o,height:c,...h}=t;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new De({_onUpdate:()=>{this.onViewUpdate()}}),a?this.anchor=a:n.defaultAnchor&&(this.anchor=n.defaultAnchor),this.texture=n,this.allowChildren=!1,this.roundPixels=r??!1,o!==void 0&&(this.width=o),c!==void 0&&(this.height=c)}static from(t,n=!1){return t instanceof pt?new ls(t):new ls(pt.from(t,n))}set texture(t){t||(t=pt.EMPTY);const n=this._texture;n!==t&&(n&&n.dynamic&&n.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return c0(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return bt("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,n=this._texture,a=this._bounds,{width:r,height:o}=n.orig;a.minX=-t._x*r,a.maxX=a.minX+r,a.minY=-t._y*o,a.maxY=a.minY+o}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t?.texture){const a=typeof t=="boolean"?t:t?.textureSource;this._texture.destroy(a)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,n){typeof t=="object"?(n=t.height??t.width,t=t.width):n??(n=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),n!==void 0&&this._setHeight(n,this._texture.orig.height)}}const F0=new en;function xp(s,t,n){const a=F0;s.measurable=!0,cp(s,n,a),t.addBoundsMask(a),s.measurable=!1}function vp(s,t,n){const a=Bn.get();s.measurable=!0;const r=xe.get().identity(),o=_p(s,n,r);dp(s,a,o),s.measurable=!1,t.addBoundsMask(a),xe.return(r),Bn.return(a)}function _p(s,t,n){return s?(s!==t&&(_p(s.parent,t,n),s.updateLocalTransform(),n.append(s.localTransform)),n):(Ht("Mask bounds, renderable is not inside the root container"),n)}class bp{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof ls),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,n){this.inverse||xp(this.mask,t,n)}addLocalBounds(t,n){vp(this.mask,t,n)}containsPoint(t,n){const a=this.mask;return n(a,t)}destroy(){this.reset()}static test(t){return t instanceof ls}}bp.extension=nt.MaskEffect;class Sp{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}Sp.extension=nt.MaskEffect;class Ap{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,n){xp(this.mask,t,n)}addLocalBounds(t,n){vp(this.mask,t,n)}containsPoint(t,n){const a=this.mask;return n(a,t)}destroy(){this.reset()}static test(t){return t instanceof Pe}}Ap.extension=nt.MaskEffect;const q0={createCanvas:(s,t)=>{const n=document.createElement("canvas");return n.width=s,n.height=t,n},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(s,t)=>fetch(s,t),parseXML:s=>new DOMParser().parseFromString(s,"text/xml")};let Ff=q0;const Ft={get(){return Ff},set(s){Ff=s}};class Cp extends fn{constructor(t){t.resource||(t.resource=Ft.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,n=this.height,a=this._resolution){const r=super.resize(t,n,a);return r&&this.resizeCanvas(),r}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Cp.extension=nt.TextureSource;class Ei extends fn{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const n=Ft.get().createCanvas(t.resource.width,t.resource.height);n.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=n,Ht("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}Ei.extension=nt.TextureSource;var eu=(s=>(s[s.INTERACTION=50]="INTERACTION",s[s.HIGH=25]="HIGH",s[s.NORMAL=0]="NORMAL",s[s.LOW=-25]="LOW",s[s.UTILITY=-50]="UTILITY",s))(eu||{});class bo{constructor(t,n=null,a=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=n,this.priority=a,this._once=r}match(t,n=null){return this._fn===t&&this._context===n}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const n=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=t?null:n,this.previous=null,n}}const Tp=class Oe{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new bo(null,null,1/0),this.deltaMS=1/Oe.targetFPMS,this.elapsedMS=1/Oe.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,n,a=eu.NORMAL){return this._addListener(new bo(t,n,a))}addOnce(t,n,a=eu.NORMAL){return this._addListener(new bo(t,n,a,!0))}_addListener(t){let n=this._head.next,a=this._head;if(!n)t.connect(a);else{for(;n;){if(t.priority>n.priority){t.connect(a);break}a=n,n=n.next}t.previous||t.connect(a)}return this._startIfPossible(),this}remove(t,n){let a=this._head.next;for(;a;)a.match(t,n)?a=a.destroy():a=a.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,n=this._head;for(;n=n.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let n;if(t>this.lastTime){if(n=this.elapsedMS=t-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const o=t-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=t-o%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*Oe.targetFPMS;const a=this._head;let r=a.next;for(;r;)r=r.emit(this);a.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const n=Math.min(this.maxFPS,t),a=Math.min(Math.max(0,n)/1e3,Oe.targetFPMS);this._maxElapsedMS=1/a}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,t);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!Oe._shared){const t=Oe._shared=new Oe;t.autoStart=!0,t._protected=!0}return Oe._shared}static get system(){if(!Oe._system){const t=Oe._system=new Oe;t.autoStart=!0,t._protected=!0}return Oe._system}};Tp.targetFPMS=.06;let $a=Tp,So;async function Mp(){return So??(So=(async()=>{const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const n=await new Promise(c=>{const h=document.createElement("video");h.onloadeddata=()=>c(h),h.onerror=()=>c(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!n)return"premultiply-alpha-on-upload";const a=t.createTexture();t.bindTexture(t.TEXTURE_2D,a);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,a,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n);const o=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,o),t.deleteFramebuffer(r),t.deleteTexture(a),t.getExtension("WEBGL_lose_context")?.loseContext(),o[0]<=o[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),So}const Sr=class Ep extends fn{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...Ep.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=$a.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,n=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(n.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await Mp(),this._load=new Promise((a,r)=>{this.isValid?a(this):(this._resolve=a,this._reject=r,n.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${n.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&($a.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||($a.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&($a.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};Sr.extension=nt.TextureSource;Sr.defaultOptions={...fn.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Sr.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let cr=Sr;const tn=(s,t,n=!1)=>(Array.isArray(s)||(s=[s]),t?s.map(a=>typeof a=="string"||n?t(a):a):s);class k0{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const n=this._cache.get(t);return n||Ht(`[Assets] Asset id ${t} was not found in the Cache`),n}set(t,n){const a=tn(t);let r;for(let d=0;d<this.parsers.length;d++){const m=this.parsers[d];if(m.test(n)){r=m.getCacheableAssets(a,n);break}}const o=new Map(Object.entries(r||{}));r||a.forEach(d=>{o.set(d,n)});const c=[...o.keys()],h={cacheKeys:c,keys:a};a.forEach(d=>{this._cacheMap.set(d,h)}),c.forEach(d=>{const m=r?r[d]:n;this._cache.has(d)&&this._cache.get(d)!==m&&Ht("[Cache] already has key:",d),this._cache.set(d,o.get(d))})}remove(t){if(!this._cacheMap.has(t)){Ht(`[Assets] Asset id ${t} was not found in the Cache`);return}const n=this._cacheMap.get(t);n.cacheKeys.forEach(r=>{this._cache.delete(r)}),n.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const Xt=new k0,nu=[];te.handleByList(nt.TextureSource,nu);function wp(s={}){const t=s&&s.resource,n=t?s.resource:s,a=t?s:{resource:s};for(let r=0;r<nu.length;r++){const o=nu[r];if(o.test(n))return new o(a)}throw new Error(`Could not find a source type for resource: ${a.resource}`)}function I0(s={},t=!1){const n=s&&s.resource,a=n?s.resource:s,r=n?s:{resource:s};if(!t&&Xt.has(a))return Xt.get(a);const o=new pt({source:wp(r)});return o.on("destroy",()=>{Xt.has(a)&&Xt.remove(a)}),t||Xt.set(a,o),o}function K0(s,t=!1){return typeof s=="string"?Xt.get(s):s instanceof fn?new pt({source:s}):I0(s,t)}pt.from=K0;fn.from=wp;te.add(bp,Sp,Ap,cr,Ei,Cp,Su);var ni=(s=>(s[s.Low=0]="Low",s[s.Normal=1]="Normal",s[s.High=2]="High",s))(ni||{});function $e(s){if(typeof s!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(s)}`)}function Xs(s){return s.split("?")[0].split("#")[0]}function Q0(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function W0(s,t,n){return s.replace(new RegExp(Q0(t),"g"),n)}function Z0(s,t){let n="",a=0,r=-1,o=0,c=-1;for(let h=0;h<=s.length;++h){if(h<s.length)c=s.charCodeAt(h);else{if(c===47)break;c=47}if(c===47){if(!(r===h-1||o===1))if(r!==h-1&&o===2){if(n.length<2||a!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const d=n.lastIndexOf("/");if(d!==n.length-1){d===-1?(n="",a=0):(n=n.slice(0,d),a=n.length-1-n.lastIndexOf("/")),r=h,o=0;continue}}else if(n.length===2||n.length===1){n="",a=0,r=h,o=0;continue}}}else n.length>0?n+=`/${s.slice(r+1,h)}`:n=s.slice(r+1,h),a=h-r-1;r=h,o=0}else c===46&&o!==-1?++o:o=-1}return n}const Ge={toPosix(s){return W0(s,"\\","/")},isUrl(s){return/^https?:/.test(this.toPosix(s))},isDataUrl(s){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(s)},isBlobUrl(s){return s.startsWith("blob:")},hasProtocol(s){return/^[^/:]+:/.test(this.toPosix(s))},getProtocol(s){$e(s),s=this.toPosix(s);const t=/^file:\/\/\//.exec(s);if(t)return t[0];const n=/^[^/:]+:\/{0,2}/.exec(s);return n?n[0]:""},toAbsolute(s,t,n){if($e(s),this.isDataUrl(s)||this.isBlobUrl(s))return s;const a=Xs(this.toPosix(t??Ft.get().getBaseUrl())),r=Xs(this.toPosix(n??this.rootname(a)));return s=this.toPosix(s),s.startsWith("/")?Ge.join(r,s.slice(1)):this.isAbsolute(s)?s:this.join(a,s)},normalize(s){if($e(s),s.length===0)return".";if(this.isDataUrl(s)||this.isBlobUrl(s))return s;s=this.toPosix(s);let t="";const n=s.startsWith("/");this.hasProtocol(s)&&(t=this.rootname(s),s=s.slice(t.length));const a=s.endsWith("/");return s=Z0(s),s.length>0&&a&&(s+="/"),n?`/${s}`:t+s},isAbsolute(s){return $e(s),s=this.toPosix(s),this.hasProtocol(s)?!0:s.startsWith("/")},join(...s){if(s.length===0)return".";let t;for(let n=0;n<s.length;++n){const a=s[n];if($e(a),a.length>0)if(t===void 0)t=a;else{const r=s[n-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?t+=`/../${a}`:t+=`/${a}`}}return t===void 0?".":this.normalize(t)},dirname(s){if($e(s),s.length===0)return".";s=this.toPosix(s);let t=s.charCodeAt(0);const n=t===47;let a=-1,r=!0;const o=this.getProtocol(s),c=s;s=s.slice(o.length);for(let h=s.length-1;h>=1;--h)if(t=s.charCodeAt(h),t===47){if(!r){a=h;break}}else r=!1;return a===-1?n?"/":this.isUrl(c)?o+s:o:n&&a===1?"//":o+s.slice(0,a)},rootname(s){$e(s),s=this.toPosix(s);let t="";if(s.startsWith("/")?t="/":t=this.getProtocol(s),this.isUrl(s)){const n=s.indexOf("/",t.length);n!==-1?t=s.slice(0,n):t=s,t.endsWith("/")||(t+="/")}return t},basename(s,t){$e(s),t&&$e(t),s=Xs(this.toPosix(s));let n=0,a=-1,r=!0,o;if(t!==void 0&&t.length>0&&t.length<=s.length){if(t.length===s.length&&t===s)return"";let c=t.length-1,h=-1;for(o=s.length-1;o>=0;--o){const d=s.charCodeAt(o);if(d===47){if(!r){n=o+1;break}}else h===-1&&(r=!1,h=o+1),c>=0&&(d===t.charCodeAt(c)?--c===-1&&(a=o):(c=-1,a=h))}return n===a?a=h:a===-1&&(a=s.length),s.slice(n,a)}for(o=s.length-1;o>=0;--o)if(s.charCodeAt(o)===47){if(!r){n=o+1;break}}else a===-1&&(r=!1,a=o+1);return a===-1?"":s.slice(n,a)},extname(s){$e(s),s=Xs(this.toPosix(s));let t=-1,n=0,a=-1,r=!0,o=0;for(let c=s.length-1;c>=0;--c){const h=s.charCodeAt(c);if(h===47){if(!r){n=c+1;break}continue}a===-1&&(r=!1,a=c+1),h===46?t===-1?t=c:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||a===-1||o===0||o===1&&t===a-1&&t===n+1?"":s.slice(t,a)},parse(s){$e(s);const t={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return t;s=Xs(this.toPosix(s));let n=s.charCodeAt(0);const a=this.isAbsolute(s);let r;t.root=this.rootname(s),a||this.hasProtocol(s)?r=1:r=0;let o=-1,c=0,h=-1,d=!0,m=s.length-1,g=0;for(;m>=r;--m){if(n=s.charCodeAt(m),n===47){if(!d){c=m+1;break}continue}h===-1&&(d=!1,h=m+1),n===46?o===-1?o=m:g!==1&&(g=1):o!==-1&&(g=-1)}return o===-1||h===-1||g===0||g===1&&o===h-1&&o===c+1?h!==-1&&(c===0&&a?t.base=t.name=s.slice(1,h):t.base=t.name=s.slice(c,h)):(c===0&&a?(t.name=s.slice(1,o),t.base=s.slice(1,h)):(t.name=s.slice(c,o),t.base=s.slice(c,h)),t.ext=s.slice(o,h)),t.dir=this.dirname(s),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function Rp(s,t,n,a,r){const o=t[n];for(let c=0;c<o.length;c++){const h=o[c];n<t.length-1?Rp(s.replace(a[n],h),t,n+1,a,r):r.push(s.replace(a[n],h))}}function J0(s){const t=/\{(.*?)\}/g,n=s.match(t),a=[];if(n){const r=[];n.forEach(o=>{const c=o.substring(1,o.length-1).split(",");r.push(c)}),Rp(s,r,0,n,a)}else a.push(s);return a}const yr=s=>!Array.isArray(s);class hs{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,n)=>`${t}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(t,n)=>n.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const n=t;this._defaultSearchParams=Object.keys(n).map(a=>`${encodeURIComponent(a)}=${encodeURIComponent(n[a])}`).join("&")}}getAlias(t){const{alias:n,src:a}=t;return tn(n||a,o=>typeof o=="string"?o:Array.isArray(o)?o.map(c=>c?.src??c):o?.src?o.src:o,!0)}addManifest(t){this._manifest&&Ht("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(t,n){const a=[];let r=n;Array.isArray(n)||(r=Object.entries(n).map(([o,c])=>typeof c=="string"||Array.isArray(c)?{alias:o,src:c}:{alias:o,...c})),r.forEach(o=>{const c=o.src,h=o.alias;let d;if(typeof h=="string"){const m=this._createBundleAssetId(t,h);a.push(m),d=[h,m]}else{const m=h.map(g=>this._createBundleAssetId(t,g));a.push(...m),d=[...h,...m]}this.add({...o,alias:d,src:c})}),this._bundles[t]=a}add(t){const n=[];Array.isArray(t)?n.push(...t):n.push(t);let a;a=o=>{this.hasKey(o)&&Ht(`[Resolver] already has key: ${o} overwriting`)},tn(n).forEach(o=>{const{src:c}=o;let{data:h,format:d,loadParser:m}=o;const g=tn(c).map(x=>typeof x=="string"?J0(x):Array.isArray(x)?x:[x]),y=this.getAlias(o);Array.isArray(y)?y.forEach(a):a(y);const v=[];g.forEach(x=>{x.forEach(C=>{let E={};if(typeof C!="object"){E.src=C;for(let S=0;S<this._parsers.length;S++){const w=this._parsers[S];if(w.test(C)){E=w.parse(C);break}}}else h=C.data??h,d=C.format??d,m=C.loadParser??m,E={...E,...C};if(!y)throw new Error(`[Resolver] alias is undefined for this asset: ${E.src}`);E=this._buildResolvedAsset(E,{aliases:y,data:h,format:d,loadParser:m}),v.push(E)})}),y.forEach(x=>{this._assetMap[x]=v})})}resolveBundle(t){const n=yr(t);t=tn(t);const a={};return t.forEach(r=>{const o=this._bundles[r];if(o){const c=this.resolve(o),h={};for(const d in c){const m=c[d];h[this._extractAssetIdFromBundle(r,d)]=m}a[r]=h}}),n?a[t[0]]:a}resolveUrl(t){const n=this.resolve(t);if(typeof t!="string"){const a={};for(const r in n)a[r]=n[r].src;return a}return n.src}resolve(t){const n=yr(t);t=tn(t);const a={};return t.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let o=this._assetMap[r];const c=this._getPreferredOrder(o);c?.priority.forEach(h=>{c.params[h].forEach(d=>{const m=o.filter(g=>g[h]?g[h]===d:!1);m.length&&(o=m)})}),this._resolverHash[r]=o[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});a[r]=this._resolverHash[r]}),n?a[t[0]]:a}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let n=0;n<t.length;n++){const a=t[n],r=this._preferredOrder.find(o=>o.params.format.includes(a.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const n=/\?/.test(t)?"&":"?";return`${t}${n}${this._defaultSearchParams}`}_buildResolvedAsset(t,n){const{aliases:a,data:r,loadParser:o,format:c}=n;return(this._basePath||this._rootPath)&&(t.src=Ge.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=a??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...r||{},...t.data},t.loadParser=o??t.loadParser,t.format=c??t.format??$0(t.src),t}}hs.RETINA_PREFIX=/@([0-9\.]+)x/;function $0(s){return s.split(".").pop().split("?").shift().split("#").shift()}const iu=(s,t)=>{const n=t.split("?")[1];return n&&(s+=`?${n}`),s},Bp=class Ks{constructor(t,n){this.linkedSheets=[],this._texture=t instanceof pt?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=n;const a=parseFloat(n.meta.scale);a?(this.resolution=a,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Ks.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let n=t;const a=Ks.BATCH_SIZE;for(;n-t<a&&n<this._frameKeys.length;){const r=this._frameKeys[n],o=this._frames[r],c=o.frame;if(c){let h=null,d=null;const m=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,g=new Qt(0,0,Math.floor(m.w)/this.resolution,Math.floor(m.h)/this.resolution);o.rotated?h=new Qt(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.h)/this.resolution,Math.floor(c.w)/this.resolution):h=new Qt(Math.floor(c.x)/this.resolution,Math.floor(c.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(d=new Qt(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution)),this.textures[r]=new pt({source:this.textureSource,frame:h,orig:g,trim:d,rotate:o.rotated?2:0,defaultAnchor:o.anchor,defaultBorders:o.borders,label:r.toString()})}n++}}_processAnimations(){const t=this.data.animations||{};for(const n in t){this.animations[n]=[];for(let a=0;a<t[n].length;a++){const r=t[n][a];this.animations[n].push(this.textures[r])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ks.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ks.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Bp.BATCH_SIZE=1e3;let qf=Bp;const tx=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function zp(s,t,n){const a={};if(s.forEach(r=>{a[r]=t}),Object.keys(t.textures).forEach(r=>{a[r]=t.textures[r]}),!n){const r=Ge.dirname(s[0]);t.linkedSheets.forEach((o,c)=>{const h=zp([`${r}/${t.data.meta.related_multi_packs[c]}`],o,!0);Object.assign(a,h)})}return a}const ex={extension:nt.Asset,cache:{test:s=>s instanceof qf,getCacheableAssets:(s,t)=>zp(s,t,!1)},resolver:{extension:{type:nt.ResolveParser,name:"resolveSpritesheet"},test:s=>{const n=s.split("?")[0].split("."),a=n.pop(),r=n.pop();return a==="json"&&tx.includes(r)},parse:s=>{const t=s.split(".");return{resolution:parseFloat(hs.RETINA_PREFIX.exec(s)?.[1]??"1"),format:t[t.length-2],src:s}}},loader:{name:"spritesheetLoader",extension:{type:nt.LoadParser,priority:ni.Normal,name:"spritesheetLoader"},async testParse(s,t){return Ge.extname(t.src).toLowerCase()===".json"&&!!s.frames},async parse(s,t,n){const{texture:a,imageFilename:r,textureOptions:o}=t?.data??{};let c=Ge.dirname(t.src);c&&c.lastIndexOf("/")!==c.length-1&&(c+="/");let h;if(a instanceof pt)h=a;else{const g=iu(c+(r??s.meta.image),t.src);h=(await n.load([{src:g,data:o}]))[g]}const d=new qf(h.source,s);await d.parse();const m=s?.meta?.related_multi_packs;if(Array.isArray(m)){const g=[];for(const v of m){if(typeof v!="string")continue;let x=c+v;t.data?.ignoreMultiPack||(x=iu(x,t.src),g.push(n.load({src:x,data:{textureOptions:o,ignoreMultiPack:!0}})))}const y=await Promise.all(g);d.linkedSheets=y,y.forEach(v=>{v.linkedSheets=[d].concat(d.linkedSheets.filter(x=>x!==v))})}return d},async unload(s,t,n){await n.unload(s.textureSource._sourceOrigin),s.destroy(!1)}}};te.add(ex);const Ao=Object.create(null),kf=Object.create(null);function Tu(s,t){let n=kf[s];return n===void 0&&(Ao[t]===void 0&&(Ao[t]=1),kf[s]=n=Ao[t]++),n}let tr;function Up(){return(!tr||tr?.isContextLost())&&(tr=Ft.get().createCanvas().getContext("webgl",{})),tr}let er;function nx(){if(!er){er="mediump";const s=Up();s&&s.getShaderPrecisionFormat&&(er=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT).precision?"highp":"mediump")}return er}function ix(s,t,n){return t?s:n?(s=s.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${s}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${s}
        `}function sx(s,t,n){const a=n?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(s.substring(0,9)!=="precision"){let r=n?t.requestedFragmentPrecision:t.requestedVertexPrecision;return r==="highp"&&a!=="highp"&&(r="mediump"),`precision ${r} float;
${s}`}else if(a!=="highp"&&s.substring(0,15)==="precision highp")return s.replace("precision highp","precision mediump");return s}function ax(s,t){return t?`#version 300 es
${s}`:s}const rx={},lx={};function ox(s,{name:t="pixi-program"},n=!0){t=t.replace(/\s+/g,"-"),t+=n?"-fragment":"-vertex";const a=n?rx:lx;return a[t]?(a[t]++,t+=`-${a[t]}`):a[t]=1,s.indexOf("#define SHADER_NAME")!==-1?s:`${`#define SHADER_NAME ${t}`}
${s}`}function ux(s,t){return t?s.replace("#version 300 es",""):s}const Co={stripVersion:ux,ensurePrecision:sx,addProgramDefines:ix,setProgramName:ox,insertVersion:ax},To=Object.create(null),Np=class su{constructor(t){t={...su.defaultOptions,...t};const n=t.fragment.indexOf("#version 300 es")!==-1,a={stripVersion:n,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:nx()},setProgramName:{name:t.name},addProgramDefines:n,insertVersion:n};let r=t.fragment,o=t.vertex;Object.keys(Co).forEach(c=>{const h=a[c];r=Co[c](r,h,!0),o=Co[c](o,h,!1)}),this.fragment=r,this.vertex=o,this.transformFeedbackVaryings=t.transformFeedbackVaryings,this._key=Tu(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const n=`${t.vertex}:${t.fragment}`;return To[n]||(To[n]=new su(t)),To[n]}};Np.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let dn=Np;const If={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function cx(s){return If[s]??If.float32}const hx={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function fx({source:s,entryPoint:t}){const n={},a=s.indexOf(`fn ${t}`);if(a!==-1){const r=s.indexOf("->",a);if(r!==-1){const o=s.substring(a,r),c=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;(h=c.exec(o))!==null;){const d=hx[h[3]]??"float32";n[h[2]]={location:parseInt(h[1],10),format:d,stride:cx(d).stride,offset:0,instance:!1,start:0}}}}return n}function Mo(s){const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,n=/@group\((\d+)\)/,a=/@binding\((\d+)\)/,r=/var(<[^>]+>)? (\w+)/,o=/:\s*(\w+)/,c=/struct\s+(\w+)\s*{([^}]+)}/g,h=/(\w+)\s*:\s*([\w\<\>]+)/g,d=/struct\s+(\w+)/,m=s.match(t)?.map(y=>({group:parseInt(y.match(n)[1],10),binding:parseInt(y.match(a)[1],10),name:y.match(r)[2],isUniform:y.match(r)[1]==="<uniform>",type:y.match(o)[1]}));if(!m)return{groups:[],structs:[]};const g=s.match(c)?.map(y=>{const v=y.match(d)[1],x=y.match(h).reduce((C,E)=>{const[S,w]=E.split(":");return C[S.trim()]=w.trim(),C},{});return x?{name:v,members:x}:null}).filter(({name:y})=>m.some(v=>v.type===y))??[];return{groups:m,structs:g}}var Qs=(s=>(s[s.VERTEX=1]="VERTEX",s[s.FRAGMENT=2]="FRAGMENT",s[s.COMPUTE=4]="COMPUTE",s))(Qs||{});function dx({groups:s}){const t=[];for(let n=0;n<s.length;n++){const a=s[n];t[a.group]||(t[a.group]=[]),a.isUniform?t[a.group].push({binding:a.binding,visibility:Qs.VERTEX|Qs.FRAGMENT,buffer:{type:"uniform"}}):a.type==="sampler"?t[a.group].push({binding:a.binding,visibility:Qs.FRAGMENT,sampler:{type:"filtering"}}):a.type==="texture_2d"&&t[a.group].push({binding:a.binding,visibility:Qs.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function px({groups:s}){const t=[];for(let n=0;n<s.length;n++){const a=s[n];t[a.group]||(t[a.group]={}),t[a.group][a.name]=a.binding}return t}function mx(s,t){const n=new Set,a=new Set,r=[...s.structs,...t.structs].filter(c=>n.has(c.name)?!1:(n.add(c.name),!0)),o=[...s.groups,...t.groups].filter(c=>{const h=`${c.name}-${c.binding}`;return a.has(h)?!1:(a.add(h),!0)});return{structs:r,groups:o}}const Eo=Object.create(null);class aa{constructor(t){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:n,vertex:a,layout:r,gpuLayout:o,name:c}=t;if(this.name=c,this.fragment=n,this.vertex=a,n.source===a.source){const h=Mo(n.source);this.structsAndGroups=h}else{const h=Mo(a.source),d=Mo(n.source);this.structsAndGroups=mx(h,d)}this.layout=r??px(this.structsAndGroups),this.gpuLayout=o??dx(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:n}=this,a=t.source+n.source+t.entryPoint+n.entryPoint;this._layoutKey=Tu(a,"program")}get attributeData(){return this._attributeData??(this._attributeData=fx(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const n=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return Eo[n]||(Eo[n]=new aa(t)),Eo[n]}}const Op=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],gx=Op.reduce((s,t)=>(s[t]=!0,s),{});function yx(s,t){switch(s){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Dp=class Gp{constructor(t,n){this._touched=0,this.uid=Wt("uniform"),this._resourceType="uniformGroup",this._resourceId=Wt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,n={...Gp.defaultOptions,...n},this.uniformStructures=t;const a={};for(const r in t){const o=t[r];if(o.name=r,o.size=o.size??1,!gx[o.type])throw new Error(`Uniform type ${o.type} is not supported. Supported uniform types are: ${Op.join(", ")}`);o.value??(o.value=yx(o.type,o.size)),a[r]=o.value}this.uniforms=a,this._dirtyId=1,this.ubo=n.ubo,this.isStatic=n.isStatic,this._signature=Tu(Object.keys(a).map(r=>`${r}-${t[r].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};Dp.defaultOptions={ubo:!1,isStatic:!1};let Pp=Dp;class hr{constructor(t){this.resources=Object.create(null),this._dirty=!0;let n=0;for(const a in t){const r=t[a];this.setResource(r,n++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let n=0;for(const a in this.resources)t[n++]=this.resources[a]._resourceId;this._key=t.join("|")}setResource(t,n){const a=this.resources[n];t!==a&&(a&&t.off?.("change",this.onResourceChange,this),t.on?.("change",this.onResourceChange,this),this.resources[n]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const n=this.resources;for(const a in n)n[a]._touched=t}destroy(){const t=this.resources;for(const n in t)t[n].off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const n=this.resources;for(const a in n)n[a]===t&&(n[a]=null)}else this._updateKey()}}var au=(s=>(s[s.WEBGL=1]="WEBGL",s[s.WEBGPU=2]="WEBGPU",s[s.BOTH=3]="BOTH",s))(au||{});class Ar extends nn{constructor(t){super(),this.uid=Wt("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:n,glProgram:a,groups:r,resources:o,compatibleRenderers:c,groupMap:h}=t;this.gpuProgram=n,this.glProgram=a,c===void 0&&(c=0,n&&(c|=au.WEBGPU),a&&(c|=au.WEBGL)),this.compatibleRenderers=c;const d={};if(!o&&!r&&(o={}),o&&r)throw new Error("[Shader] Cannot have both resources and groups");if(!n&&r&&!h)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!n&&r&&h)for(const m in h)for(const g in h[m]){const y=h[m][g];d[y]={group:m,binding:g,name:y}}else if(n&&r&&!h){const m=n.structsAndGroups.groups;h={},m.forEach(g=>{h[g.group]=h[g.group]||{},h[g.group][g.binding]=g.name,d[g.name]=g})}else if(o){r={},h={},n&&n.structsAndGroups.groups.forEach(y=>{h[y.group]=h[y.group]||{},h[y.group][y.binding]=y.name,d[y.name]=y});let m=0;for(const g in o)d[g]||(r[99]||(r[99]=new hr,this._ownedBindGroups.push(r[99])),d[g]={group:99,binding:m,name:g},h[99]=h[99]||{},h[99][m]=g,m++);for(const g in o){const y=g;let v=o[g];!v.source&&!v._resourceType&&(v=new Pp(v));const x=d[y];x&&(r[x.group]||(r[x.group]=new hr,this._ownedBindGroups.push(r[x.group])),r[x.group].setResource(v,x.binding))}}this.groups=r,this._uniformBindMap=h,this.resources=this._buildResourceAccessor(r,d)}addResource(t,n,a){var r,o;(r=this._uniformBindMap)[n]||(r[n]={}),(o=this._uniformBindMap[n])[a]||(o[a]=t),this.groups[n]||(this.groups[n]=new hr,this._ownedBindGroups.push(this.groups[n]))}_buildResourceAccessor(t,n){const a={};for(const r in n){const o=n[r];Object.defineProperty(a,o.name,{get(){return t[o.group].getResource(o.binding)},set(c){t[o.group].setResource(c,o.binding)}})}return a}destroy(t=!1){this.emit("destroy",this),t&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(n=>{n.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:n,gl:a,...r}=t;let o,c;return n&&(o=aa.from(n)),a&&(c=dn.from(a)),new Ar({gpuProgram:o,glProgram:c,...r})}}const xx={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},wo=0,Ro=1,Bo=2,zo=3,Uo=4,No=5,ru=class Hp{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<wo)}set blend(t){!!(this.data&1<<wo)!==t&&(this.data^=1<<wo)}get offsets(){return!!(this.data&1<<Ro)}set offsets(t){!!(this.data&1<<Ro)!==t&&(this.data^=1<<Ro)}set cullMode(t){if(t==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=t==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<Bo)}set culling(t){!!(this.data&1<<Bo)!==t&&(this.data^=1<<Bo)}get depthTest(){return!!(this.data&1<<zo)}set depthTest(t){!!(this.data&1<<zo)!==t&&(this.data^=1<<zo)}get depthMask(){return!!(this.data&1<<No)}set depthMask(t){!!(this.data&1<<No)!==t&&(this.data^=1<<No)}get clockwiseFrontFace(){return!!(this.data&1<<Uo)}set clockwiseFrontFace(t){!!(this.data&1<<Uo)!==t&&(this.data^=1<<Uo)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!=="none",this._blendMode=t,this._blendModeId=xx[t]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new Hp;return t.depthTest=!1,t.blend=!0,t}};ru.default2d=ru.for2d();let vx=ru;const Vp=class lu extends Ar{constructor(t){t={...lu.defaultOptions,...t},super(t),this.enabled=!0,this._state=vx.for2d(),this.blendMode=t.blendMode,this.padding=t.padding,typeof t.antialias=="boolean"?this.antialias=t.antialias?"on":"off":this.antialias=t.antialias,this.resolution=t.resolution,this.blendRequired=t.blendRequired,this.clipToViewport=t.clipToViewport,this.addResource("uTexture",0,1)}apply(t,n,a,r){t.applyFilter(this,n,a,r)}get blendMode(){return this._state.blendMode}set blendMode(t){this._state.blendMode=t}static from(t){const{gpu:n,gl:a,...r}=t;let o,c;return n&&(o=aa.from(n)),a&&(c=dn.from(a)),new lu({gpuProgram:o,glProgram:c,...r})}};Vp.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let Ae=Vp;const ou=[];te.handleByNamedList(nt.Environment,ou);async function _x(s){if(!s)for(let t=0;t<ou.length;t++){const n=ou[t];if(n.value.test()){await n.value.load();return}}}let Fs;function bx(){if(typeof Fs=="boolean")return Fs;try{Fs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Fs=!1}return Fs}var nr={exports:{}},Kf;function Sx(){if(Kf)return nr.exports;Kf=1,nr.exports=s,nr.exports.default=s;function s(b,A,M){M=M||2;var z=A&&A.length,D=z?A[0]*M:b.length,L=t(b,0,D,M,!0),j=[];if(!L||L.next===L.prev)return j;var k,J,Z,_t,gt,ot,Dt;if(z&&(L=d(b,A,L,M)),b.length>80*M){k=Z=b[0],J=_t=b[1];for(var yt=M;yt<D;yt+=M)gt=b[yt],ot=b[yt+1],gt<k&&(k=gt),ot<J&&(J=ot),gt>Z&&(Z=gt),ot>_t&&(_t=ot);Dt=Math.max(Z-k,_t-J),Dt=Dt!==0?32767/Dt:0}return a(L,j,M,k,J,Dt,0),j}function t(b,A,M,z,D){var L,j;if(D===le(b,A,M,z)>0)for(L=A;L<M;L+=z)j=Tt(L,b[L],b[L+1],j);else for(L=M-z;L>=A;L-=z)j=Tt(L,b[L],b[L+1],j);return j&&P(j,j.next)&&(vt(j),j=j.next),j}function n(b,A){if(!b)return b;A||(A=b);var M=b,z;do if(z=!1,!M.steiner&&(P(M,M.next)||N(M.prev,M,M.next)===0)){if(vt(M),M=A=M.prev,M===M.next)break;z=!0}else M=M.next;while(z||M!==A);return A}function a(b,A,M,z,D,L,j){if(b){!j&&L&&x(b,z,D,L);for(var k=b,J,Z;b.prev!==b.next;){if(J=b.prev,Z=b.next,L?o(b,z,D,L):r(b)){A.push(J.i/M|0),A.push(b.i/M|0),A.push(Z.i/M|0),vt(b),b=Z.next,k=Z.next;continue}if(b=Z,b===k){j?j===1?(b=c(n(b),A,M),a(b,A,M,z,D,L,2)):j===2&&h(b,A,M,z,D,L):a(n(b),A,M,z,D,L,1);break}}}}function r(b){var A=b.prev,M=b,z=b.next;if(N(A,M,z)>=0)return!1;for(var D=A.x,L=M.x,j=z.x,k=A.y,J=M.y,Z=z.y,_t=D<L?D<j?D:j:L<j?L:j,gt=k<J?k<Z?k:Z:J<Z?J:Z,ot=D>L?D>j?D:j:L>j?L:j,Dt=k>J?k>Z?k:Z:J>Z?J:Z,yt=z.next;yt!==A;){if(yt.x>=_t&&yt.x<=ot&&yt.y>=gt&&yt.y<=Dt&&w(D,k,L,J,j,Z,yt.x,yt.y)&&N(yt.prev,yt,yt.next)>=0)return!1;yt=yt.next}return!0}function o(b,A,M,z){var D=b.prev,L=b,j=b.next;if(N(D,L,j)>=0)return!1;for(var k=D.x,J=L.x,Z=j.x,_t=D.y,gt=L.y,ot=j.y,Dt=k<J?k<Z?k:Z:J<Z?J:Z,yt=_t<gt?_t<ot?_t:ot:gt<ot?gt:ot,pe=k>J?k>Z?k:Z:J>Z?J:Z,Jt=_t>gt?_t>ot?_t:ot:gt>ot?gt:ot,oe=E(Dt,yt,A,M,z),me=E(pe,Jt,A,M,z),rt=b.prevZ,dt=b.nextZ;rt&&rt.z>=oe&&dt&&dt.z<=me;){if(rt.x>=Dt&&rt.x<=pe&&rt.y>=yt&&rt.y<=Jt&&rt!==D&&rt!==j&&w(k,_t,J,gt,Z,ot,rt.x,rt.y)&&N(rt.prev,rt,rt.next)>=0||(rt=rt.prevZ,dt.x>=Dt&&dt.x<=pe&&dt.y>=yt&&dt.y<=Jt&&dt!==D&&dt!==j&&w(k,_t,J,gt,Z,ot,dt.x,dt.y)&&N(dt.prev,dt,dt.next)>=0))return!1;dt=dt.nextZ}for(;rt&&rt.z>=oe;){if(rt.x>=Dt&&rt.x<=pe&&rt.y>=yt&&rt.y<=Jt&&rt!==D&&rt!==j&&w(k,_t,J,gt,Z,ot,rt.x,rt.y)&&N(rt.prev,rt,rt.next)>=0)return!1;rt=rt.prevZ}for(;dt&&dt.z<=me;){if(dt.x>=Dt&&dt.x<=pe&&dt.y>=yt&&dt.y<=Jt&&dt!==D&&dt!==j&&w(k,_t,J,gt,Z,ot,dt.x,dt.y)&&N(dt.prev,dt,dt.next)>=0)return!1;dt=dt.nextZ}return!0}function c(b,A,M){var z=b;do{var D=z.prev,L=z.next.next;!P(D,L)&&X(D,z,z.next,L)&&$(D,L)&&$(L,D)&&(A.push(D.i/M|0),A.push(z.i/M|0),A.push(L.i/M|0),vt(z),vt(z.next),z=b=L),z=z.next}while(z!==b);return n(z)}function h(b,A,M,z,D,L){var j=b;do{for(var k=j.next.next;k!==j.prev;){if(j.i!==k.i&&R(j,k)){var J=Q(j,k);j=n(j,j.next),J=n(J,J.next),a(j,A,M,z,D,L,0),a(J,A,M,z,D,L,0);return}k=k.next}j=j.next}while(j!==b)}function d(b,A,M,z){var D=[],L,j,k,J,Z;for(L=0,j=A.length;L<j;L++)k=A[L]*z,J=L<j-1?A[L+1]*z:b.length,Z=t(b,k,J,z,!1),Z===Z.next&&(Z.steiner=!0),D.push(S(Z));for(D.sort(m),L=0;L<D.length;L++)M=g(D[L],M);return M}function m(b,A){return b.x-A.x}function g(b,A){var M=y(b,A);if(!M)return A;var z=Q(M,b);return n(z,z.next),n(M,M.next)}function y(b,A){var M=A,z=b.x,D=b.y,L=-1/0,j;do{if(D<=M.y&&D>=M.next.y&&M.next.y!==M.y){var k=M.x+(D-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(k<=z&&k>L&&(L=k,j=M.x<M.next.x?M:M.next,k===z))return j}M=M.next}while(M!==A);if(!j)return null;var J=j,Z=j.x,_t=j.y,gt=1/0,ot;M=j;do z>=M.x&&M.x>=Z&&z!==M.x&&w(D<_t?z:L,D,Z,_t,D<_t?L:z,D,M.x,M.y)&&(ot=Math.abs(D-M.y)/(z-M.x),$(M,b)&&(ot<gt||ot===gt&&(M.x>j.x||M.x===j.x&&v(j,M)))&&(j=M,gt=ot)),M=M.next;while(M!==J);return j}function v(b,A){return N(b.prev,b,A.prev)<0&&N(A.next,b,b.next)<0}function x(b,A,M,z){var D=b;do D.z===0&&(D.z=E(D.x,D.y,A,M,z)),D.prevZ=D.prev,D.nextZ=D.next,D=D.next;while(D!==b);D.prevZ.nextZ=null,D.prevZ=null,C(D)}function C(b){var A,M,z,D,L,j,k,J,Z=1;do{for(M=b,b=null,L=null,j=0;M;){for(j++,z=M,k=0,A=0;A<Z&&(k++,z=z.nextZ,!!z);A++);for(J=Z;k>0||J>0&&z;)k!==0&&(J===0||!z||M.z<=z.z)?(D=M,M=M.nextZ,k--):(D=z,z=z.nextZ,J--),L?L.nextZ=D:b=D,D.prevZ=L,L=D;M=z}L.nextZ=null,Z*=2}while(j>1);return b}function E(b,A,M,z,D){return b=(b-M)*D|0,A=(A-z)*D|0,b=(b|b<<8)&16711935,b=(b|b<<4)&252645135,b=(b|b<<2)&858993459,b=(b|b<<1)&1431655765,A=(A|A<<8)&16711935,A=(A|A<<4)&252645135,A=(A|A<<2)&858993459,A=(A|A<<1)&1431655765,b|A<<1}function S(b){var A=b,M=b;do(A.x<M.x||A.x===M.x&&A.y<M.y)&&(M=A),A=A.next;while(A!==b);return M}function w(b,A,M,z,D,L,j,k){return(D-j)*(A-k)>=(b-j)*(L-k)&&(b-j)*(z-k)>=(M-j)*(A-k)&&(M-j)*(L-k)>=(D-j)*(z-k)}function R(b,A){return b.next.i!==A.i&&b.prev.i!==A.i&&!it(b,A)&&($(b,A)&&$(A,b)&&I(b,A)&&(N(b.prev,b,A.prev)||N(b,A.prev,A))||P(b,A)&&N(b.prev,b,b.next)>0&&N(A.prev,A,A.next)>0)}function N(b,A,M){return(A.y-b.y)*(M.x-A.x)-(A.x-b.x)*(M.y-A.y)}function P(b,A){return b.x===A.x&&b.y===A.y}function X(b,A,M,z){var D=Y(N(b,A,M)),L=Y(N(b,A,z)),j=Y(N(M,z,b)),k=Y(N(M,z,A));return!!(D!==L&&j!==k||D===0&&V(b,M,A)||L===0&&V(b,z,A)||j===0&&V(M,b,z)||k===0&&V(M,A,z))}function V(b,A,M){return A.x<=Math.max(b.x,M.x)&&A.x>=Math.min(b.x,M.x)&&A.y<=Math.max(b.y,M.y)&&A.y>=Math.min(b.y,M.y)}function Y(b){return b>0?1:b<0?-1:0}function it(b,A){var M=b;do{if(M.i!==b.i&&M.next.i!==b.i&&M.i!==A.i&&M.next.i!==A.i&&X(M,M.next,b,A))return!0;M=M.next}while(M!==b);return!1}function $(b,A){return N(b.prev,b,b.next)<0?N(b,A,b.next)>=0&&N(b,b.prev,A)>=0:N(b,A,b.prev)<0||N(b,b.next,A)<0}function I(b,A){var M=b,z=!1,D=(b.x+A.x)/2,L=(b.y+A.y)/2;do M.y>L!=M.next.y>L&&M.next.y!==M.y&&D<(M.next.x-M.x)*(L-M.y)/(M.next.y-M.y)+M.x&&(z=!z),M=M.next;while(M!==b);return z}function Q(b,A){var M=new Nt(b.i,b.x,b.y),z=new Nt(A.i,A.x,A.y),D=b.next,L=A.prev;return b.next=A,A.prev=b,M.next=D,D.prev=M,z.next=M,M.prev=z,L.next=z,z.prev=L,z}function Tt(b,A,M,z){var D=new Nt(b,A,M);return z?(D.next=z.next,D.prev=z,z.next.prev=D,z.next=D):(D.prev=D,D.next=D),D}function vt(b){b.next.prev=b.prev,b.prev.next=b.next,b.prevZ&&(b.prevZ.nextZ=b.nextZ),b.nextZ&&(b.nextZ.prevZ=b.prevZ)}function Nt(b,A,M){this.i=b,this.x=A,this.y=M,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}s.deviation=function(b,A,M,z){var D=A&&A.length,L=D?A[0]*M:b.length,j=Math.abs(le(b,0,L,M));if(D)for(var k=0,J=A.length;k<J;k++){var Z=A[k]*M,_t=k<J-1?A[k+1]*M:b.length;j-=Math.abs(le(b,Z,_t,M))}var gt=0;for(k=0;k<z.length;k+=3){var ot=z[k]*M,Dt=z[k+1]*M,yt=z[k+2]*M;gt+=Math.abs((b[ot]-b[yt])*(b[Dt+1]-b[ot+1])-(b[ot]-b[Dt])*(b[yt+1]-b[ot+1]))}return j===0&&gt===0?0:Math.abs((gt-j)/j)};function le(b,A,M,z){for(var D=0,L=A,j=M-z;L<M;L+=z)D+=(b[j]-b[L])*(b[L+1]+b[j+1]),j=L;return D}return s.flatten=function(b){for(var A=b[0][0].length,M={vertices:[],holes:[],dimensions:A},z=0,D=0;D<b.length;D++){for(var L=0;L<b[D].length;L++)for(var j=0;j<A;j++)M.vertices.push(b[D][L][j]);D>0&&(z+=b[D-1].length,M.holes.push(z))}return M},nr.exports}var Ax=Sx();const Cx=br(Ax);var Lp=(s=>(s[s.NONE=0]="NONE",s[s.COLOR=16384]="COLOR",s[s.STENCIL=1024]="STENCIL",s[s.DEPTH=256]="DEPTH",s[s.COLOR_DEPTH=16640]="COLOR_DEPTH",s[s.COLOR_STENCIL=17408]="COLOR_STENCIL",s[s.DEPTH_STENCIL=1280]="DEPTH_STENCIL",s[s.ALL=17664]="ALL",s))(Lp||{});class Tx{constructor(t){this.items=[],this._name=t}emit(t,n,a,r,o,c,h,d){const{name:m,items:g}=this;for(let y=0,v=g.length;y<v;y++)g[y][m](t,n,a,r,o,c,h,d);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const n=this.items.indexOf(t);return n!==-1&&this.items.splice(n,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const Mx=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],jp=class Yp extends nn{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const n=[...Mx,...this.config.runners??[]];this._addRunners(...n),this._unsafeEvalCheck()}async init(t={}){const n=t.skipExtensionImports===!0?!0:t.manageImports===!1;await _x(n),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const a in this._systemsHash)t={...this._systemsHash[a].constructor.defaultOptions,...t};t={...Yp.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let a=0;a<this.runners.init.items.length;a++)await this.runners.init.items[a].init(t);this._initOptions=t}render(t,n){let a=t;if(a instanceof Pe&&(a={container:a},n&&(bt(Rt,"passing a second argument is deprecated, please use render options instead"),a.target=n.renderTexture)),a.target||(a.target=this.view.renderTarget),a.target===this.view.renderTarget&&(this._lastObjectRendered=a.container,a.clearColor??(a.clearColor=this.background.colorRgba),a.clear??(a.clear=this.background.clearBeforeRender)),a.clearColor){const r=Array.isArray(a.clearColor)&&a.clearColor.length===4;a.clearColor=r?a.clearColor:Zt.shared.setValue(a.clearColor).toArray()}a.transform||(a.container.updateLocalTransform(),a.transform=a.container.localTransform),a.container.enableRenderGroup(),this.runners.prerender.emit(a),this.runners.renderStart.emit(a),this.runners.render.emit(a),this.runners.renderEnd.emit(a),this.runners.postrender.emit(a)}resize(t,n,a){const r=this.view.resolution;this.view.resize(t,n,a),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),a!==void 0&&a!==r&&this.runners.resolutionChange.emit(a)}clear(t={}){const n=this;t.target||(t.target=n.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=Lp.ALL);const{clear:a,clearColor:r,target:o}=t;Zt.shared.setValue(r??this.background.colorRgba),n.renderTarget.clear(o,a,Zt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(n=>{this.runners[n]=new Tx(n)})}_addSystems(t){let n;for(n in t){const a=t[n];this._addSystem(a.value,a.name)}}_addSystem(t,n){const a=new t(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=a,this._systemsHash[n]=a;for(const r in this.runners)this.runners[r].add(a);return this}_addPipes(t,n){const a=n.reduce((r,o)=>(r[o.name]=o.value,r),{});t.forEach(r=>{const o=r.value,c=r.name,h=a[c];this.renderPipes[c]=new o(this,h?new h:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(n=>{n.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!bx())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};jp.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let Xp=jp,ir;function Ex(s){return ir!==void 0||(ir=(()=>{const t={stencil:!0,failIfMajorPerformanceCaveat:s??Xp.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Ft.get().getWebGLRenderingContext())return!1;let a=Ft.get().createCanvas().getContext("webgl",t);const r=!!a?.getContextAttributes()?.stencil;if(a){const o=a.getExtension("WEBGL_lose_context");o&&o.loseContext()}return a=null,r}catch{return!1}})()),ir}let sr;async function wx(s={}){return sr!==void 0||(sr=await(async()=>{const t=Ft.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(s)).requestDevice(),!0}catch{return!1}})()),sr}const Qf=["webgl","webgpu","canvas"];async function Rx(s){let t=[];s.preference?(t.push(s.preference),Qf.forEach(o=>{o!==s.preference&&t.push(o)})):t=Qf.slice();let n,a={};for(let o=0;o<t.length;o++){const c=t[o];if(c==="webgpu"&&await wx()){const{WebGPURenderer:h}=await mr(async()=>{const{WebGPURenderer:d}=await import("./WebGPURenderer-BbaVs6ez.js");return{WebGPURenderer:d}},__vite__mapDeps([6,2,7,3,4,5]),import.meta.url);n=h,a={...s,...s.webgpu};break}else if(c==="webgl"&&Ex(s.failIfMajorPerformanceCaveat??Xp.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:h}=await mr(async()=>{const{WebGLRenderer:d}=await import("./WebGLRenderer-zwUVsnc6.js");return{WebGLRenderer:d}},__vite__mapDeps([8,2,7,3,4,5]),import.meta.url);n=h,a={...s,...s.webgl};break}else if(c==="canvas")throw a={...s},new Error("CanvasRenderer is not yet implemented")}if(delete a.webgpu,delete a.webgl,!n)throw new Error("No available renderer for the current environment");const r=new n;return await r.init(a),r}const Fp="8.8.1";class qp{static init(){globalThis.__PIXI_APP_INIT__?.(this,Fp)}static destroy(){}}qp.extension=nt.Application;class Bx{constructor(t){this._renderer=t}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,Fp)}destroy(){this._renderer=null}}Bx.extension={type:[nt.WebGLSystem,nt.WebGPUSystem],name:"initHook",priority:-10};const kp=class uu{constructor(...t){this.stage=new Pe,t[0]!==void 0&&bt(Rt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await Rx(t),uu._plugins.forEach(n=>{n.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return bt(Rt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,n=!1){const a=uu._plugins.slice(0);a.reverse(),a.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null}};kp._plugins=[];let Mu=kp;te.handleByList(nt.Application,Mu._plugins);te.add(qp);class Ip extends nn{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return bt(Rt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return bt(Rt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return bt(Rt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return bt(Rt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return bt(Rt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners();for(const n in this.chars)this.chars[n].texture?.destroy();this.chars=null,t&&(this.pages.forEach(n=>n.texture.destroy(!0)),this.pages=null)}}const Wf=[{offset:0,color:"white"},{offset:1,color:"black"}],Eu=class cu{constructor(...t){this.uid=Wt("fillGradient"),this.type="linear",this.colorStops=[];let n=zx(t);n={...n.type==="radial"?cu.defaultRadialOptions:cu.defaultLinearOptions,...np(n)},this._textureSize=n.textureSize,n.type==="radial"?(this.center=n.center,this.outerCenter=n.outerCenter??this.center,this.innerRadius=n.innerRadius,this.outerRadius=n.outerRadius,this.scale=n.scale,this.rotation=n.rotation):(this.start=n.start,this.end=n.end),this.textureSpace=n.textureSpace,this.type=n.type,n.colorStops.forEach(r=>{this.addColorStop(r.offset,r.color)})}addColorStop(t,n){return this.colorStops.push({offset:t,color:Zt.shared.setValue(n).toHexa()}),this}buildLinearGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:Wf,n=this._textureSize,{canvas:a,context:r}=Jf(n,1),o=r.createLinearGradient(0,0,this._textureSize,0);Zf(o,t),r.fillStyle=o,r.fillRect(0,0,n,1),this.texture=new pt({source:new Ei({resource:a})});const{x:c,y:h}=this.start,{x:d,y:m}=this.end,g=new mt,y=d-c,v=m-h,x=Math.sqrt(y*y+v*v),C=Math.atan2(v,y);g.scale(x/n,1),g.rotate(C),g.translate(c,h),this.textureSpace==="local"&&g.scale(n,n),this.transform=g}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const t=this.colorStops.length?this.colorStops:Wf,n=this._textureSize,{canvas:a,context:r}=Jf(n,n),{x:o,y:c}=this.center,{x:h,y:d}=this.outerCenter,m=this.innerRadius,g=this.outerRadius,y=h-g,v=d-g,x=n/(g*2),C=(o-y)*x,E=(c-v)*x,S=r.createRadialGradient(C,E,m*x,(h-y)*x,(d-v)*x,g*x);Zf(S,t),r.fillStyle=t[t.length-1].color,r.fillRect(0,0,n,n),r.fillStyle=S,r.translate(C,E),r.rotate(this.rotation),r.scale(1,this.scale),r.translate(-C,-E),r.fillRect(0,0,n,n),this.texture=new pt({source:new Ei({resource:a,addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"})});const w=new mt;w.scale(1/x,1/x),w.translate(y,v),this.textureSpace==="local"&&w.scale(n,n),this.transform=w}get styleKey(){return this.uid}destroy(){this.texture?.destroy(!0),this.texture=null}};Eu.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256};Eu.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256};let $n=Eu;function Zf(s,t){for(let n=0;n<t.length;n++){const a=t[n];s.addColorStop(a.offset,a.color)}}function Jf(s,t){const n=Ft.get().createCanvas(s,t),a=n.getContext("2d");return{canvas:n,context:a}}function zx(s){let t=s[0]??{};return(typeof t=="number"||s[1])&&(bt("8.5.2","use options object instead"),t={type:"linear",start:{x:s[0],y:s[1]},end:{x:s[2],y:s[3]},textureSpace:s[4],textureSize:s[5]??$n.defaultLinearOptions.textureSize}),t}const $f={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Cr{constructor(t,n){this.uid=Wt("fillPattern"),this.transform=new mt,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),n&&(t.source.style.addressModeU=$f[n].addressModeU,t.source.style.addressModeV=$f[n].addressModeV)}setTransform(t){const n=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/n.frame.width,1/n.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var Oo,td;function Ux(){if(td)return Oo;td=1,Oo=n;var s={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function n(o){var c=[];return o.replace(t,function(h,d,m){var g=d.toLowerCase();for(m=r(m),g=="m"&&m.length>2&&(c.push([d].concat(m.splice(0,2))),g="l",d=d=="m"?"l":"L");;){if(m.length==s[g])return m.unshift(d),c.push(m);if(m.length<s[g])throw new Error("malformed path data");c.push([d].concat(m.splice(0,s[g])))}}),c}var a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function r(o){var c=o.match(a);return c?c.map(Number):[]}return Oo}var Nx=Ux();const Ox=br(Nx);function Dx(s,t){const n=Ox(s),a=[];let r=null,o=0,c=0;for(let h=0;h<n.length;h++){const d=n[h],m=d[0],g=d;switch(m){case"M":o=g[1],c=g[2],t.moveTo(o,c);break;case"m":o+=g[1],c+=g[2],t.moveTo(o,c);break;case"H":o=g[1],t.lineTo(o,c);break;case"h":o+=g[1],t.lineTo(o,c);break;case"V":c=g[1],t.lineTo(o,c);break;case"v":c+=g[1],t.lineTo(o,c);break;case"L":o=g[1],c=g[2],t.lineTo(o,c);break;case"l":o+=g[1],c+=g[2],t.lineTo(o,c);break;case"C":o=g[5],c=g[6],t.bezierCurveTo(g[1],g[2],g[3],g[4],o,c);break;case"c":t.bezierCurveTo(o+g[1],c+g[2],o+g[3],c+g[4],o+g[5],c+g[6]),o+=g[5],c+=g[6];break;case"S":o=g[3],c=g[4],t.bezierCurveToShort(g[1],g[2],o,c);break;case"s":t.bezierCurveToShort(o+g[1],c+g[2],o+g[3],c+g[4]),o+=g[3],c+=g[4];break;case"Q":o=g[3],c=g[4],t.quadraticCurveTo(g[1],g[2],o,c);break;case"q":t.quadraticCurveTo(o+g[1],c+g[2],o+g[3],c+g[4]),o+=g[3],c+=g[4];break;case"T":o=g[1],c=g[2],t.quadraticCurveToShort(o,c);break;case"t":o+=g[1],c+=g[2],t.quadraticCurveToShort(o,c);break;case"A":o=g[6],c=g[7],t.arcToSvg(g[1],g[2],g[3],g[4],g[5],o,c);break;case"a":o+=g[6],c+=g[7],t.arcToSvg(g[1],g[2],g[3],g[4],g[5],o,c);break;case"Z":case"z":t.closePath(),a.length>0&&(r=a.pop(),r?(o=r.startX,c=r.startY):(o=0,c=0)),r=null;break;default:Ht(`Unknown SVG path command: ${m}`)}m!=="Z"&&m!=="z"&&r===null&&(r={startX:o,startY:c},a.push(r))}return t}class wu{constructor(t=0,n=0,a=0){this.type="circle",this.x=t,this.y=n,this.radius=a}clone(){return new wu(this.x,this.y,this.radius)}contains(t,n){if(this.radius<=0)return!1;const a=this.radius*this.radius;let r=this.x-t,o=this.y-n;return r*=r,o*=o,r+o<=a}strokeContains(t,n,a,r=.5){if(this.radius===0)return!1;const o=this.x-t,c=this.y-n,h=this.radius,d=(1-r)*a,m=Math.sqrt(o*o+c*c);return m<=h+d&&m>h-(a-d)}getBounds(t){return t||(t=new Qt),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Ru{constructor(t=0,n=0,a=0,r=0){this.type="ellipse",this.x=t,this.y=n,this.halfWidth=a,this.halfHeight=r}clone(){return new Ru(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,n){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let a=(t-this.x)/this.halfWidth,r=(n-this.y)/this.halfHeight;return a*=a,r*=r,a+r<=1}strokeContains(t,n,a,r=.5){const{halfWidth:o,halfHeight:c}=this;if(o<=0||c<=0)return!1;const h=a*(1-r),d=a-h,m=o-d,g=c-d,y=o+h,v=c+h,x=t-this.x,C=n-this.y,E=x*x/(m*m)+C*C/(g*g),S=x*x/(y*y)+C*C/(v*v);return E>1&&S<=1}getBounds(t){return t||(t=new Qt),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function Gx(s,t,n,a,r,o){const c=s-n,h=t-a,d=r-n,m=o-a,g=c*d+h*m,y=d*d+m*m;let v=-1;y!==0&&(v=g/y);let x,C;v<0?(x=n,C=a):v>1?(x=r,C=o):(x=n+v*d,C=a+v*m);const E=s-x,S=t-C;return E*E+S*S}let Px,Hx;class ta{constructor(...t){this.type="polygon";let n=Array.isArray(t[0])?t[0]:t;if(typeof n[0]!="number"){const a=[];for(let r=0,o=n.length;r<o;r++)a.push(n[r].x,n[r].y);n=a}this.points=n,this.closePath=!0}isClockwise(){let t=0;const n=this.points,a=n.length;for(let r=0;r<a;r+=2){const o=n[r],c=n[r+1],h=n[(r+2)%a],d=n[(r+3)%a];t+=(h-o)*(d+c)}return t<0}containsPolygon(t){const n=this.getBounds(Px),a=t.getBounds(Hx);if(!n.containsRect(a))return!1;const r=t.points;for(let o=0;o<r.length;o+=2){const c=r[o],h=r[o+1];if(!this.contains(c,h))return!1}return!0}clone(){const t=this.points.slice(),n=new ta(t);return n.closePath=this.closePath,n}contains(t,n){let a=!1;const r=this.points.length/2;for(let o=0,c=r-1;o<r;c=o++){const h=this.points[o*2],d=this.points[o*2+1],m=this.points[c*2],g=this.points[c*2+1];d>n!=g>n&&t<(m-h)*((n-d)/(g-d))+h&&(a=!a)}return a}strokeContains(t,n,a,r=.5){const o=a*a,c=o*(1-r),h=o-c,{points:d}=this,m=d.length-(this.closePath?0:2);for(let g=0;g<m;g+=2){const y=d[g],v=d[g+1],x=d[(g+2)%d.length],C=d[(g+3)%d.length],E=Gx(t,n,y,v,x,C),S=Math.sign((x-y)*(n-v)-(C-v)*(t-y));if(E<=(S<0?h:c))return!0}return!1}getBounds(t){t||(t=new Qt);const n=this.points;let a=1/0,r=-1/0,o=1/0,c=-1/0;for(let h=0,d=n.length;h<d;h+=2){const m=n[h],g=n[h+1];a=m<a?m:a,r=m>r?m:r,o=g<o?g:o,c=g>c?g:c}return t.x=a,t.width=r-a,t.y=o,t.height=c-o,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,n)=>`${t}, ${n}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const ar=(s,t,n,a,r,o,c)=>{const h=s-n,d=t-a,m=Math.sqrt(h*h+d*d);return m>=r-o&&m<=r+c};class Bu{constructor(t=0,n=0,a=0,r=0,o=20){this.type="roundedRectangle",this.x=t,this.y=n,this.width=a,this.height=r,this.radius=o}getBounds(t){return t||(t=new Qt),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new Bu(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,n){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const a=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+a&&n<=this.y+this.height-a||t>=this.x+a&&t<=this.x+this.width-a)return!0;let r=t-(this.x+a),o=n-(this.y+a);const c=a*a;if(r*r+o*o<=c||(r=t-(this.x+this.width-a),r*r+o*o<=c)||(o=n-(this.y+this.height-a),r*r+o*o<=c)||(r=t-(this.x+a),r*r+o*o<=c))return!0}return!1}strokeContains(t,n,a,r=.5){const{x:o,y:c,width:h,height:d,radius:m}=this,g=a*(1-r),y=a-g,v=o+m,x=c+m,C=h-m*2,E=d-m*2,S=o+h,w=c+d;return(t>=o-g&&t<=o+y||t>=S-y&&t<=S+g)&&n>=x&&n<=x+E||(n>=c-g&&n<=c+y||n>=w-y&&n<=w+g)&&t>=v&&t<=v+C?!0:t<v&&n<x&&ar(t,n,v,x,m,y,g)||t>S-m&&n<x&&ar(t,n,S-m,x,m,y,g)||t>S-m&&n>w-m&&ar(t,n,S-m,w-m,m,y,g)||t<v&&n>w-m&&ar(t,n,v,w-m,m,y,g)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const Vx=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Lx(s){let t="";for(let n=0;n<s;++n)n>0&&(t+=`
else `),n<s-1&&(t+=`if(test == ${n}.0){}`);return t}function jx(s,t){if(s===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const a=Vx.replace(/%forloop%/gi,Lx(s));if(t.shaderSource(n,a),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))s=s/2|0;else break}}finally{t.deleteShader(n)}return s}let es=null;function Kp(){if(es)return es;const s=Up();return es=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),es=jx(es,s),s.getExtension("WEBGL_lose_context")?.loseContext(),es}const Qp={};function Yx(s,t){let n=2166136261;for(let a=0;a<t;a++)n^=s[a].uid,n=Math.imul(n,16777619),n>>>=0;return Qp[n]||Xx(s,t,n)}let Do=0;function Xx(s,t,n){const a={};let r=0;Do||(Do=Kp());for(let c=0;c<Do;c++){const h=c<t?s[c]:pt.EMPTY.source;a[r++]=h.source,a[r++]=h.style}const o=new hr(a);return Qp[n]=o,o}class ed{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function nd(s,t){const n=s.byteLength/8|0,a=new Float64Array(s,0,n);new Float64Array(t,0,n).set(a);const o=s.byteLength-n*8;if(o>0){const c=new Uint8Array(s,n*8,o);new Uint8Array(t,n*8,o).set(c)}}const Fx={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var qx=(s=>(s[s.DISABLED=0]="DISABLED",s[s.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",s[s.MASK_ACTIVE=2]="MASK_ACTIVE",s[s.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",s[s.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",s[s.NONE=5]="NONE",s))(qx||{});function id(s,t){return t.alphaMode==="no-premultiply-alpha"&&Fx[s]||s}class kx{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const n=this.textures[t];this.textures[t]=null,this.ids[n.uid]=null}this.count=0}}class Ix{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new kx,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const Wp=[];let hu=0;function sd(){return hu>0?Wp[--hu]:new Ix}function ad(s){Wp[hu++]=s}let qs=0;const Zp=class fr{constructor(t={}){this.uid=Wt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],fr.defaultOptions.maxTextures=fr.defaultOptions.maxTextures??Kp(),t={...fr.defaultOptions,...t};const{maxTextures:n,attributesInitialSize:a,indicesInitialSize:r}=t;this.attributeBuffer=new ed(a*4),this.indexBuffer=new Uint16Array(r),this.maxTextures=n}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)ad(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,n){const a=t._batch.textures.ids[n._source.uid];return!a&&a!==0?!1:(t._textureId=a,t.texture=n,!0)}updateElement(t){this.dirty=!0;const n=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,n.float32View,n.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,n.float32View,n.uint32View,t._attributeStart,t._textureId)}break(t){const n=this._elements;if(!n[this.elementStart])return;let a=sd(),r=a.textures;r.clear();const o=n[this.elementStart];let c=id(o.blendMode,o.texture._source),h=o.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const d=this.attributeBuffer.float32View,m=this.attributeBuffer.uint32View,g=this.indexBuffer;let y=this._batchIndexSize,v=this._batchIndexStart,x="startBatch";const C=this.maxTextures;for(let E=this.elementStart;E<this.elementSize;++E){const S=n[E];n[E]=null;const R=S.texture._source,N=id(S.blendMode,R),P=c!==N||h!==S.topology;if(R._batchTick===qs&&!P){S._textureId=R._textureBindLocation,y+=S.indexSize,S.packAsQuad?(this.packQuadAttributes(S,d,m,S._attributeStart,S._textureId),this.packQuadIndex(g,S._indexStart,S._attributeStart/this.vertexSize)):(this.packAttributes(S,d,m,S._attributeStart,S._textureId),this.packIndex(S,g,S._indexStart,S._attributeStart/this.vertexSize)),S._batch=a;continue}R._batchTick=qs,(r.count>=C||P)&&(this._finishBatch(a,v,y-v,r,c,h,t,x),x="renderBatch",v=y,c=N,h=S.topology,a=sd(),r=a.textures,r.clear(),++qs),S._textureId=R._textureBindLocation=r.count,r.ids[R.uid]=r.count,r.textures[r.count++]=R,S._batch=a,y+=S.indexSize,S.packAsQuad?(this.packQuadAttributes(S,d,m,S._attributeStart,S._textureId),this.packQuadIndex(g,S._indexStart,S._attributeStart/this.vertexSize)):(this.packAttributes(S,d,m,S._attributeStart,S._textureId),this.packIndex(S,g,S._indexStart,S._attributeStart/this.vertexSize))}r.count>0&&(this._finishBatch(a,v,y-v,r,c,h,t,x),v=y,++qs),this.elementStart=this.elementSize,this._batchIndexStart=v,this._batchIndexSize=y}_finishBatch(t,n,a,r,o,c,h,d){t.gpuBindGroup=null,t.bindGroup=null,t.action=d,t.batcher=this,t.textures=r,t.blendMode=o,t.topology=c,t.start=n,t.size=a,++qs,this.batches[this.batchIndex++]=t,h.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const n=Math.max(t,this.attributeBuffer.size*2),a=new ed(n);nd(this.attributeBuffer.rawBinaryData,a.rawBinaryData),this.attributeBuffer=a}_resizeIndexBuffer(t){const n=this.indexBuffer;let a=Math.max(t,n.length*1.5);a+=a%2;const r=a>65535?new Uint32Array(a):new Uint16Array(a);if(r.BYTES_PER_ELEMENT!==n.BYTES_PER_ELEMENT)for(let o=0;o<n.length;o++)r[o]=n[o];else nd(n.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(t,n,a){t[n]=a+0,t[n+1]=a+1,t[n+2]=a+2,t[n+3]=a+0,t[n+4]=a+2,t[n+5]=a+3}packIndex(t,n,a,r){const o=t.indices,c=t.indexSize,h=t.indexOffset,d=t.attributeOffset;for(let m=0;m<c;m++)n[a++]=r+o[m+h]-d}destroy(){for(let t=0;t<this.batches.length;t++)ad(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};Zp.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Kx=Zp;var Se=(s=>(s[s.MAP_READ=1]="MAP_READ",s[s.MAP_WRITE=2]="MAP_WRITE",s[s.COPY_SRC=4]="COPY_SRC",s[s.COPY_DST=8]="COPY_DST",s[s.INDEX=16]="INDEX",s[s.VERTEX=32]="VERTEX",s[s.UNIFORM=64]="UNIFORM",s[s.STORAGE=128]="STORAGE",s[s.INDIRECT=256]="INDIRECT",s[s.QUERY_RESOLVE=512]="QUERY_RESOLVE",s[s.STATIC=1024]="STATIC",s))(Se||{});class ia extends nn{constructor(t){let{data:n,size:a}=t;const{usage:r,label:o,shrinkToFit:c}=t;super(),this.uid=Wt("buffer"),this._resourceType="buffer",this._resourceId=Wt("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,n instanceof Array&&(n=new Float32Array(n)),this._data=n,a??(a=n?.byteLength);const h=!!n;this.descriptor={size:a,usage:r,mappedAtCreation:h,label:o},this.shrinkToFit=c??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Se.STATIC)}set static(t){t?this.descriptor.usage|=Se.STATIC:this.descriptor.usage&=~Se.STATIC}setDataWithSize(t,n,a){if(this._updateID++,this._updateSize=n*t.BYTES_PER_ELEMENT,this._data===t){a&&this.emit("update",this);return}const r=this._data;if(this._data=t,this._dataInt32=null,!r||r.length!==t.length){!this.shrinkToFit&&r&&t.byteLength<r.byteLength?a&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=Wt("resource"),this.emit("change",this));return}a&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function Jp(s,t){if(!(s instanceof ia)){let n=t?Se.INDEX:Se.VERTEX;s instanceof Array&&(t?(s=new Uint32Array(s),n=Se.INDEX|Se.COPY_DST):(s=new Float32Array(s),n=Se.VERTEX|Se.COPY_DST)),s=new ia({data:s,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:n})}return s}function Qx(s,t,n){const a=s.getAttribute(t);if(!a)return n.minX=0,n.minY=0,n.maxX=0,n.maxY=0,n;const r=a.buffer.data;let o=1/0,c=1/0,h=-1/0,d=-1/0;const m=r.BYTES_PER_ELEMENT,g=(a.offset||0)/m,y=(a.stride||8)/m;for(let v=g;v<r.length;v+=y){const x=r[v],C=r[v+1];x>h&&(h=x),C>d&&(d=C),x<o&&(o=x),C<c&&(c=C)}return n.minX=o,n.minY=c,n.maxX=h,n.maxY=d,n}function Wx(s){return(s instanceof ia||Array.isArray(s)||s.BYTES_PER_ELEMENT)&&(s={buffer:s}),s.buffer=Jp(s.buffer,!1),s}class Zx extends nn{constructor(t={}){super(),this.uid=Wt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new en,this._boundsDirty=!0;const{attributes:n,indexBuffer:a,topology:r}=t;if(this.buffers=[],this.attributes={},n)for(const o in n)this.addAttribute(o,n[o]);this.instanceCount=t.instanceCount??1,a&&this.addIndex(a),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const n=this.attributes[t];return n.buffer.data.length/(n.stride/4||n.size)}return 0}addAttribute(t,n){const a=Wx(n);this.buffers.indexOf(a.buffer)===-1&&(this.buffers.push(a.buffer),a.buffer.on("update",this.onBufferUpdate,this),a.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=a}addIndex(t){this.indexBuffer=Jp(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,Qx(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(n=>n.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const Jx=new Float32Array(1),$x=new Uint32Array(1);class tv extends Zx{constructor(){const n=new ia({data:Jx,label:"attribute-batch-buffer",usage:Se.VERTEX|Se.COPY_DST,shrinkToFit:!1}),a=new ia({data:$x,label:"index-batch-buffer",usage:Se.INDEX|Se.COPY_DST,shrinkToFit:!1}),r=24;super({attributes:{aPosition:{buffer:n,format:"float32x2",stride:r,offset:0},aUV:{buffer:n,format:"float32x2",stride:r,offset:8},aColor:{buffer:n,format:"unorm8x4",stride:r,offset:16},aTextureIdAndRound:{buffer:n,format:"uint16x2",stride:r,offset:20}},indexBuffer:a})}}function rd(s,t,n){if(s)for(const a in s){const r=a.toLocaleLowerCase(),o=t[r];if(o){let c=s[a];a==="header"&&(c=c.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),n&&o.push(`//----${n}----//`),o.push(c)}else Ht(`${a} placement hook does not exist in shader`)}}const ev=/\{\{(.*?)\}\}/g;function ld(s){const t={};return(s.match(ev)?.map(a=>a.replace(/[{()}]/g,""))??[]).forEach(a=>{t[a]=[]}),t}function od(s,t){let n;const a=/@in\s+([^;]+);/g;for(;(n=a.exec(s))!==null;)t.push(n[1])}function ud(s,t,n=!1){const a=[];od(t,a),s.forEach(h=>{h.header&&od(h.header,a)});const r=a;n&&r.sort();const o=r.map((h,d)=>`       @location(${d}) ${h},`).join(`
`);let c=t.replace(/@in\s+[^;]+;\s*/g,"");return c=c.replace("{{in}}",`
${o}
`),c}function cd(s,t){let n;const a=/@out\s+([^;]+);/g;for(;(n=a.exec(s))!==null;)t.push(n[1])}function nv(s){const n=/\b(\w+)\s*:/g.exec(s);return n?n[1]:""}function iv(s){const t=/@.*?\s+/g;return s.replace(t,"")}function sv(s,t){const n=[];cd(t,n),s.forEach(d=>{d.header&&cd(d.header,n)});let a=0;const r=n.sort().map(d=>d.indexOf("builtin")>-1?d:`@location(${a++}) ${d}`).join(`,
`),o=n.sort().map(d=>`       var ${iv(d)};`).join(`
`),c=`return VSOutput(
            ${n.sort().map(d=>` ${nv(d)}`).join(`,
`)});`;let h=t.replace(/@out\s+[^;]+;\s*/g,"");return h=h.replace("{{struct}}",`
${r}
`),h=h.replace("{{start}}",`
${o}
`),h=h.replace("{{return}}",`
${c}
`),h}function hd(s,t){let n=s;for(const a in t){const r=t[a];r.join(`
`).length?n=n.replace(`{{${a}}}`,`//-----${a} START-----//
${r.join(`
`)}
//----${a} FINISH----//`):n=n.replace(`{{${a}}}`,"")}return n}const Zn=Object.create(null),Go=new Map;let av=0;function rv({template:s,bits:t}){const n=$p(s,t);if(Zn[n])return Zn[n];const{vertex:a,fragment:r}=ov(s,t);return Zn[n]=tm(a,r,t),Zn[n]}function lv({template:s,bits:t}){const n=$p(s,t);return Zn[n]||(Zn[n]=tm(s.vertex,s.fragment,t)),Zn[n]}function ov(s,t){const n=t.map(c=>c.vertex).filter(c=>!!c),a=t.map(c=>c.fragment).filter(c=>!!c);let r=ud(n,s.vertex,!0);r=sv(n,r);const o=ud(a,s.fragment,!0);return{vertex:r,fragment:o}}function $p(s,t){return t.map(n=>(Go.has(n)||Go.set(n,av++),Go.get(n))).sort((n,a)=>n-a).join("-")+s.vertex+s.fragment}function tm(s,t,n){const a=ld(s),r=ld(t);return n.forEach(o=>{rd(o.vertex,a,o.name),rd(o.fragment,r,o.name)}),{vertex:hd(s,a),fragment:hd(t,r)}}const uv=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,cv=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,hv=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,fv=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,dv={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},pv={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function mv({bits:s,name:t}){const n=rv({template:{fragment:cv,vertex:uv},bits:[dv,...s]});return aa.from({name:t,vertex:{source:n.vertex,entryPoint:"main"},fragment:{source:n.fragment,entryPoint:"main"}})}function gv({bits:s,name:t}){return new dn({name:t,...lv({template:{vertex:hv,fragment:fv},bits:[pv,...s]})})}const yv={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},xv={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Po={};function vv(s){const t=[];if(s===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let n=0;for(let a=0;a<s;a++)t.push(`@group(1) @binding(${n++}) var textureSource${a+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${n++}) var textureSampler${a+1}: sampler;`)}return t.join(`
`)}function _v(s){const t=[];if(s===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let n=0;n<s;n++)n===s-1?t.push("  default:{"):t.push(`  case ${n}:{`),t.push(`      outColor = textureSampleGrad(textureSource${n+1}, textureSampler${n+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function bv(s){return Po[s]||(Po[s]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${vv(s)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${_v(s)}
            `}}),Po[s]}const Ho={};function Sv(s){const t=[];for(let n=0;n<s;n++)n>0&&t.push("else"),n<s-1&&t.push(`if(vTextureId < ${n}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${n}], vUV);`),t.push("}");return t.join(`
`)}function Av(s){return Ho[s]||(Ho[s]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${s}];

            `,main:`

                ${Sv(s)}
            `}}),Ho[s]}const Cv={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Tv={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},fd={};function Mv(s){let t=fd[s];if(t)return t;const n=new Int32Array(s);for(let a=0;a<s;a++)n[a]=a;return t=fd[s]=new Pp({uTextures:{value:n,type:"i32",size:s}},{isStatic:!0}),t}class Ev extends Ar{constructor(t){const n=gv({name:"batch",bits:[xv,Av(t),Tv]}),a=mv({name:"batch",bits:[yv,bv(t),Cv]});super({glProgram:n,gpuProgram:a,resources:{batchSamplers:Mv(t)}})}}let dd=null;const em=class nm extends Kx{constructor(){super(...arguments),this.geometry=new tv,this.shader=dd||(dd=new Ev(this.maxTextures)),this.name=nm.extension.name,this.vertexSize=6}packAttributes(t,n,a,r,o){const c=o<<16|t.roundPixels&65535,h=t.transform,d=h.a,m=h.b,g=h.c,y=h.d,v=h.tx,x=h.ty,{positions:C,uvs:E}=t,S=t.color,w=t.attributeOffset,R=w+t.attributeSize;for(let N=w;N<R;N++){const P=N*2,X=C[P],V=C[P+1];n[r++]=d*X+g*V+v,n[r++]=y*V+m*X+x,n[r++]=E[P],n[r++]=E[P+1],a[r++]=S,a[r++]=c}}packQuadAttributes(t,n,a,r,o){const c=t.texture,h=t.transform,d=h.a,m=h.b,g=h.c,y=h.d,v=h.tx,x=h.ty,C=t.bounds,E=C.maxX,S=C.minX,w=C.maxY,R=C.minY,N=c.uvs,P=t.color,X=o<<16|t.roundPixels&65535;n[r+0]=d*S+g*R+v,n[r+1]=y*R+m*S+x,n[r+2]=N.x0,n[r+3]=N.y0,a[r+4]=P,a[r+5]=X,n[r+6]=d*E+g*R+v,n[r+7]=y*R+m*E+x,n[r+8]=N.x1,n[r+9]=N.y1,a[r+10]=P,a[r+11]=X,n[r+12]=d*E+g*w+v,n[r+13]=y*w+m*E+x,n[r+14]=N.x2,n[r+15]=N.y2,a[r+16]=P,a[r+17]=X,n[r+18]=d*S+g*w+v,n[r+19]=y*w+m*S+x,n[r+20]=N.x3,n[r+21]=N.y3,a[r+22]=P,a[r+23]=X}};em.extension={type:[nt.Batcher],name:"default"};let wv=em;function Rv(s,t,n,a,r,o,c,h=null){let d=0;n*=t,r*=o;const m=h.a,g=h.b,y=h.c,v=h.d,x=h.tx,C=h.ty;for(;d<c;){const E=s[n],S=s[n+1];a[r]=m*E+y*S+x,a[r+1]=g*E+v*S+C,r+=o,n+=t,d++}}function Bv(s,t,n,a){let r=0;for(t*=n;r<a;)s[t]=0,s[t+1]=0,t+=n,r++}function im(s,t,n,a,r){const o=t.a,c=t.b,h=t.c,d=t.d,m=t.tx,g=t.ty;n||(n=0),a||(a=2),r||(r=s.length/a-n);let y=n*a;for(let v=0;v<r;v++){const x=s[y],C=s[y+1];s[y]=o*x+h*C+m,s[y+1]=c*x+d*C+g,y+=a}}const zv=new mt;class sm{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,n=t>>16|t&65280|(t&255)<<16,a=this.renderable;return a?fp(n,a.groupColor)+(this.alpha*a.groupAlpha*255<<24):n+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||zv}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const sa={extension:{type:nt.ShapeBuilder,name:"circle"},build(s,t){let n,a,r,o,c,h;if(s.type==="circle"){const P=s;n=P.x,a=P.y,c=h=P.radius,r=o=0}else if(s.type==="ellipse"){const P=s;n=P.x,a=P.y,c=P.halfWidth,h=P.halfHeight,r=o=0}else{const P=s,X=P.width/2,V=P.height/2;n=P.x+X,a=P.y+V,c=h=Math.max(0,Math.min(P.radius,Math.min(X,V))),r=X-c,o=V-h}if(!(c>=0&&h>=0&&r>=0&&o>=0))return t;const d=Math.ceil(2.3*Math.sqrt(c+h)),m=d*8+(r?4:0)+(o?4:0);if(m===0)return t;if(d===0)return t[0]=t[6]=n+r,t[1]=t[3]=a+o,t[2]=t[4]=n-r,t[5]=t[7]=a-o,t;let g=0,y=d*4+(r?2:0)+2,v=y,x=m,C=r+c,E=o,S=n+C,w=n-C,R=a+E;if(t[g++]=S,t[g++]=R,t[--y]=R,t[--y]=w,o){const P=a-E;t[v++]=w,t[v++]=P,t[--x]=P,t[--x]=S}for(let P=1;P<d;P++){const X=Math.PI/2*(P/d),V=r+Math.cos(X)*c,Y=o+Math.sin(X)*h,it=n+V,$=n-V,I=a+Y,Q=a-Y;t[g++]=it,t[g++]=I,t[--y]=I,t[--y]=$,t[v++]=$,t[v++]=Q,t[--x]=Q,t[--x]=it}C=r,E=o+h,S=n+C,w=n-C,R=a+E;const N=a-E;return t[g++]=S,t[g++]=R,t[--x]=N,t[--x]=S,r&&(t[g++]=w,t[g++]=R,t[--x]=N,t[--x]=w),t},triangulate(s,t,n,a,r,o){if(s.length===0)return;let c=0,h=0;for(let g=0;g<s.length;g+=2)c+=s[g],h+=s[g+1];c/=s.length/2,h/=s.length/2;let d=a;t[d*n]=c,t[d*n+1]=h;const m=d++;for(let g=0;g<s.length;g+=2)t[d*n]=s[g],t[d*n+1]=s[g+1],g>0&&(r[o++]=d,r[o++]=m,r[o++]=d-1),d++;r[o++]=m+1,r[o++]=m,r[o++]=d-1}},Uv={...sa,extension:{...sa.extension,name:"ellipse"}},Nv={...sa,extension:{...sa.extension,name:"roundedRectangle"}},am=1e-4,pd=1e-4;function Ov(s){const t=s.length;if(t<6)return 1;let n=0;for(let a=0,r=s[t-2],o=s[t-1];a<t;a+=2){const c=s[a],h=s[a+1];n+=(c-r)*(h+o),r=c,o=h}return n<0?-1:1}function md(s,t,n,a,r,o,c,h){const d=s-n*r,m=t-a*r,g=s+n*o,y=t+a*o;let v,x;c?(v=a,x=-n):(v=-a,x=n);const C=d+v,E=m+x,S=g+v,w=y+x;return h.push(C,E),h.push(S,w),2}function bi(s,t,n,a,r,o,c,h){const d=n-s,m=a-t;let g=Math.atan2(d,m),y=Math.atan2(r-s,o-t);h&&g<y?g+=Math.PI*2:!h&&g>y&&(y+=Math.PI*2);let v=g;const x=y-g,C=Math.abs(x),E=Math.sqrt(d*d+m*m),S=(15*C*Math.sqrt(E)/Math.PI>>0)+1,w=x/S;if(v+=w,h){c.push(s,t),c.push(n,a);for(let R=1,N=v;R<S;R++,N+=w)c.push(s,t),c.push(s+Math.sin(N)*E,t+Math.cos(N)*E);c.push(s,t),c.push(r,o)}else{c.push(n,a),c.push(s,t);for(let R=1,N=v;R<S;R++,N+=w)c.push(s+Math.sin(N)*E,t+Math.cos(N)*E),c.push(s,t);c.push(r,o),c.push(s,t)}return S*2}function Dv(s,t,n,a,r,o){const c=am;if(s.length===0)return;const h=t;let d=h.alignment;if(t.alignment!==.5){let z=Ov(s);d=(d-.5)*z+.5}const m=new de(s[0],s[1]),g=new de(s[s.length-2],s[s.length-1]),y=a,v=Math.abs(m.x-g.x)<c&&Math.abs(m.y-g.y)<c;if(y){s=s.slice(),v&&(s.pop(),s.pop(),g.set(s[s.length-2],s[s.length-1]));const z=(m.x+g.x)*.5,D=(g.y+m.y)*.5;s.unshift(z,D),s.push(z,D)}const x=r,C=s.length/2;let E=s.length;const S=x.length/2,w=h.width/2,R=w*w,N=h.miterLimit*h.miterLimit;let P=s[0],X=s[1],V=s[2],Y=s[3],it=0,$=0,I=-(X-Y),Q=P-V,Tt=0,vt=0,Nt=Math.sqrt(I*I+Q*Q);I/=Nt,Q/=Nt,I*=w,Q*=w;const le=d,b=(1-le)*2,A=le*2;y||(h.cap==="round"?E+=bi(P-I*(b-A)*.5,X-Q*(b-A)*.5,P-I*b,X-Q*b,P+I*A,X+Q*A,x,!0)+2:h.cap==="square"&&(E+=md(P,X,I,Q,b,A,!0,x))),x.push(P-I*b,X-Q*b),x.push(P+I*A,X+Q*A);for(let z=1;z<C-1;++z){P=s[(z-1)*2],X=s[(z-1)*2+1],V=s[z*2],Y=s[z*2+1],it=s[(z+1)*2],$=s[(z+1)*2+1],I=-(X-Y),Q=P-V,Nt=Math.sqrt(I*I+Q*Q),I/=Nt,Q/=Nt,I*=w,Q*=w,Tt=-(Y-$),vt=V-it,Nt=Math.sqrt(Tt*Tt+vt*vt),Tt/=Nt,vt/=Nt,Tt*=w,vt*=w;const D=V-P,L=X-Y,j=V-it,k=$-Y,J=D*j+L*k,Z=L*j-k*D,_t=Z<0;if(Math.abs(Z)<.001*Math.abs(J)){x.push(V-I*b,Y-Q*b),x.push(V+I*A,Y+Q*A),J>=0&&(h.join==="round"?E+=bi(V,Y,V-I*b,Y-Q*b,V-Tt*b,Y-vt*b,x,!1)+4:E+=2,x.push(V-Tt*A,Y-vt*A),x.push(V+Tt*b,Y+vt*b));continue}const gt=(-I+P)*(-Q+Y)-(-I+V)*(-Q+X),ot=(-Tt+it)*(-vt+Y)-(-Tt+V)*(-vt+$),Dt=(D*ot-j*gt)/Z,yt=(k*gt-L*ot)/Z,pe=(Dt-V)*(Dt-V)+(yt-Y)*(yt-Y),Jt=V+(Dt-V)*b,oe=Y+(yt-Y)*b,me=V-(Dt-V)*A,rt=Y-(yt-Y)*A,dt=Math.min(D*D+L*L,j*j+k*k),Ke=_t?b:A,ra=dt+Ke*Ke*R;pe<=ra?h.join==="bevel"||pe/R>N?(_t?(x.push(Jt,oe),x.push(V+I*A,Y+Q*A),x.push(Jt,oe),x.push(V+Tt*A,Y+vt*A)):(x.push(V-I*b,Y-Q*b),x.push(me,rt),x.push(V-Tt*b,Y-vt*b),x.push(me,rt)),E+=2):h.join==="round"?_t?(x.push(Jt,oe),x.push(V+I*A,Y+Q*A),E+=bi(V,Y,V+I*A,Y+Q*A,V+Tt*A,Y+vt*A,x,!0)+4,x.push(Jt,oe),x.push(V+Tt*A,Y+vt*A)):(x.push(V-I*b,Y-Q*b),x.push(me,rt),E+=bi(V,Y,V-I*b,Y-Q*b,V-Tt*b,Y-vt*b,x,!1)+4,x.push(V-Tt*b,Y-vt*b),x.push(me,rt)):(x.push(Jt,oe),x.push(me,rt)):(x.push(V-I*b,Y-Q*b),x.push(V+I*A,Y+Q*A),h.join==="round"?_t?E+=bi(V,Y,V+I*A,Y+Q*A,V+Tt*A,Y+vt*A,x,!0)+2:E+=bi(V,Y,V-I*b,Y-Q*b,V-Tt*b,Y-vt*b,x,!1)+2:h.join==="miter"&&pe/R<=N&&(_t?(x.push(me,rt),x.push(me,rt)):(x.push(Jt,oe),x.push(Jt,oe)),E+=2),x.push(V-Tt*b,Y-vt*b),x.push(V+Tt*A,Y+vt*A),E+=2)}P=s[(C-2)*2],X=s[(C-2)*2+1],V=s[(C-1)*2],Y=s[(C-1)*2+1],I=-(X-Y),Q=P-V,Nt=Math.sqrt(I*I+Q*Q),I/=Nt,Q/=Nt,I*=w,Q*=w,x.push(V-I*b,Y-Q*b),x.push(V+I*A,Y+Q*A),y||(h.cap==="round"?E+=bi(V-I*(b-A)*.5,Y-Q*(b-A)*.5,V-I*b,Y-Q*b,V+I*A,Y+Q*A,x,!1)+2:h.cap==="square"&&(E+=md(V,Y,I,Q,b,A,!1,x)));const M=pd*pd;for(let z=S;z<E+S-2;++z)P=x[z*2],X=x[z*2+1],V=x[(z+1)*2],Y=x[(z+1)*2+1],it=x[(z+2)*2],$=x[(z+2)*2+1],!(Math.abs(P*(Y-$)+V*($-X)+it*(X-Y))<M)&&o.push(z,z+1,z+2)}function Gv(s,t,n,a){const r=am;if(s.length===0)return;const o=s[0],c=s[1],h=s[s.length-2],d=s[s.length-1],m=t||Math.abs(o-h)<r&&Math.abs(c-d)<r,g=n,y=s.length/2,v=g.length/2;for(let x=0;x<y;x++)g.push(s[x*2]),g.push(s[x*2+1]);for(let x=0;x<y-1;x++)a.push(v+x,v+x+1);m&&a.push(v+y-1,v)}function rm(s,t,n,a,r,o,c){const h=Cx(s,t,2);if(!h)return;for(let m=0;m<h.length;m+=3)o[c++]=h[m]+r,o[c++]=h[m+1]+r,o[c++]=h[m+2]+r;let d=r*a;for(let m=0;m<s.length;m+=2)n[d]=s[m],n[d+1]=s[m+1],d+=a}const Pv=[],Hv={extension:{type:nt.ShapeBuilder,name:"polygon"},build(s,t){for(let n=0;n<s.points.length;n++)t[n]=s.points[n];return t},triangulate(s,t,n,a,r,o){rm(s,Pv,t,n,a,r,o)}},Vv={extension:{type:nt.ShapeBuilder,name:"rectangle"},build(s,t){const n=s,a=n.x,r=n.y,o=n.width,c=n.height;return o>=0&&c>=0&&(t[0]=a,t[1]=r,t[2]=a+o,t[3]=r,t[4]=a+o,t[5]=r+c,t[6]=a,t[7]=r+c),t},triangulate(s,t,n,a,r,o){let c=0;a*=n,t[a+c]=s[0],t[a+c+1]=s[1],c+=n,t[a+c]=s[2],t[a+c+1]=s[3],c+=n,t[a+c]=s[6],t[a+c+1]=s[7],c+=n,t[a+c]=s[4],t[a+c+1]=s[5],c+=n;const h=a/n;r[o++]=h,r[o++]=h+1,r[o++]=h+2,r[o++]=h+1,r[o++]=h+3,r[o++]=h+2}},Lv={extension:{type:nt.ShapeBuilder,name:"triangle"},build(s,t){return t[0]=s.x,t[1]=s.y,t[2]=s.x2,t[3]=s.y2,t[4]=s.x3,t[5]=s.y3,t},triangulate(s,t,n,a,r,o){let c=0;a*=n,t[a+c]=s[0],t[a+c+1]=s[1],c+=n,t[a+c]=s[2],t[a+c+1]=s[3],c+=n,t[a+c]=s[4],t[a+c+1]=s[5];const h=a/n;r[o++]=h,r[o++]=h+1,r[o++]=h+2}},jv=new mt,Yv=new Qt;function Xv(s,t,n,a){const r=t.matrix?s.copyFrom(t.matrix).invert():s.identity();if(t.textureSpace==="local"){const o=n.getBounds(Yv);r.translate(-o.x,-o.y),r.scale(1/o.width,1/o.height)}else{r.translate(t.texture.frame.x,t.texture.frame.y),r.scale(1/t.texture.source.width,1/t.texture.source.height);const o=t.texture.source.style;o.addressMode==="clamp-to-edge"&&(o.addressMode="repeat",o.update())}return a&&r.append(jv.copyFrom(a).invert()),r}const Tr={};te.handleByMap(nt.ShapeBuilder,Tr);te.add(Vv,Hv,Lv,sa,Uv,Nv);const Fv=new Qt,qv=new mt;function kv(s,t){const{geometryData:n,batches:a}=t;a.length=0,n.indices.length=0,n.vertices.length=0,n.uvs.length=0;for(let r=0;r<s.instructions.length;r++){const o=s.instructions[r];if(o.action==="texture")Iv(o.data,a,n);else if(o.action==="fill"||o.action==="stroke"){const c=o.action==="stroke",h=o.data.path.shapePath,d=o.data.style,m=o.data.hole;c&&m&&gd(m.shapePath,d,!0,a,n),m&&(h.shapePrimitives[h.shapePrimitives.length-1].holes=m.shapePath.shapePrimitives),gd(h,d,c,a,n)}}}function Iv(s,t,n){const{vertices:a,uvs:r,indices:o}=n,c=o.length,h=a.length/2,d=[],m=Tr.rectangle,g=Fv,y=s.image;g.x=s.dx,g.y=s.dy,g.width=s.dw,g.height=s.dh;const v=s.transform;m.build(g,d),v&&im(d,v),m.triangulate(d,a,2,h,o,c);const x=y.uvs;r.push(x.x0,x.y0,x.x1,x.y1,x.x3,x.y3,x.x2,x.y2);const C=Rn.get(sm);C.indexOffset=c,C.indexSize=o.length-c,C.attributeOffset=h,C.attributeSize=a.length/2-h,C.baseColor=s.style,C.alpha=s.alpha,C.texture=y,C.geometryData=n,t.push(C)}function gd(s,t,n,a,r){const{vertices:o,uvs:c,indices:h}=r;s.shapePrimitives.forEach(({shape:d,transform:m,holes:g})=>{const y=h.length,v=o.length/2,x=[],C=Tr[d.type];let E="triangle-list";if(C.build(d,x),m&&im(x,m),n){const N=d.closePath??!0,P=t;P.pixelLine?(Gv(x,N,o,h),E="line-list"):Dv(x,P,!1,N,o,h)}else if(g){const N=[],P=x.slice();Kv(g).forEach(V=>{N.push(P.length/2),P.push(...V)}),rm(P,N,o,2,v,h,y)}else C.triangulate(x,o,2,v,h,y);const S=c.length/2,w=t.texture;if(w!==pt.WHITE){const N=Xv(qv,t,d,m);Rv(o,2,v,c,S,2,o.length/2-v,N)}else Bv(c,S,2,o.length/2-v);const R=Rn.get(sm);R.indexOffset=y,R.indexSize=h.length-y,R.attributeOffset=v,R.attributeSize=o.length/2-v,R.baseColor=t.color,R.alpha=t.alpha,R.texture=w,R.geometryData=r,R.topology=E,a.push(R)})}function Kv(s){const t=[];for(let n=0;n<s.length;n++){const a=s[n].shape,r=[];Tr[a.type].build(a,r),t.push(r)}return t}class Qv{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class Wv{constructor(){this.batcher=new wv,this.instructions=new gp}init(){this.instructions.reset()}get geometry(){return bt(r0,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const zu=class fu{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(t){fu.defaultOptions.bezierSmoothness=t?.bezierSmoothness??fu.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let n=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){n?this._cleanGraphicsContextData(t):n=this._initContext(t),kv(t,n);const a=t.batchMode;t.customShader||a==="no-batch"?n.isBatchable=!1:a==="auto"&&(n.isBatchable=n.geometryData.vertices.length<400),t.dirty=!1}return n}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const n=Rn.get(Wv),{batches:a,geometryData:r}=this._gpuContextHash[t.uid],o=r.vertices.length,c=r.indices.length;for(let g=0;g<a.length;g++)a[g].applyTransform=!1;const h=n.batcher;h.ensureAttributeBuffer(o),h.ensureIndexBuffer(c),h.begin();for(let g=0;g<a.length;g++){const y=a[g];h.add(y)}h.finish(n.instructions);const d=h.geometry;d.indexBuffer.setDataWithSize(h.indexBuffer,h.indexSize,!0),d.buffers[0].setDataWithSize(h.attributeBuffer.float32View,h.attributeSize,!0);const m=h.batches;for(let g=0;g<m.length;g++){const y=m[g];y.bindGroup=Yx(y.textures.textures,y.textures.count)}return this._graphicsDataContextHash[t.uid]=n,n}_initContext(t){const n=new Qv;return n.context=t,this._gpuContextHash[t.uid]=n,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const n=this._gpuContextHash[t.uid];n.isBatchable||this._graphicsDataContextHash[t.uid]&&(Rn.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),n.batches&&n.batches.forEach(a=>{Rn.return(a)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};zu.extension={type:[nt.WebGLSystem,nt.WebGPUSystem,nt.CanvasSystem],name:"graphicsContext"};zu.defaultOptions={bezierSmoothness:.5};let lm=zu;const Zv=8,rr=11920929e-14,Jv=1;function om(s,t,n,a,r,o,c,h,d,m){const y=Math.min(.99,Math.max(0,m??lm.defaultOptions.bezierSmoothness));let v=(Jv-y)/1;return v*=v,$v(t,n,a,r,o,c,h,d,s,v),s}function $v(s,t,n,a,r,o,c,h,d,m){du(s,t,n,a,r,o,c,h,d,m,0),d.push(c,h)}function du(s,t,n,a,r,o,c,h,d,m,g){if(g>Zv)return;const y=(s+n)/2,v=(t+a)/2,x=(n+r)/2,C=(a+o)/2,E=(r+c)/2,S=(o+h)/2,w=(y+x)/2,R=(v+C)/2,N=(x+E)/2,P=(C+S)/2,X=(w+N)/2,V=(R+P)/2;if(g>0){let Y=c-s,it=h-t;const $=Math.abs((n-c)*it-(a-h)*Y),I=Math.abs((r-c)*it-(o-h)*Y);if($>rr&&I>rr){if(($+I)*($+I)<=m*(Y*Y+it*it)){d.push(X,V);return}}else if($>rr){if($*$<=m*(Y*Y+it*it)){d.push(X,V);return}}else if(I>rr){if(I*I<=m*(Y*Y+it*it)){d.push(X,V);return}}else if(Y=X-(s+c)/2,it=V-(t+h)/2,Y*Y+it*it<=m){d.push(X,V);return}}du(s,t,y,v,w,R,X,V,d,m,g+1),du(X,V,N,P,E,S,c,h,d,m,g+1)}const t_=8,e_=11920929e-14,n_=1;function i_(s,t,n,a,r,o,c,h){const m=Math.min(.99,Math.max(0,h??lm.defaultOptions.bezierSmoothness));let g=(n_-m)/1;return g*=g,s_(t,n,a,r,o,c,s,g),s}function s_(s,t,n,a,r,o,c,h){pu(c,s,t,n,a,r,o,h,0),c.push(r,o)}function pu(s,t,n,a,r,o,c,h,d){if(d>t_)return;const m=(t+a)/2,g=(n+r)/2,y=(a+o)/2,v=(r+c)/2,x=(m+y)/2,C=(g+v)/2;let E=o-t,S=c-n;const w=Math.abs((a-o)*S-(r-c)*E);if(w>e_){if(w*w<=h*(E*E+S*S)){s.push(x,C);return}}else if(E=x-(t+o)/2,S=C-(n+c)/2,E*E+S*S<=h){s.push(x,C);return}pu(s,t,n,m,g,x,C,h,d+1),pu(s,x,C,y,v,o,c,h,d+1)}function um(s,t,n,a,r,o,c,h){let d=Math.abs(r-o);(!c&&r>o||c&&o>r)&&(d=2*Math.PI-d),h||(h=Math.max(6,Math.floor(6*Math.pow(a,1/3)*(d/Math.PI)))),h=Math.max(h,3);let m=d/h,g=r;m*=c?-1:1;for(let y=0;y<h+1;y++){const v=Math.cos(g),x=Math.sin(g),C=t+v*a,E=n+x*a;s.push(C,E),g+=m}}function a_(s,t,n,a,r,o){const c=s[s.length-2],d=s[s.length-1]-n,m=c-t,g=r-n,y=a-t,v=Math.abs(d*y-m*g);if(v<1e-8||o===0){(s[s.length-2]!==t||s[s.length-1]!==n)&&s.push(t,n);return}const x=d*d+m*m,C=g*g+y*y,E=d*g+m*y,S=o*Math.sqrt(x)/v,w=o*Math.sqrt(C)/v,R=S*E/x,N=w*E/C,P=S*y+w*m,X=S*g+w*d,V=m*(w+R),Y=d*(w+R),it=y*(S+N),$=g*(S+N),I=Math.atan2(Y-X,V-P),Q=Math.atan2($-X,it-P);um(s,P+t,X+n,o,I,Q,m*g>y*d)}const ea=Math.PI*2,Vo={centerX:0,centerY:0,ang1:0,ang2:0},Lo=({x:s,y:t},n,a,r,o,c,h,d)=>{s*=n,t*=a;const m=r*s-o*t,g=o*s+r*t;return d.x=m+c,d.y=g+h,d};function r_(s,t){const n=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),a=t===1.5707963267948966?.551915024494:n,r=Math.cos(s),o=Math.sin(s),c=Math.cos(s+t),h=Math.sin(s+t);return[{x:r-o*a,y:o+r*a},{x:c+h*a,y:h-c*a},{x:c,y:h}]}const yd=(s,t,n,a)=>{const r=s*a-t*n<0?-1:1;let o=s*n+t*a;return o>1&&(o=1),o<-1&&(o=-1),r*Math.acos(o)},l_=(s,t,n,a,r,o,c,h,d,m,g,y,v)=>{const x=Math.pow(r,2),C=Math.pow(o,2),E=Math.pow(g,2),S=Math.pow(y,2);let w=x*C-x*S-C*E;w<0&&(w=0),w/=x*S+C*E,w=Math.sqrt(w)*(c===h?-1:1);const R=w*r/o*y,N=w*-o/r*g,P=m*R-d*N+(s+n)/2,X=d*R+m*N+(t+a)/2,V=(g-R)/r,Y=(y-N)/o,it=(-g-R)/r,$=(-y-N)/o,I=yd(1,0,V,Y);let Q=yd(V,Y,it,$);h===0&&Q>0&&(Q-=ea),h===1&&Q<0&&(Q+=ea),v.centerX=P,v.centerY=X,v.ang1=I,v.ang2=Q};function o_(s,t,n,a,r,o,c,h=0,d=0,m=0){if(o===0||c===0)return;const g=Math.sin(h*ea/360),y=Math.cos(h*ea/360),v=y*(t-a)/2+g*(n-r)/2,x=-g*(t-a)/2+y*(n-r)/2;if(v===0&&x===0)return;o=Math.abs(o),c=Math.abs(c);const C=Math.pow(v,2)/Math.pow(o,2)+Math.pow(x,2)/Math.pow(c,2);C>1&&(o*=Math.sqrt(C),c*=Math.sqrt(C)),l_(t,n,a,r,o,c,d,m,g,y,v,x,Vo);let{ang1:E,ang2:S}=Vo;const{centerX:w,centerY:R}=Vo;let N=Math.abs(S)/(ea/4);Math.abs(1-N)<1e-7&&(N=1);const P=Math.max(Math.ceil(N),1);S/=P;let X=s[s.length-2],V=s[s.length-1];const Y={x:0,y:0};for(let it=0;it<P;it++){const $=r_(E,S),{x:I,y:Q}=Lo($[0],o,c,y,g,w,R,Y),{x:Tt,y:vt}=Lo($[1],o,c,y,g,w,R,Y),{x:Nt,y:le}=Lo($[2],o,c,y,g,w,R,Y);om(s,X,V,I,Q,Tt,vt,Nt,le),X=Nt,V=le,E+=S}}function u_(s,t,n){const a=(c,h)=>{const d=h.x-c.x,m=h.y-c.y,g=Math.sqrt(d*d+m*m),y=d/g,v=m/g;return{len:g,nx:y,ny:v}},r=(c,h)=>{c===0?s.moveTo(h.x,h.y):s.lineTo(h.x,h.y)};let o=t[t.length-1];for(let c=0;c<t.length;c++){const h=t[c%t.length],d=h.radius??n;if(d<=0){r(c,h),o=h;continue}const m=t[(c+1)%t.length],g=a(h,o),y=a(h,m);if(g.len<1e-4||y.len<1e-4){r(c,h),o=h;continue}let v=Math.asin(g.nx*y.ny-g.ny*y.nx),x=1,C=!1;g.nx*y.nx-g.ny*-y.ny<0?v<0?v=Math.PI+v:(v=Math.PI-v,x=-1,C=!0):v>0&&(x=-1,C=!0);const E=v/2;let S,w=Math.abs(Math.cos(E)*d/Math.sin(E));w>Math.min(g.len/2,y.len/2)?(w=Math.min(g.len/2,y.len/2),S=Math.abs(w*Math.sin(E)/Math.cos(E))):S=d;const R=h.x+y.nx*w+-y.ny*S*x,N=h.y+y.ny*w+y.nx*S*x,P=Math.atan2(g.ny,g.nx)+Math.PI/2*x,X=Math.atan2(y.ny,y.nx)-Math.PI/2*x;c===0&&s.moveTo(R+Math.cos(P)*S,N+Math.sin(P)*S),s.arc(R,N,S,P,X,C),o=h}}function c_(s,t,n,a){const r=(h,d)=>Math.sqrt((h.x-d.x)**2+(h.y-d.y)**2),o=(h,d,m)=>({x:h.x+(d.x-h.x)*m,y:h.y+(d.y-h.y)*m}),c=t.length;for(let h=0;h<c;h++){const d=t[(h+1)%c],m=d.radius??n;if(m<=0){h===0?s.moveTo(d.x,d.y):s.lineTo(d.x,d.y);continue}const g=t[h],y=t[(h+2)%c],v=r(g,d);let x;if(v<1e-4)x=d;else{const S=Math.min(v/2,m);x=o(d,g,S/v)}const C=r(y,d);let E;if(C<1e-4)E=d;else{const S=Math.min(C/2,m);E=o(d,y,S/C)}h===0?s.moveTo(x.x,x.y):s.lineTo(x.x,x.y),s.quadraticCurveTo(d.x,d.y,E.x,E.y,a)}}const h_=new Qt;class f_{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new en,this._graphicsPath2D=t,this.signed=t.checkForHoles}moveTo(t,n){return this.startPoly(t,n),this}lineTo(t,n){this._ensurePoly();const a=this._currentPoly.points,r=a[a.length-2],o=a[a.length-1];return(r!==t||o!==n)&&a.push(t,n),this}arc(t,n,a,r,o,c){this._ensurePoly(!1);const h=this._currentPoly.points;return um(h,t,n,a,r,o,c),this}arcTo(t,n,a,r,o){this._ensurePoly();const c=this._currentPoly.points;return a_(c,t,n,a,r,o),this}arcToSvg(t,n,a,r,o,c,h){const d=this._currentPoly.points;return o_(d,this._currentPoly.lastX,this._currentPoly.lastY,c,h,t,n,a,r,o),this}bezierCurveTo(t,n,a,r,o,c,h){this._ensurePoly();const d=this._currentPoly;return om(this._currentPoly.points,d.lastX,d.lastY,t,n,a,r,o,c,h),this}quadraticCurveTo(t,n,a,r,o){this._ensurePoly();const c=this._currentPoly;return i_(this._currentPoly.points,c.lastX,c.lastY,t,n,a,r,o),this}closePath(){return this.endPoly(!0),this}addPath(t,n){this.endPoly(),n&&!n.isIdentity()&&(t=t.clone(!0),t.transform(n));const a=this.shapePrimitives,r=a.length;for(let o=0;o<t.instructions.length;o++){const c=t.instructions[o];this[c.action](...c.data)}if(t.checkForHoles&&a.length-r>1){let o=null;for(let c=r;c<a.length;c++){const h=a[c];if(h.shape.type==="polygon"){const d=h.shape,m=o?.shape;m&&m.containsPolygon(d)?(o.holes||(o.holes=[]),o.holes.push(h),a.copyWithin(c,c+1),a.length--,c--):o=h}}}return this}finish(t=!1){this.endPoly(t)}rect(t,n,a,r,o){return this.drawShape(new Qt(t,n,a,r),o),this}circle(t,n,a,r){return this.drawShape(new wu(t,n,a),r),this}poly(t,n,a){const r=new ta(t);return r.closePath=n,this.drawShape(r,a),this}regularPoly(t,n,a,r,o=0,c){r=Math.max(r|0,3);const h=-1*Math.PI/2+o,d=Math.PI*2/r,m=[];for(let g=0;g<r;g++){const y=h-g*d;m.push(t+a*Math.cos(y),n+a*Math.sin(y))}return this.poly(m,!0,c),this}roundPoly(t,n,a,r,o,c=0,h){if(r=Math.max(r|0,3),o<=0)return this.regularPoly(t,n,a,r,c);const d=a*Math.sin(Math.PI/r)-.001;o=Math.min(o,d);const m=-1*Math.PI/2+c,g=Math.PI*2/r,y=(r-2)*Math.PI/r/2;for(let v=0;v<r;v++){const x=v*g+m,C=t+a*Math.cos(x),E=n+a*Math.sin(x),S=x+Math.PI+y,w=x-Math.PI-y,R=C+o*Math.cos(S),N=E+o*Math.sin(S),P=C+o*Math.cos(w),X=E+o*Math.sin(w);v===0?this.moveTo(R,N):this.lineTo(R,N),this.quadraticCurveTo(C,E,P,X,h)}return this.closePath()}roundShape(t,n,a=!1,r){return t.length<3?this:(a?c_(this,t,n,r):u_(this,t,n),this.closePath())}filletRect(t,n,a,r,o){if(o===0)return this.rect(t,n,a,r);const c=Math.min(a,r)/2,h=Math.min(c,Math.max(-c,o)),d=t+a,m=n+r,g=h<0?-h:0,y=Math.abs(h);return this.moveTo(t,n+y).arcTo(t+g,n+g,t+y,n,y).lineTo(d-y,n).arcTo(d-g,n+g,d,n+y,y).lineTo(d,m-y).arcTo(d-g,m-g,t+a-y,m,y).lineTo(t+y,m).arcTo(t+g,m-g,t,m-y,y).closePath()}chamferRect(t,n,a,r,o,c){if(o<=0)return this.rect(t,n,a,r);const h=Math.min(o,Math.min(a,r)/2),d=t+a,m=n+r,g=[t+h,n,d-h,n,d,n+h,d,m-h,d-h,m,t+h,m,t,m-h,t,n+h];for(let y=g.length-1;y>=2;y-=2)g[y]===g[y-2]&&g[y-1]===g[y-3]&&g.splice(y-1,2);return this.poly(g,!0,c)}ellipse(t,n,a,r,o){return this.drawShape(new Ru(t,n,a,r),o),this}roundRect(t,n,a,r,o,c){return this.drawShape(new Bu(t,n,a,r,o),c),this}drawShape(t,n){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:n}),this}startPoly(t,n){let a=this._currentPoly;return a&&this.endPoly(),a=new ta,a.points.push(t,n),this._currentPoly=a,this}endPoly(t=!1){const n=this._currentPoly;return n&&n.points.length>2&&(n.closePath=t,this.shapePrimitives.push({shape:n})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new ta,t)){const n=this.shapePrimitives[this.shapePrimitives.length-1];if(n){let a=n.shape.x,r=n.shape.y;if(n.transform&&!n.transform.isIdentity()){const o=n.transform,c=a;a=o.a*a+o.c*r+o.tx,r=o.b*c+o.d*r+o.ty}this._currentPoly.points.push(a,r)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let n=0;n<t.instructions.length;n++){const a=t.instructions[n];this[a.action](...a.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const n=this.shapePrimitives;for(let a=0;a<n.length;a++){const r=n[a],o=r.shape.getBounds(h_);r.transform?t.addRect(o,r.transform):t.addRect(o)}return t}}class os{constructor(t,n=!1){this.instructions=[],this.uid=Wt("graphicsPath"),this._dirty=!0,this.checkForHoles=n,typeof t=="string"?Dx(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new f_(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,n){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,n]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,n,a,r,o){const c=this.instructions[this.instructions.length-1],h=this.getLastPoint(de.shared);let d=0,m=0;if(!c||c.action!=="bezierCurveTo")d=h.x,m=h.y;else{d=c.data[2],m=c.data[3];const g=h.x,y=h.y;d=g+(g-d),m=y+(y-m)}return this.instructions.push({action:"bezierCurveTo",data:[d,m,t,n,a,r,o]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,n,a){const r=this.instructions[this.instructions.length-1],o=this.getLastPoint(de.shared);let c=0,h=0;if(!r||r.action!=="quadraticCurveTo")c=o.x,h=o.y;else{c=r.data[0],h=r.data[1];const d=o.x,m=o.y;c=d+(d-c),h=m+(m-h)}return this.instructions.push({action:"quadraticCurveTo",data:[c,h,t,n,a]}),this._dirty=!0,this}rect(t,n,a,r,o){return this.instructions.push({action:"rect",data:[t,n,a,r,o]}),this._dirty=!0,this}circle(t,n,a,r){return this.instructions.push({action:"circle",data:[t,n,a,r]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,n,a,r,o,c,h){o||(o=r/2);const d=-1*Math.PI/2+c,m=a*2,g=Math.PI*2/m,y=[];for(let v=0;v<m;v++){const x=v%2?o:r,C=v*g+d;y.push(t+x*Math.cos(C),n+x*Math.sin(C))}return this.poly(y,!0,h),this}clone(t=!1){const n=new os;if(n.checkForHoles=this.checkForHoles,!t)n.instructions=this.instructions.slice();else for(let a=0;a<this.instructions.length;a++){const r=this.instructions[a];n.instructions.push({action:r.action,data:r.data.slice()})}return n}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const n=t.a,a=t.b,r=t.c,o=t.d,c=t.tx,h=t.ty;let d=0,m=0,g=0,y=0,v=0,x=0,C=0,E=0;for(let S=0;S<this.instructions.length;S++){const w=this.instructions[S],R=w.data;switch(w.action){case"moveTo":case"lineTo":d=R[0],m=R[1],R[0]=n*d+r*m+c,R[1]=a*d+o*m+h;break;case"bezierCurveTo":g=R[0],y=R[1],v=R[2],x=R[3],d=R[4],m=R[5],R[0]=n*g+r*y+c,R[1]=a*g+o*y+h,R[2]=n*v+r*x+c,R[3]=a*v+o*x+h,R[4]=n*d+r*m+c,R[5]=a*d+o*m+h;break;case"quadraticCurveTo":g=R[0],y=R[1],d=R[2],m=R[3],R[0]=n*g+r*y+c,R[1]=a*g+o*y+h,R[2]=n*d+r*m+c,R[3]=a*d+o*m+h;break;case"arcToSvg":d=R[5],m=R[6],C=R[0],E=R[1],R[0]=n*C+r*E,R[1]=a*C+o*E,R[5]=n*d+r*m+c,R[6]=a*d+o*m+h;break;case"circle":R[4]=ks(R[3],t);break;case"rect":R[4]=ks(R[4],t);break;case"ellipse":R[8]=ks(R[8],t);break;case"roundRect":R[5]=ks(R[5],t);break;case"addPath":R[0].transform(t);break;case"poly":R[2]=ks(R[2],t);break;default:Ht("unknown transform action",w.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let n=this.instructions.length-1,a=this.instructions[n];if(!a)return t.x=0,t.y=0,t;for(;a.action==="closePath";){if(n--,n<0)return t.x=0,t.y=0,t;a=this.instructions[n]}switch(a.action){case"moveTo":case"lineTo":t.x=a.data[0],t.y=a.data[1];break;case"quadraticCurveTo":t.x=a.data[2],t.y=a.data[3];break;case"bezierCurveTo":t.x=a.data[4],t.y=a.data[5];break;case"arc":case"arcToSvg":t.x=a.data[5],t.y=a.data[6];break;case"addPath":a.data[0].getLastPoint(t);break}return t}}function ks(s,t){return s?s.prepend(t):t.clone()}function Yt(s,t,n){const a=s.getAttribute(t);return a?Number(a):n}function d_(s,t){const n=s.querySelectorAll("defs");for(let a=0;a<n.length;a++){const r=n[a];for(let o=0;o<r.children.length;o++){const c=r.children[o];switch(c.nodeName.toLowerCase()){case"lineargradient":t.defs[c.id]=p_(c);break;case"radialgradient":t.defs[c.id]=m_();break}}}}function p_(s){const t=Yt(s,"x1",0),n=Yt(s,"y1",0),a=Yt(s,"x2",1),r=Yt(s,"y2",0),o=s.getAttribute("gradientUnits")||"objectBoundingBox",c=new $n(t,n,a,r,o==="objectBoundingBox"?"local":"global");for(let h=0;h<s.children.length;h++){const d=s.children[h],m=Yt(d,"offset",0),g=Zt.shared.setValue(d.getAttribute("stop-color")).toNumber();c.addColorStop(m,g)}return c}function m_(s){return Ht("[SVG Parser] Radial gradients are not yet supported"),new $n(0,0,1,0)}function xd(s){const t=s.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return t?t[1]:""}const vd={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function cm(s,t){const n=s.getAttribute("style"),a={},r={},o={strokeStyle:a,fillStyle:r,useFill:!1,useStroke:!1};for(const c in vd){const h=s.getAttribute(c);h&&_d(t,o,c,h.trim())}if(n){const c=n.split(";");for(let h=0;h<c.length;h++){const d=c[h].trim(),[m,g]=d.split(":");vd[m]&&_d(t,o,m,g.trim())}}return{strokeStyle:o.useStroke?a:null,fillStyle:o.useFill?r:null,useFill:o.useFill,useStroke:o.useStroke}}function _d(s,t,n,a){switch(n){case"stroke":if(a!=="none"){if(a.startsWith("url(")){const r=xd(a);t.strokeStyle.fill=s.defs[r]}else t.strokeStyle.color=Zt.shared.setValue(a).toNumber();t.useStroke=!0}break;case"stroke-width":t.strokeStyle.width=Number(a);break;case"fill":if(a!=="none"){if(a.startsWith("url(")){const r=xd(a);t.fillStyle.fill=s.defs[r]}else t.fillStyle.color=Zt.shared.setValue(a).toNumber();t.useFill=!0}break;case"fill-opacity":t.fillStyle.alpha=Number(a);break;case"stroke-opacity":t.strokeStyle.alpha=Number(a);break;case"opacity":t.fillStyle.alpha=Number(a),t.strokeStyle.alpha=Number(a);break}}function g_(s,t){if(typeof s=="string"){const c=document.createElement("div");c.innerHTML=s.trim(),s=c.querySelector("svg")}const n={context:t,defs:{},path:new os};d_(s,n);const a=s.children,{fillStyle:r,strokeStyle:o}=cm(s,n);for(let c=0;c<a.length;c++){const h=a[c];h.nodeName.toLowerCase()!=="defs"&&hm(h,n,r,o)}return t}function hm(s,t,n,a){const r=s.children,{fillStyle:o,strokeStyle:c}=cm(s,t);o&&n?n={...n,...o}:o&&(n=o),c&&a?a={...a,...c}:c&&(a=c);const h=!n&&!a;h&&(n={color:0});let d,m,g,y,v,x,C,E,S,w,R,N,P,X,V,Y,it;switch(s.nodeName.toLowerCase()){case"path":X=s.getAttribute("d"),s.getAttribute("fill-rule")==="evenodd"&&Ht("SVG Evenodd fill rule not supported, your svg may render incorrectly"),V=new os(X,!0),t.context.path(V),n&&t.context.fill(n),a&&t.context.stroke(a);break;case"circle":C=Yt(s,"cx",0),E=Yt(s,"cy",0),S=Yt(s,"r",0),t.context.ellipse(C,E,S,S),n&&t.context.fill(n),a&&t.context.stroke(a);break;case"rect":d=Yt(s,"x",0),m=Yt(s,"y",0),Y=Yt(s,"width",0),it=Yt(s,"height",0),w=Yt(s,"rx",0),R=Yt(s,"ry",0),w||R?t.context.roundRect(d,m,Y,it,w||R):t.context.rect(d,m,Y,it),n&&t.context.fill(n),a&&t.context.stroke(a);break;case"ellipse":C=Yt(s,"cx",0),E=Yt(s,"cy",0),w=Yt(s,"rx",0),R=Yt(s,"ry",0),t.context.beginPath(),t.context.ellipse(C,E,w,R),n&&t.context.fill(n),a&&t.context.stroke(a);break;case"line":g=Yt(s,"x1",0),y=Yt(s,"y1",0),v=Yt(s,"x2",0),x=Yt(s,"y2",0),t.context.beginPath(),t.context.moveTo(g,y),t.context.lineTo(v,x),a&&t.context.stroke(a);break;case"polygon":P=s.getAttribute("points"),N=P.match(/\d+/g).map($=>parseInt($,10)),t.context.poly(N,!0),n&&t.context.fill(n),a&&t.context.stroke(a);break;case"polyline":P=s.getAttribute("points"),N=P.match(/\d+/g).map($=>parseInt($,10)),t.context.poly(N,!1),a&&t.context.stroke(a);break;case"g":case"svg":break;default:{Ht(`[SVG parser] <${s.nodeName}> elements unsupported`);break}}h&&(n=null);for(let $=0;$<r.length;$++)hm(r[$],t,n,a)}function y_(s){return Zt.isColorLike(s)}function bd(s){return s instanceof Cr}function Sd(s){return s instanceof $n}function x_(s){return s instanceof pt}function v_(s,t,n){const a=Zt.shared.setValue(t??0);return s.color=a.toNumber(),s.alpha=a.alpha===1?n.alpha:a.alpha,s.texture=pt.WHITE,{...n,...s}}function __(s,t,n){return s.texture=t,{...n,...s}}function Ad(s,t,n){return s.fill=t,s.color=16777215,s.texture=t.texture,s.matrix=t.transform,{...n,...s}}function Cd(s,t,n){return t.buildGradient(),s.fill=t,s.color=16777215,s.texture=t.texture,s.matrix=t.transform,s.textureSpace=t.textureSpace,{...n,...s}}function b_(s,t){const n={...t,...s},a=Zt.shared.setValue(n.color);return n.alpha*=a.alpha,n.color=a.toNumber(),n}function Mi(s,t){if(s==null)return null;const n={},a=s;return y_(s)?v_(n,s,t):x_(s)?__(n,s,t):bd(s)?Ad(n,s,t):Sd(s)?Cd(n,s,t):a.fill&&bd(a.fill)?Ad(a,a.fill,t):a.fill&&Sd(a.fill)?Cd(a,a.fill,t):b_(a,t)}function xr(s,t){const{width:n,alignment:a,miterLimit:r,cap:o,join:c,pixelLine:h,...d}=t,m=Mi(s,d);return m?{width:n,alignment:a,miterLimit:r,cap:o,join:c,pixelLine:h,...m}:null}const S_=new de,Td=new mt,Uu=class hn extends nn{constructor(){super(...arguments),this.uid=Wt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new os,this._transform=new mt,this._fillStyle={...hn.defaultFillStyle},this._strokeStyle={...hn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new en,this._boundsDirty=!0}clone(){const t=new hn;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=Mi(t,hn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=xr(t,hn.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=Mi(t,hn.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=Mi(t,hn.defaultStrokeStyle),this}texture(t,n,a,r,o,c){return this.instructions.push({action:"texture",data:{image:t,dx:a||0,dy:r||0,dw:o||t.frame.width,dh:c||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:n?Zt.shared.setValue(n).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new os,this}fill(t,n){let a;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="stroke"?a=r.data.path:a=this._activePath.clone(),a?(t!=null&&(n!==void 0&&typeof t=="number"&&(bt(Rt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:n}),this._fillStyle=Mi(t,hn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:a}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:n}=this._activePath.getLastPoint(de.shared);this._activePath.clear(),this._activePath.moveTo(t,n)}stroke(t){let n;const a=this.instructions[this.instructions.length-1];return this._tick===0&&a&&a.action==="fill"?n=a.data.path:n=this._activePath.clone(),n?(t!=null&&(this._strokeStyle=xr(t,hn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const n=this.instructions[this.instructions.length-1-t],a=this._activePath.clone();if(n&&(n.action==="stroke"||n.action==="fill"))if(n.data.hole)n.data.hole.addPath(a);else{n.data.hole=a;break}}return this._initNextPathLocation(),this}arc(t,n,a,r,o,c){this._tick++;const h=this._transform;return this._activePath.arc(h.a*t+h.c*n+h.tx,h.b*t+h.d*n+h.ty,a,r,o,c),this}arcTo(t,n,a,r,o){this._tick++;const c=this._transform;return this._activePath.arcTo(c.a*t+c.c*n+c.tx,c.b*t+c.d*n+c.ty,c.a*a+c.c*r+c.tx,c.b*a+c.d*r+c.ty,o),this}arcToSvg(t,n,a,r,o,c,h){this._tick++;const d=this._transform;return this._activePath.arcToSvg(t,n,a,r,o,d.a*c+d.c*h+d.tx,d.b*c+d.d*h+d.ty),this}bezierCurveTo(t,n,a,r,o,c,h){this._tick++;const d=this._transform;return this._activePath.bezierCurveTo(d.a*t+d.c*n+d.tx,d.b*t+d.d*n+d.ty,d.a*a+d.c*r+d.tx,d.b*a+d.d*r+d.ty,d.a*o+d.c*c+d.tx,d.b*o+d.d*c+d.ty,h),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,n,a,r){return this._tick++,this._activePath.ellipse(t,n,a,r,this._transform.clone()),this}circle(t,n,a){return this._tick++,this._activePath.circle(t,n,a,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,n){this._tick++;const a=this._transform;return this._activePath.lineTo(a.a*t+a.c*n+a.tx,a.b*t+a.d*n+a.ty),this}moveTo(t,n){this._tick++;const a=this._transform,r=this._activePath.instructions,o=a.a*t+a.c*n+a.tx,c=a.b*t+a.d*n+a.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=o,r[0].data[1]=c,this):(this._activePath.moveTo(o,c),this)}quadraticCurveTo(t,n,a,r,o){this._tick++;const c=this._transform;return this._activePath.quadraticCurveTo(c.a*t+c.c*n+c.tx,c.b*t+c.d*n+c.ty,c.a*a+c.c*r+c.tx,c.b*a+c.d*r+c.ty,o),this}rect(t,n,a,r){return this._tick++,this._activePath.rect(t,n,a,r,this._transform.clone()),this}roundRect(t,n,a,r,o){return this._tick++,this._activePath.roundRect(t,n,a,r,o,this._transform.clone()),this}poly(t,n){return this._tick++,this._activePath.poly(t,n,this._transform.clone()),this}regularPoly(t,n,a,r,o=0,c){return this._tick++,this._activePath.regularPoly(t,n,a,r,o,c),this}roundPoly(t,n,a,r,o,c){return this._tick++,this._activePath.roundPoly(t,n,a,r,o,c),this}roundShape(t,n,a,r){return this._tick++,this._activePath.roundShape(t,n,a,r),this}filletRect(t,n,a,r,o){return this._tick++,this._activePath.filletRect(t,n,a,r,o),this}chamferRect(t,n,a,r,o,c){return this._tick++,this._activePath.chamferRect(t,n,a,r,o,c),this}star(t,n,a,r,o=0,c=0){return this._tick++,this._activePath.star(t,n,a,r,o,c,this._transform.clone()),this}svg(t){return this._tick++,g_(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,n=t){return this._transform.scale(t,n),this}setTransform(t,n,a,r,o,c){return t instanceof mt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,n,a,r,o,c),this)}transform(t,n,a,r,o,c){return t instanceof mt?(this._transform.append(t),this):(Td.set(t,n,a,r,o,c),this._transform.append(Td),this)}translate(t,n=t){return this._transform.translate(t,n),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let n=0;n<this.instructions.length;n++){const a=this.instructions[n],r=a.action;if(r==="fill"){const o=a.data;t.addBounds(o.path.bounds)}else if(r==="texture"){const o=a.data;t.addFrame(o.dx,o.dy,o.dx+o.dw,o.dy+o.dh,o.transform)}if(r==="stroke"){const o=a.data,c=o.style.alignment,h=o.style.width*(1-c),d=o.path.bounds;t.addFrame(d.minX-h,d.minY-h,d.maxX+h,d.maxY+h)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;const n=this.instructions;let a=!1;for(let r=0;r<n.length;r++){const o=n[r],c=o.data,h=c.path;if(!o.action||!h)continue;const d=c.style,m=h.shapePath.shapePrimitives;for(let g=0;g<m.length;g++){const y=m[g].shape;if(!d||!y)continue;const v=m[g].transform,x=v?v.applyInverse(t,S_):t;if(o.action==="fill")a=y.contains(x.x,x.y);else{const E=d;a=y.strokeContains(x.x,x.y,E.width,E.alignment)}const C=c.hole;if(C){const E=C.shapePath?.shapePrimitives;if(E)for(let S=0;S<E.length;S++)E[S].shape.contains(x.x,x.y)&&(a=!1)}if(a)return!0}}return a}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const a=typeof t=="boolean"?t:t?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(a),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(a)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Uu.defaultFillStyle={color:16777215,alpha:1,texture:pt.WHITE,matrix:null,fill:null,textureSpace:"local"};Uu.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:pt.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let ke=Uu;const Md=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function A_(s){const t=[];let n=0;for(let a=0;a<Md.length;a++){const r=`_${Md[a]}`;t[n++]=s[r]}return n=fm(s._fill,t,n),n=C_(s._stroke,t,n),n=T_(s.dropShadow,t,n),t.join("-")}function fm(s,t,n){return s&&(t[n++]=s.color,t[n++]=s.alpha,t[n++]=s.fill?.styleKey),n}function C_(s,t,n){return s&&(n=fm(s,t,n),t[n++]=s.width,t[n++]=s.alignment,t[n++]=s.cap,t[n++]=s.join,t[n++]=s.miterLimit),n}function T_(s,t,n){return s&&(t[n++]=s.alpha,t[n++]=s.angle,t[n++]=s.blur,t[n++]=s.distance,t[n++]=Zt.shared.setValue(s.color).toNumber()),n}const Nu=class ns extends nn{constructor(t={}){super(),M_(t);const n={...ns.defaultTextStyle,...t};for(const a in n){const r=a;this[r]=n[a]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...ns.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...ns.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...ke.defaultFillStyle,...t},()=>{this._fill=Mi({...this._originalFill},ke.defaultFillStyle)})),this._fill=Mi(t===0?"black":t,ke.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...ke.defaultStrokeStyle,...t},()=>{this._stroke=xr({...this._originalStroke},ke.defaultStrokeStyle)})),this._stroke=xr(t,ke.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=A_(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const t=ns.defaultTextStyle;for(const n in t)this[n]=t[n]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new ns({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){if(this.removeAllListeners(),typeof t=="boolean"?t:t?.texture){const a=typeof t=="boolean"?t:t?.textureSource;this._fill?.texture&&this._fill.texture.destroy(a),this._originalFill?.texture&&this._originalFill.texture.destroy(a),this._stroke?.texture&&this._stroke.texture.destroy(a),this._originalStroke?.texture&&this._originalStroke.texture.destroy(a)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,n){return new Proxy(t,{set:(a,r,o)=>(a[r]=o,n?.(r,o),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(Zt.isColorLike(t)||t instanceof $n||t instanceof Cr)}};Nu.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Nu.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let ti=Nu;function M_(s){const t=s;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const n=ti.defaultDropShadow;s.dropShadow={alpha:t.dropShadowAlpha??n.alpha,angle:t.dropShadowAngle??n.angle,blur:t.dropShadowBlur??n.blur,color:t.dropShadowColor??n.color,distance:t.dropShadowDistance??n.distance}}if(t.strokeThickness!==void 0){bt(Rt,"strokeThickness is now a part of stroke");const n=t.stroke;let a={};if(Zt.isColorLike(n))a.color=n;else if(n instanceof $n||n instanceof Cr)a.fill=n;else if(Object.hasOwnProperty.call(n,"color")||Object.hasOwnProperty.call(n,"fill"))a=n;else throw new Error("Invalid stroke value.");s.stroke={...a,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){bt(Rt,"gradient fill is now a fill pattern: `new FillGradient(...)`");let n;s.fontSize==null?s.fontSize=ti.defaultTextStyle.fontSize:typeof s.fontSize=="string"?n=parseInt(s.fontSize,10):n=s.fontSize;const a=new $n({start:{x:0,y:0},end:{x:0,y:(n||0)*1.7}}),r=t.fillGradientStops.map(o=>Zt.shared.setValue(o).toNumber());r.forEach((o,c)=>{const h=c/(r.length-1);a.addColorStop(h,o)}),s.fill={fill:a}}}class E_{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,n){const a=Ft.get().createCanvas();a.width=t,a.height=n;const r=a.getContext("2d");return{canvas:a,context:r}}getOptimalCanvasAndContext(t,n,a=1){t=Math.ceil(t*a-1e-6),n=Math.ceil(n*a-1e-6),t=gr(t),n=gr(n);const r=(t<<17)+(n<<1);this._canvasPool[r]||(this._canvasPool[r]=[]);let o=this._canvasPool[r].pop();return o||(o=this._createCanvasAndContext(t,n)),o}returnCanvasAndContext(t){const n=t.canvas,{width:a,height:r}=n,o=(a<<17)+(r<<1);t.context.clearRect(0,0,a,r),this._canvasPool[o].push(t)}clear(){this._canvasPool={}}}const Ed=new E_,w_=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function mu(s){const t=typeof s.fontSize=="number"?`${s.fontSize}px`:s.fontSize;let n=s.fontFamily;Array.isArray(s.fontFamily)||(n=s.fontFamily.split(","));for(let a=n.length-1;a>=0;a--){let r=n[a].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!w_.includes(r)&&(r=`"${r}"`),n[a]=r}return`${s.fontStyle} ${s.fontVariant} ${s.fontWeight} ${t} ${n.join(",")}`}const jo={willReadFrequently:!0},sn=class tt{static get experimentalLetterSpacingSupported(){let t=tt._experimentalLetterSpacingSupported;if(t!==void 0){const n=Ft.get().getCanvasRenderingContext2D().prototype;t=tt._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return t}constructor(t,n,a,r,o,c,h,d,m){this.text=t,this.style=n,this.width=a,this.height=r,this.lines=o,this.lineWidths=c,this.lineHeight=h,this.maxLineWidth=d,this.fontProperties=m}static measureText(t=" ",n,a=tt._canvas,r=n.wordWrap){const o=`${t}:${n.styleKey}`;if(tt._measurementCache[o])return tt._measurementCache[o];const c=mu(n),h=tt.measureFont(c);h.fontSize===0&&(h.fontSize=n.fontSize,h.ascent=n.fontSize);const d=tt.__context;d.font=c;const g=(r?tt._wordWrap(t,n,a):t).split(/(?:\r\n|\r|\n)/),y=new Array(g.length);let v=0;for(let R=0;R<g.length;R++){const N=tt._measureText(g[R],n.letterSpacing,d);y[R]=N,v=Math.max(v,N)}const x=n._stroke?.width||0;let C=v+x;n.dropShadow&&(C+=n.dropShadow.distance);const E=n.lineHeight||h.fontSize;let S=Math.max(E,h.fontSize+x)+(g.length-1)*(E+n.leading);return n.dropShadow&&(S+=n.dropShadow.distance),new tt(t,n,C,S,g,y,E+n.leading,v,h)}static _measureText(t,n,a){let r=!1;tt.experimentalLetterSpacingSupported&&(tt.experimentalLetterSpacing?(a.letterSpacing=`${n}px`,a.textLetterSpacing=`${n}px`,r=!0):(a.letterSpacing="0px",a.textLetterSpacing="0px"));const o=a.measureText(t);let c=o.width;const h=-o.actualBoundingBoxLeft;let m=o.actualBoundingBoxRight-h;if(c>0)if(r)c-=n,m-=n;else{const g=(tt.graphemeSegmenter(t).length-1)*n;c+=g,m+=g}return Math.max(c,m)}static _wordWrap(t,n,a=tt._canvas){const r=a.getContext("2d",jo);let o=0,c="",h="";const d=Object.create(null),{letterSpacing:m,whiteSpace:g}=n,y=tt._collapseSpaces(g),v=tt._collapseNewlines(g);let x=!y;const C=n.wordWrapWidth+m,E=tt._tokenize(t);for(let S=0;S<E.length;S++){let w=E[S];if(tt._isNewline(w)){if(!v){h+=tt._addLine(c),x=!y,c="",o=0;continue}w=" "}if(y){const N=tt.isBreakingSpace(w),P=tt.isBreakingSpace(c[c.length-1]);if(N&&P)continue}const R=tt._getFromCache(w,m,d,r);if(R>C)if(c!==""&&(h+=tt._addLine(c),c="",o=0),tt.canBreakWords(w,n.breakWords)){const N=tt.wordWrapSplit(w);for(let P=0;P<N.length;P++){let X=N[P],V=X,Y=1;for(;N[P+Y];){const $=N[P+Y];if(!tt.canBreakChars(V,$,w,P,n.breakWords))X+=$;else break;V=$,Y++}P+=Y-1;const it=tt._getFromCache(X,m,d,r);it+o>C&&(h+=tt._addLine(c),x=!1,c="",o=0),c+=X,o+=it}}else{c.length>0&&(h+=tt._addLine(c),c="",o=0);const N=S===E.length-1;h+=tt._addLine(w,!N),x=!1,c="",o=0}else R+o>C&&(x=!1,h+=tt._addLine(c),c="",o=0),(c.length>0||!tt.isBreakingSpace(w)||x)&&(c+=w,o+=R)}return h+=tt._addLine(c,!1),h}static _addLine(t,n=!0){return t=tt._trimRight(t),t=n?`${t}
`:t,t}static _getFromCache(t,n,a,r){let o=a[t];return typeof o!="number"&&(o=tt._measureText(t,n,r)+n,a[t]=o),o}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let n=t.length-1;n>=0;n--){const a=t[n];if(!tt.isBreakingSpace(a))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:tt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,n){return typeof t!="string"?!1:tt._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const n=[];let a="";if(typeof t!="string")return n;for(let r=0;r<t.length;r++){const o=t[r],c=t[r+1];if(tt.isBreakingSpace(o,c)||tt._isNewline(o)){a!==""&&(n.push(a),a=""),n.push(o);continue}a+=o}return a!==""&&n.push(a),n}static canBreakWords(t,n){return n}static canBreakChars(t,n,a,r,o){return!0}static wordWrapSplit(t){return tt.graphemeSegmenter(t)}static measureFont(t){if(tt._fonts[t])return tt._fonts[t];const n=tt._context;n.font=t;const a=n.measureText(tt.METRICS_STRING+tt.BASELINE_SYMBOL),r={ascent:a.actualBoundingBoxAscent,descent:a.actualBoundingBoxDescent,fontSize:a.actualBoundingBoxAscent+a.actualBoundingBoxDescent};return tt._fonts[t]=r,r}static clearMetrics(t=""){t?delete tt._fonts[t]:tt._fonts={}}static get _canvas(){if(!tt.__canvas){let t;try{const n=new OffscreenCanvas(0,0);if(n.getContext("2d",jo)?.measureText)return tt.__canvas=n,n;t=Ft.get().createCanvas()}catch{t=Ft.get().createCanvas()}t.width=t.height=10,tt.__canvas=t}return tt.__canvas}static get _context(){return tt.__context||(tt.__context=tt._canvas.getContext("2d",jo)),tt.__context}};sn.METRICS_STRING="|ÉqÅ";sn.BASELINE_SYMBOL="M";sn.BASELINE_MULTIPLIER=1.4;sn.HEIGHT_MULTIPLIER=2;sn.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const s=new Intl.Segmenter;return t=>[...s.segment(t)].map(n=>n.segment)}return s=>[...s]})();sn.experimentalLetterSpacing=!1;sn._fonts={};sn._newlines=[10,13];sn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];sn._measurementCache={};let wd=sn;const Rd=1e5;function Bd(s,t,n,a=0){if(s.texture===pt.WHITE&&!s.fill)return Zt.shared.setValue(s.color).setAlpha(s.alpha??1).toHexa();if(s.fill){if(s.fill instanceof Cr){const r=s.fill,o=t.createPattern(r.texture.source.resource,"repeat"),c=r.transform.copyTo(mt.shared);return c.scale(r.texture.frame.width,r.texture.frame.height),o.setTransform(c),o}else if(s.fill instanceof $n){const r=s.fill,o=r.type==="linear",c=r.textureSpace==="local";let h=1,d=1;c&&n&&(h=n.width+a,d=n.height+a);let m,g=!1;if(o){const{start:y,end:v}=r;m=t.createLinearGradient(y.x*h,y.y*d,v.x*h,v.y*d),g=Math.abs(v.x-y.x)<Math.abs((v.y-y.y)*.1)}else{const{center:y,innerRadius:v,outerCenter:x,outerRadius:C}=r;m=t.createRadialGradient(y.x*h,y.y*d,v*h,x.x*h,x.y*d,C*h)}if(g&&c&&n){const y=n.lineHeight/d;for(let v=0;v<n.lines.length;v++){const x=(v*n.lineHeight+a/2)/d;r.colorStops.forEach(C=>{const E=x+C.offset*y;m.addColorStop(Math.floor(E*Rd)/Rd,Zt.shared.setValue(C.color).toHex())})}}else r.colorStops.forEach(y=>{m.addColorStop(y.offset,Zt.shared.setValue(y.color).toHex())});return m}}else{const r=t.createPattern(s.texture.source.resource,"repeat"),o=s.matrix.copyTo(mt.shared);return o.scale(s.texture.frame.width,s.texture.frame.height),r.setTransform(o),r}return Ht("FillStyle not recognised",s),"red"}function dm(s){if(s==="")return[];typeof s=="string"&&(s=[s]);const t=[];for(let n=0,a=s.length;n<a;n++){const r=s[n];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(r[0].length===0||r[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const o=r[0].charCodeAt(0),c=r[1].charCodeAt(0);if(c<o)throw new Error("[BitmapFont]: Invalid character range.");for(let h=o,d=c;h<=d;h++)t.push(String.fromCharCode(h))}else t.push(...Array.from(r))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const pm=class mm extends Ip{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const n={...mm.defaultOptions,...t};this._textureSize=n.textureSize,this._mipmap=n.mipmap;const a=n.style.clone();n.overrideFill&&(a._fill.color=16777215,a._fill.alpha=1,a._fill.texture=pt.WHITE,a._fill.fill=null),this.applyFillAsTint=n.overrideFill;const r=a.fontSize;a.fontSize=this.baseMeasurementFontSize;const o=mu(a);n.overrideSize?a._stroke&&(a._stroke.width*=this.baseRenderedFontSize/r):a.fontSize=this.baseRenderedFontSize=r,this._style=a,this._skipKerning=n.skipKerning??!1,this.resolution=n.resolution??1,this._padding=n.padding??4,this.fontMetrics=wd.measureFont(o),this.lineHeight=a.lineHeight||this.fontMetrics.fontSize||a.fontSize}ensureCharacters(t){const n=dm(t).filter(S=>!this._currentChars.includes(S)).filter((S,w,R)=>R.indexOf(S)===w);if(!n.length)return;this._currentChars=[...this._currentChars,...n];let a;this._currentPageIndex===-1?a=this._nextPage():a=this.pages[this._currentPageIndex];let{canvas:r,context:o}=a.canvasAndContext,c=a.texture.source;const h=this._style;let d=this._currentX,m=this._currentY;const g=this.baseRenderedFontSize/this.baseMeasurementFontSize,y=this._padding*g;let v=0,x=!1;const C=r.width/this.resolution,E=r.height/this.resolution;for(let S=0;S<n.length;S++){const w=n[S],R=wd.measureText(w,h,r,!1);R.lineHeight=R.height;const N=R.width*g,P=Math.ceil((h.fontStyle==="italic"?2:1)*N),X=R.height*g,V=P+y*2,Y=X+y*2;if(x=!1,w!==`
`&&w!=="\r"&&w!=="	"&&w!==" "&&(x=!0,v=Math.ceil(Math.max(Y,v))),d+V>C&&(m+=v,v=Y,d=0,m+v>E)){c.update();const $=this._nextPage();r=$.canvasAndContext.canvas,o=$.canvasAndContext.context,c=$.texture.source,m=0}const it=N/g-(h.dropShadow?.distance??0)-(h._stroke?.width??0);if(this.chars[w]={id:w.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:it,kerning:{}},x){this._drawGlyph(o,R,d+y,m+y,g,h);const $=c.width*g,I=c.height*g,Q=new Qt(d/$*c.width,m/I*c.height,V/$*c.width,Y/I*c.height);this.chars[w].texture=new pt({source:c,frame:Q}),d+=Math.ceil(V)}}c.update(),this._currentX=d,this._currentY=m,this._skipKerning&&this._applyKerning(n,o)}get pageTextures(){return bt(Rt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,n){const a=this._measureCache;for(let r=0;r<t.length;r++){const o=t[r];for(let c=0;c<this._currentChars.length;c++){const h=this._currentChars[c];let d=a[o];d||(d=a[o]=n.measureText(o).width);let m=a[h];m||(m=a[h]=n.measureText(h).width);let g=n.measureText(o+h).width,y=g-(d+m);y&&(this.chars[o].kerning[h]=y),g=n.measureText(o+h).width,y=g-(d+m),y&&(this.chars[h].kerning[o]=y)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,n=Ed.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(n.context,this._style,t);const a=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),r=new pt({source:new Ei({resource:n.canvas,resolution:a,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),o={canvasAndContext:n,texture:r};return this.pages[this._currentPageIndex]=o,o}_setupContext(t,n,a){n.fontSize=this.baseRenderedFontSize,t.scale(a,a),t.font=mu(n),n.fontSize=this.baseMeasurementFontSize,t.textBaseline=n.textBaseline;const r=n._stroke,o=r?.width??0;if(r&&(t.lineWidth=o,t.lineJoin=r.join,t.miterLimit=r.miterLimit,t.strokeStyle=Bd(r,t)),n._fill&&(t.fillStyle=Bd(n._fill,t)),n.dropShadow){const c=n.dropShadow,h=Zt.shared.setValue(c.color).toArray(),d=c.blur*a,m=c.distance*a;t.shadowColor=`rgba(${h[0]*255},${h[1]*255},${h[2]*255},${c.alpha})`,t.shadowBlur=d,t.shadowOffsetX=Math.cos(c.angle)*m,t.shadowOffsetY=Math.sin(c.angle)*m}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,n,a,r,o,c){const h=n.text,d=n.fontProperties,g=(c._stroke?.width??0)*o,y=a+g/2,v=r-g/2,x=d.descent*o,C=n.lineHeight*o;c.stroke&&g&&t.strokeText(h,y,v+C-x),c._fill&&t.fillText(h,y,v+C-x)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:n,texture:a}=this.pages[t];Ed.returnCanvasAndContext(n),a.destroy(!0)}this.pages=null}};pm.defaultOptions={textureSize:512,style:new ti,mipmap:!0};let zd=pm;function R_(s,t,n,a){const r={width:0,height:0,offsetY:0,scale:t.fontSize/n.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};r.offsetY=n.baseLineOffset;let o=r.lines[0],c=null,h=!0;const d={width:0,start:0,index:0,positions:[],chars:[]},m=C=>{const E=o.width;for(let S=0;S<d.index;S++){const w=C.positions[S];o.chars.push(C.chars[S]),o.charPositions.push(w+E)}o.width+=C.width,h=!1,d.width=0,d.index=0,d.chars.length=0},g=()=>{let C=o.chars.length-1;if(a){let E=o.chars[C];for(;E===" ";)o.width-=n.chars[E].xAdvance,E=o.chars[--C]}r.width=Math.max(r.width,o.width),o={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},h=!0,r.lines.push(o),r.height+=n.lineHeight},y=n.baseMeasurementFontSize/t.fontSize,v=t.letterSpacing*y,x=t.wordWrapWidth*y;for(let C=0;C<s.length+1;C++){let E;const S=C===s.length;S||(E=s[C]);const w=n.chars[E]||n.chars[" "];if(/(?:\s)/.test(E)||E==="\r"||E===`
`||S){if(!h&&t.wordWrap&&o.width+d.width-v>x?(g(),m(d),S||o.charPositions.push(0)):(d.start=o.width,m(d),S||o.charPositions.push(0)),E==="\r"||E===`
`)o.width!==0&&g();else if(!S){const X=w.xAdvance+(w.kerning[c]||0)+v;o.width+=X,o.spaceWidth=X,o.spacesIndex.push(o.charPositions.length),o.chars.push(E)}}else{const P=w.kerning[c]||0,X=w.xAdvance+P+v;d.positions[d.index++]=d.width+P,d.chars.push(E),d.width+=X}c=E}return g(),t.align==="center"?B_(r):t.align==="right"?z_(r):t.align==="justify"&&U_(r),r}function B_(s){for(let t=0;t<s.lines.length;t++){const n=s.lines[t],a=s.width/2-n.width/2;for(let r=0;r<n.charPositions.length;r++)n.charPositions[r]+=a}}function z_(s){for(let t=0;t<s.lines.length;t++){const n=s.lines[t],a=s.width-n.width;for(let r=0;r<n.charPositions.length;r++)n.charPositions[r]+=a}}function U_(s){const t=s.width;for(let n=0;n<s.lines.length;n++){const a=s.lines[n];let r=0,o=a.spacesIndex[r++],c=0;const h=a.spacesIndex.length,m=(t-a.width)/h;for(let g=0;g<a.charPositions.length;g++)g===o&&(o=a.spacesIndex[r++],c+=m),a.charPositions[g]+=c}}let lr=0;class N_{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,n){let a=`${n.fontFamily}-bitmap`,r=!0;if(n._fill.fill&&!n._stroke)a+=n._fill.fill.styleKey,r=!1;else if(n._stroke||n.dropShadow){let c=n.styleKey;c=c.substring(0,c.lastIndexOf("-")),a=`${c}-bitmap`,r=!1}if(!Xt.has(a)){const c=new zd({style:n,overrideFill:r,overrideSize:!0,...this.defaultOptions});lr++,lr>50&&Ht("BitmapText",`You have dynamically created ${lr} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),c.once("destroy",()=>{lr--,Xt.remove(a)}),Xt.set(a,c)}const o=Xt.get(a);return o.ensureCharacters?.(t),o}getLayout(t,n,a=!0){const r=this.getFont(t,n);return R_([...t],n,r,a)}measureText(t,n,a=!0){return this.getLayout(t,n,a)}install(...t){let n=t[0];typeof n=="string"&&(n={name:n,style:t[1],chars:t[2]?.chars,resolution:t[2]?.resolution,padding:t[2]?.padding,skipKerning:t[2]?.skipKerning},bt(Rt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const a=n?.name;if(!a)throw new Error("[BitmapFontManager] Property `name` is required.");n={...this.defaultOptions,...n};const r=n.style,o=r instanceof ti?r:new ti(r),c=o._fill.fill!==null&&o._fill.fill!==void 0,h=new zd({style:o,overrideFill:c,skipKerning:n.skipKerning,padding:n.padding,resolution:n.resolution,overrideSize:!1}),d=dm(n.chars);return h.ensureCharacters(d.join("")),Xt.set(`${a}-bitmap`,h),h.once("destroy",()=>Xt.remove(`${a}-bitmap`)),h}uninstall(t){const n=`${t}-bitmap`,a=Xt.get(n);a&&a.destroy()}}const Ud=new N_;class gm extends Ip{constructor(t,n){super();const{textures:a,data:r}=t;Object.keys(r.pages).forEach(o=>{const c=r.pages[parseInt(o,10)],h=a[c.id];this.pages.push({texture:h})}),Object.keys(r.chars).forEach(o=>{const c=r.chars[o],{frame:h,source:d}=a[c.page],m=new Qt(c.x+h.x,c.y+h.y,c.width,c.height),g=new pt({source:d,frame:m});this.chars[o]={id:o.codePointAt(0),xOffset:c.xOffset,yOffset:c.yOffset,xAdvance:c.xAdvance,kerning:c.kerning??{},texture:g}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:"none",range:0},this.url=n}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:n}=this.pages[t];n.destroy(!0)}this.pages=null}static install(t){Ud.install(t)}static uninstall(t){Ud.uninstall(t)}}const Yo={test(s){return typeof s=="string"&&s.startsWith("info face=")},parse(s){const t=s.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const y in t){const v=t[y].match(/^[a-z]+/gm)[0],x=t[y].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),C={};for(const E in x){const S=x[E].split("="),w=S[0],R=S[1].replace(/"/gm,""),N=parseFloat(R),P=isNaN(N)?R:N;C[w]=P}n[v].push(C)}const a={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[r]=n.info,[o]=n.common,[c]=n.distanceField??[];c&&(a.distanceField={range:parseInt(c.distanceRange,10),type:c.fieldType}),a.fontSize=parseInt(r.size,10),a.fontFamily=r.face,a.lineHeight=parseInt(o.lineHeight,10);const h=n.page;for(let y=0;y<h.length;y++)a.pages.push({id:parseInt(h[y].id,10)||0,file:h[y].file});const d={};a.baseLineOffset=a.lineHeight-parseInt(o.base,10);const m=n.char;for(let y=0;y<m.length;y++){const v=m[y],x=parseInt(v.id,10);let C=v.letter??v.char??String.fromCharCode(x);C==="space"&&(C=" "),d[x]=C,a.chars[C]={id:x,page:parseInt(v.page,10)||0,x:parseInt(v.x,10),y:parseInt(v.y,10),width:parseInt(v.width,10),height:parseInt(v.height,10),xOffset:parseInt(v.xoffset,10),yOffset:parseInt(v.yoffset,10),xAdvance:parseInt(v.xadvance,10),kerning:{}}}const g=n.kerning||[];for(let y=0;y<g.length;y++){const v=parseInt(g[y].first,10),x=parseInt(g[y].second,10),C=parseInt(g[y].amount,10);a.chars[d[x]].kerning[d[v]]=C}return a}},Nd={test(s){const t=s;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(s){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},n=s.getElementsByTagName("info")[0],a=s.getElementsByTagName("common")[0],r=s.getElementsByTagName("distanceField")[0];r&&(t.distanceField={type:r.getAttribute("fieldType"),range:parseInt(r.getAttribute("distanceRange"),10)});const o=s.getElementsByTagName("page"),c=s.getElementsByTagName("char"),h=s.getElementsByTagName("kerning");t.fontSize=parseInt(n.getAttribute("size"),10),t.fontFamily=n.getAttribute("face"),t.lineHeight=parseInt(a.getAttribute("lineHeight"),10);for(let m=0;m<o.length;m++)t.pages.push({id:parseInt(o[m].getAttribute("id"),10)||0,file:o[m].getAttribute("file")});const d={};t.baseLineOffset=t.lineHeight-parseInt(a.getAttribute("base"),10);for(let m=0;m<c.length;m++){const g=c[m],y=parseInt(g.getAttribute("id"),10);let v=g.getAttribute("letter")??g.getAttribute("char")??String.fromCharCode(y);v==="space"&&(v=" "),d[y]=v,t.chars[v]={id:y,page:parseInt(g.getAttribute("page"),10)||0,x:parseInt(g.getAttribute("x"),10),y:parseInt(g.getAttribute("y"),10),width:parseInt(g.getAttribute("width"),10),height:parseInt(g.getAttribute("height"),10),xOffset:parseInt(g.getAttribute("xoffset"),10),yOffset:parseInt(g.getAttribute("yoffset"),10),xAdvance:parseInt(g.getAttribute("xadvance"),10),kerning:{}}}for(let m=0;m<h.length;m++){const g=parseInt(h[m].getAttribute("first"),10),y=parseInt(h[m].getAttribute("second"),10),v=parseInt(h[m].getAttribute("amount"),10);t.chars[d[y]].kerning[d[g]]=v}return t}},Od={test(s){return typeof s=="string"&&s.includes("<font>")?Nd.test(Ft.get().parseXML(s)):!1},parse(s){return Nd.parse(Ft.get().parseXML(s))}},O_=[".xml",".fnt"],D_={extension:{type:nt.CacheParser,name:"cacheBitmapFont"},test:s=>s instanceof gm,getCacheableAssets(s,t){const n={};return s.forEach(a=>{n[a]=t,n[`${a}-bitmap`]=t}),n[`${t.fontFamily}-bitmap`]=t,n}},G_={extension:{type:nt.LoadParser,priority:ni.Normal},name:"loadBitmapFont",test(s){return O_.includes(Ge.extname(s).toLowerCase())},async testParse(s){return Yo.test(s)||Od.test(s)},async parse(s,t,n){const a=Yo.test(s)?Yo.parse(s):Od.parse(s),{src:r}=t,{pages:o}=a,c=[],h=a.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let y=0;y<o.length;++y){const v=o[y].file;let x=Ge.join(Ge.dirname(r),v);x=iu(x,r),c.push({src:x,data:h})}const d=await n.load(c),m=c.map(y=>d[y.src]);return new gm({data:a,textures:m},r)},async load(s,t){return await(await Ft.get().fetch(s)).text()},async unload(s,t,n){await Promise.all(s.pages.map(a=>n.unload(a.texture.source._sourceOrigin))),s.destroy()}};class P_{constructor(t,n=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(t){t.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let a=0;a<n;a++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const H_={extension:{type:nt.CacheParser,name:"cacheTextureArray"},test:s=>Array.isArray(s)&&s.every(t=>t instanceof pt),getCacheableAssets:(s,t)=>{const n={};return s.forEach(a=>{t.forEach((r,o)=>{n[a+(o===0?"":o+1)]=r})}),n}};async function ym(s){if("Image"in globalThis)return new Promise(t=>{const n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=s});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(s)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const V_={extension:{type:nt.DetectionParser,priority:1},test:async()=>ym("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async s=>[...s,"avif"],remove:async s=>s.filter(t=>t!=="avif")},Dd=["png","jpg","jpeg"],L_={extension:{type:nt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async s=>[...s,...Dd],remove:async s=>s.filter(t=>!Dd.includes(t))},j_="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Ou(s){return j_?!1:document.createElement("video").canPlayType(s)!==""}const Y_={extension:{type:nt.DetectionParser,priority:0},test:async()=>Ou("video/mp4"),add:async s=>[...s,"mp4","m4v"],remove:async s=>s.filter(t=>t!=="mp4"&&t!=="m4v")},X_={extension:{type:nt.DetectionParser,priority:0},test:async()=>Ou("video/ogg"),add:async s=>[...s,"ogv"],remove:async s=>s.filter(t=>t!=="ogv")},F_={extension:{type:nt.DetectionParser,priority:0},test:async()=>Ou("video/webm"),add:async s=>[...s,"webm"],remove:async s=>s.filter(t=>t!=="webm")},q_={extension:{type:nt.DetectionParser,priority:0},test:async()=>ym("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async s=>[...s,"webp"],remove:async s=>s.filter(t=>t!=="webp")};class k_{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,n,a)=>(this._parsersValidated=!1,t[n]=a,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,n){const a={promise:null,parser:null};return a.promise=(async()=>{let r=null,o=null;if(n.loadParser&&(o=this._parserHash[n.loadParser],o||Ht(`[Assets] specified load parser "${n.loadParser}" not found while loading ${t}`)),!o){for(let c=0;c<this.parsers.length;c++){const h=this.parsers[c];if(h.load&&h.test?.(t,n,this)){o=h;break}}if(!o)return Ht(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await o.load(t,n,this),a.parser=o;for(let c=0;c<this.parsers.length;c++){const h=this.parsers[c];h.parse&&h.parse&&await h.testParse?.(r,n,this)&&(r=await h.parse(r,n,this)||r,a.parser=h)}return r})(),a}async load(t,n){this._parsersValidated||this._validateParsers();let a=0;const r={},o=yr(t),c=tn(t,m=>({alias:[m],src:m,data:{}})),h=c.length,d=c.map(async m=>{const g=Ge.toAbsolute(m.src);if(!r[m.src])try{this.promiseCache[g]||(this.promiseCache[g]=this._getLoadPromiseAndParser(g,m)),r[m.src]=await this.promiseCache[g].promise,n&&n(++a/h)}catch(y){throw delete this.promiseCache[g],delete r[m.src],new Error(`[Loader.load] Failed to load ${g}.
${y}`)}});return await Promise.all(d),o?r[c[0].src]:r}async unload(t){const a=tn(t,r=>({alias:[r],src:r})).map(async r=>{const o=Ge.toAbsolute(r.src),c=this.promiseCache[o];if(c){const h=await c.promise;delete this.promiseCache[o],await c.parser?.unload?.(h,r,this)}});await Promise.all(a)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,n)=>(n.name?t[n.name]&&Ht(`[Assets] loadParser name conflict "${n.name}"`):Ht("[Assets] loadParser should have a name"),{...t,[n.name]:n}),{})}}function fs(s,t){if(Array.isArray(t)){for(const n of t)if(s.startsWith(`data:${n}`))return!0;return!1}return s.startsWith(`data:${t}`)}function ds(s,t){const n=s.split("?")[0],a=Ge.extname(n).toLowerCase();return Array.isArray(t)?t.includes(a):a===t}const I_=".json",K_="application/json",Q_={extension:{type:nt.LoadParser,priority:ni.Low},name:"loadJson",test(s){return fs(s,K_)||ds(s,I_)},async load(s){return await(await Ft.get().fetch(s)).json()}},W_=".txt",Z_="text/plain",J_={name:"loadTxt",extension:{type:nt.LoadParser,priority:ni.Low,name:"loadTxt"},test(s){return fs(s,Z_)||ds(s,W_)},async load(s){return await(await Ft.get().fetch(s)).text()}},$_=["normal","bold","100","200","300","400","500","600","700","800","900"],t1=[".ttf",".otf",".woff",".woff2"],e1=["font/ttf","font/otf","font/woff","font/woff2"],n1=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function i1(s){const t=Ge.extname(s),r=Ge.basename(s,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1));let o=r.length>0;for(const h of r)if(!h.match(n1)){o=!1;break}let c=r.join(" ");return o||(c=`"${c.replace(/[\\"]/g,"\\$&")}"`),c}const s1=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function a1(s){return s1.test(s)?s:encodeURI(s)}const r1={extension:{type:nt.LoadParser,priority:ni.Low},name:"loadWebFont",test(s){return fs(s,e1)||ds(s,t1)},async load(s,t){const n=Ft.get().getFontFaceSet();if(n){const a=[],r=t.data?.family??i1(s),o=t.data?.weights?.filter(h=>$_.includes(h))??["normal"],c=t.data??{};for(let h=0;h<o.length;h++){const d=o[h],m=new FontFace(r,`url(${a1(s)})`,{...c,weight:d});await m.load(),n.add(m),a.push(m)}return Xt.set(`${r}-and-url`,{url:s,fontFaces:a}),a.length===1?a[0]:a}return Ht("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(s){(Array.isArray(s)?s:[s]).forEach(t=>{Xt.remove(`${t.family}-and-url`),Ft.get().getFontFaceSet().delete(t)})}};function Du(s,t=1){const n=hs.RETINA_PREFIX?.exec(s);return n?parseFloat(n[1]):t}function Gu(s,t,n){s.label=n,s._sourceOrigin=n;const a=new pt({source:s,label:n}),r=()=>{delete t.promiseCache[n],Xt.has(n)&&Xt.remove(n)};return a.source.once("destroy",()=>{t.promiseCache[n]&&(Ht("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),r())}),a.once("destroy",()=>{s.destroyed||(Ht("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),a}const l1=".svg",o1="image/svg+xml",u1={extension:{type:nt.LoadParser,priority:ni.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(s){return fs(s,o1)||ds(s,l1)},async load(s,t,n){return t.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?h1(s):c1(s,t,n,this.config.crossOrigin)},unload(s){s.destroy(!0)}};async function c1(s,t,n,a){const o=await(await Ft.get().fetch(s)).blob(),c=URL.createObjectURL(o),h=new Image;h.src=c,h.crossOrigin=a,await h.decode(),URL.revokeObjectURL(c);const d=document.createElement("canvas"),m=d.getContext("2d"),g=t.data?.resolution||Du(s),y=t.data?.width??h.width,v=t.data?.height??h.height;d.width=y*g,d.height=v*g,m.drawImage(h,0,0,y*g,v*g);const{parseAsGraphicsContext:x,...C}=t.data??{},E=new Ei({resource:d,alphaMode:"premultiply-alpha-on-upload",resolution:g,...C});return Gu(E,n,s)}async function h1(s){const n=await(await Ft.get().fetch(s)).text(),a=new ke;return a.svg(n),a}const f1=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let ss=null,gu=class{constructor(){ss||(ss=URL.createObjectURL(new Blob([f1],{type:"application/javascript"}))),this.worker=new Worker(ss)}};gu.revokeObjectURL=function(){ss&&(URL.revokeObjectURL(ss),ss=null)};const d1=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let as=null;class xm{constructor(){as||(as=URL.createObjectURL(new Blob([d1],{type:"application/javascript"}))),this.worker=new Worker(as)}}xm.revokeObjectURL=function(){as&&(URL.revokeObjectURL(as),as=null)};let Gd=0,Xo;class p1{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:n}=new gu;n.addEventListener("message",a=>{n.terminate(),gu.revokeObjectURL(),t(a.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,n){return this._run("loadImageBitmap",[t,n?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){Xo===void 0&&(Xo=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<Xo&&(this._createdWorkers++,t=new xm().worker,t.addEventListener("message",n=>{this._complete(n.data),this._returnWorker(n.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,n){await this._initWorkers();const a=new Promise((r,o)=>{this._queue.push({id:t,arguments:n,resolve:r,reject:o})});return this._next(),a}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const n=this._queue.pop(),a=n.id;this._resolveHash[Gd]={resolve:n.resolve,reject:n.reject},t.postMessage({data:n.arguments,uuid:Gd++,id:a})}}const Pd=new p1,m1=[".jpeg",".jpg",".png",".webp",".avif"],g1=["image/jpeg","image/png","image/webp","image/avif"];async function y1(s,t){const n=await Ft.get().fetch(s);if(!n.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${s}: ${n.status} ${n.statusText}`);const a=await n.blob();return t?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(a,{premultiplyAlpha:"none"}):createImageBitmap(a)}const vm={name:"loadTextures",extension:{type:nt.LoadParser,priority:ni.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(s){return fs(s,g1)||ds(s,m1)},async load(s,t,n){let a=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Pd.isImageBitmapSupported()?a=await Pd.loadImageBitmap(s,t):a=await y1(s,t):a=await new Promise((o,c)=>{a=new Image,a.crossOrigin=this.config.crossOrigin,a.src=s,a.complete?o(a):(a.onload=()=>{o(a)},a.onerror=c)});const r=new Ei({resource:a,alphaMode:"premultiply-alpha-on-upload",resolution:t.data?.resolution||Du(s),...t.data});return Gu(r,n,s)},unload(s){s.destroy(!0)}},_m=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],x1=_m.map(s=>`video/${s.substring(1)}`);function v1(s,t,n){n===void 0&&!t.startsWith("data:")?s.crossOrigin=b1(t):n!==!1&&(s.crossOrigin=typeof n=="string"?n:"anonymous")}function _1(s){return new Promise((t,n)=>{s.addEventListener("canplaythrough",a),s.addEventListener("error",r),s.load();function a(){o(),t()}function r(c){o(),n(c)}function o(){s.removeEventListener("canplaythrough",a),s.removeEventListener("error",r)}})}function b1(s,t=globalThis.location){if(s.startsWith("data:"))return"";t||(t=globalThis.location);const n=new URL(s,document.baseURI);return n.hostname!==t.hostname||n.port!==t.port||n.protocol!==t.protocol?"anonymous":""}const S1={name:"loadVideo",extension:{type:nt.LoadParser,name:"loadVideo"},test(s){const t=fs(s,x1),n=ds(s,_m);return t||n},async load(s,t,n){const a={...cr.defaultOptions,resolution:t.data?.resolution||Du(s),alphaMode:t.data?.alphaMode||await Mp(),...t.data},r=document.createElement("video"),o={preload:a.autoLoad!==!1?"auto":void 0,"webkit-playsinline":a.playsinline!==!1?"":void 0,playsinline:a.playsinline!==!1?"":void 0,muted:a.muted===!0?"":void 0,loop:a.loop===!0?"":void 0,autoplay:a.autoPlay!==!1?"":void 0};Object.keys(o).forEach(d=>{const m=o[d];m!==void 0&&r.setAttribute(d,m)}),a.muted===!0&&(r.muted=!0),v1(r,s,a.crossorigin);const c=document.createElement("source");let h;if(s.startsWith("data:"))h=s.slice(5,s.indexOf(";"));else if(!s.startsWith("blob:")){const d=s.split("?")[0].slice(s.lastIndexOf(".")+1).toLowerCase();h=cr.MIME_TYPES[d]||`video/${d}`}return c.src=s,h&&(c.type=h),new Promise(d=>{const m=async()=>{const g=new cr({...a,resource:r});r.removeEventListener("canplay",m),t.data.preload&&await _1(r),d(Gu(g,n,s))};r.addEventListener("canplay",m),r.appendChild(c)})},unload(s){s.destroy(!0)}},bm={extension:{type:nt.ResolveParser,name:"resolveTexture"},test:vm.test,parse:s=>({resolution:parseFloat(hs.RETINA_PREFIX.exec(s)?.[1]??"1"),format:s.split(".").pop(),src:s})},A1={extension:{type:nt.ResolveParser,priority:-2,name:"resolveJson"},test:s=>hs.RETINA_PREFIX.test(s)&&s.endsWith(".json"),parse:bm.parse};class C1{constructor(){this._detections=[],this._initialized=!1,this.resolver=new hs,this.loader=new k_,this.cache=Xt,this._backgroundLoader=new P_(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){Ht("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let o=t.manifest;typeof o=="string"&&(o=await this.load(o)),this.resolver.addManifest(o)}const n=t.texturePreference?.resolution??1,a=typeof n=="number"?[n]:n,r=await this._detectFormats({preferredFormats:t.texturePreference?.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:a}}),t.preferences&&this.setPreferences(t.preferences)}add(t){this.resolver.add(t)}async load(t,n){this._initialized||await this.init();const a=yr(t),r=tn(t).map(h=>{if(typeof h!="string"){const d=this.resolver.getAlias(h);return d.some(m=>!this.resolver.hasKey(m))&&this.add(h),Array.isArray(d)?d[0]:d}return this.resolver.hasKey(h)||this.add({alias:h,src:h}),h}),o=this.resolver.resolve(r),c=await this._mapLoadToResolve(o,n);return a?c[r[0]]:c}addBundle(t,n){this.resolver.addBundle(t,n)}async loadBundle(t,n){this._initialized||await this.init();let a=!1;typeof t=="string"&&(a=!0,t=[t]);const r=this.resolver.resolveBundle(t),o={},c=Object.keys(r);let h=0,d=0;const m=()=>{n?.(++h/d)},g=c.map(y=>{const v=r[y];return d+=Object.keys(v).length,this._mapLoadToResolve(v,m).then(x=>{o[y]=x})});return await Promise.all(g),a?o[t[0]]:o}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const n=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const n=this.resolver.resolveBundle(t);Object.values(n).forEach(a=>{this._backgroundLoader.add(Object.values(a))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Xt.get(t);const n={};for(let a=0;a<t.length;a++)n[a]=Xt.get(t[a]);return n}async _mapLoadToResolve(t,n){const a=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const r=await this.loader.load(a,n);this._backgroundLoader.active=!0;const o={};return a.forEach(c=>{const h=r[c.src],d=[c.src];c.alias&&d.push(...c.alias),d.forEach(m=>{o[m]=h}),Xt.set(d,h)}),o}async unload(t){this._initialized||await this.init();const n=tn(t).map(r=>typeof r!="string"?r.src:r),a=this.resolver.resolve(n);await this._unloadFromResolved(a)}async unloadBundle(t){this._initialized||await this.init(),t=tn(t);const n=this.resolver.resolveBundle(t),a=Object.keys(n).map(r=>this._unloadFromResolved(n[r]));await Promise.all(a)}async _unloadFromResolved(t){const n=Object.values(t);n.forEach(a=>{Xt.remove(a.src)}),await this.loader.unload(n)}async _detectFormats(t){let n=[];t.preferredFormats&&(n=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const a of t.detections)t.skipDetections||await a.test()?n=await a.add(n):t.skipDetections||(n=await a.remove(n));return n=n.filter((a,r)=>n.indexOf(a)===r),n}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(a=>a in t).forEach(a=>{n.config[a]=t[a]})})}}const Ws=new C1;te.handleByList(nt.LoadParser,Ws.loader.parsers).handleByList(nt.ResolveParser,Ws.resolver.parsers).handleByList(nt.CacheParser,Ws.cache.parsers).handleByList(nt.DetectionParser,Ws.detections);te.add(H_,L_,V_,q_,Y_,X_,F_,Q_,J_,r1,u1,vm,S1,G_,D_,bm,A1);const Hd={loader:nt.LoadParser,resolver:nt.ResolveParser,cache:nt.CacheParser,detection:nt.DetectionParser};te.handle(nt.Asset,s=>{const t=s.ref;Object.entries(Hd).filter(([n])=>!!t[n]).forEach(([n,a])=>te.add(Object.assign(t[n],{extension:t[n].extension??a})))},s=>{const t=s.ref;Object.keys(Hd).filter(n=>!!t[n]).forEach(n=>te.remove(t[n]))});class us extends yp{constructor(t){t instanceof ke&&(t={context:t});const{context:n,roundPixels:a,...r}=t||{};super({label:"Graphics",...r}),this.renderPipeId="graphics",n?this._context=n:this._context=this._ownedContext=new ke,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=a??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(t){return this._context.containsPoint(t)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||t?.context===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,n){return this.context[t](...n),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new us(this._context.clone()):(this._ownedContext=null,new us(this._context))}lineStyle(t,n,a){bt(Rt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const r={};return t&&(r.width=t),n&&(r.color=n),a&&(r.alpha=a),this.context.strokeStyle=r,this}beginFill(t,n){bt(Rt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const a={};return t!==void 0&&(a.color=t),n!==void 0&&(a.alpha=n),this.context.fillStyle=a,this}endFill(){bt(Rt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==ke.defaultStrokeStyle.width||t.color!==ke.defaultStrokeStyle.color||t.alpha!==ke.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return bt(Rt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return bt(Rt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return bt(Rt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return bt(Rt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return bt(Rt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return bt(Rt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}te.add(Wy,Zy);var Fo={exports:{}},wn={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd;function T1(){return Vd||(Vd=1,wn.ConcurrentRoot=1,wn.ContinuousEventPriority=8,wn.DefaultEventPriority=32,wn.DiscreteEventPriority=2,wn.IdleEventPriority=268435456,wn.LegacyRoot=0,wn.NoEventPriority=0),wn}var Ld;function M1(){return Ld||(Ld=1,Fo.exports=T1()),Fo.exports}var is=M1();const Pu=ct.createContext({}),E1=Pu.Provider;Pu.Consumer;function Sm(s,t){const n=Object.getPrototypeOf(s),a=Object.getOwnPropertyDescriptor(n,t);return!(typeof a>"u"||a.writable||a.set)}const ei={currentUpdatePriority:is.DefaultEventPriority,unmountQueue:new Set};function jd(s,...t){}function Am(s,t={}){const n=s;return n.__pixireact=Object.assign({filters:[],parent:null,root:null,type:""},t),n}var w1="0.0.0-development",R1={version:w1};function B1(){}function Cm(s,t,n){t instanceof Ae&&(t.__pixireact.parent=s,typeof n=="number"?s.__pixireact.filters.splice(n,0,t):s.__pixireact.filters.push(t),s.filters=s.__pixireact.filters)}function qo(s,t){t&&(t instanceof Pe?s.addChild(t):t instanceof Ae&&Cm(s,t))}function z1(){}function U1(){return!1}const yu=Object.freeze({onclick:"onClick",onglobalmousemove:"onGlobalMouseMove",onglobalpointermove:"onGlobalPointerMove",onglobaltouchmove:"onGlobalTouchMove",onmousedown:"onMouseDown",onmouseenter:"onMouseEnter",onmouseleave:"onMouseLeave",onmousemove:"onMouseMove",onmouseout:"onMouseOut",onmouseover:"onMouseOver",onmouseup:"onMouseUp",onmouseupoutside:"onMouseUpOutside",onpointercancel:"onPointerCancel",onpointerdown:"onPointerDown",onpointerenter:"onPointerEnter",onpointerleave:"onPointerLeave",onpointermove:"onPointerMove",onpointerout:"onPointerOut",onpointerover:"onPointerOver",onpointertap:"onPointerTap",onpointerup:"onPointerUp",onpointerupoutside:"onPointerUpOutside",onrightclick:"onRightClick",onrightdown:"onRightDown",onrightup:"onRightUp",onrightupoutside:"onRightUpOutside",ontap:"onTap",ontouchcancel:"onTouchCancel",ontouchend:"onTouchEnd",ontouchendoutside:"onTouchEndOutside",ontouchmove:"onTouchMove",ontouchstart:"onTouchStart",onwheel:"onWheel"}),vr=Object.freeze({onClick:"onclick",onGlobalMouseMove:"onglobalmousemove",onGlobalPointerMove:"onglobalpointermove",onGlobalTouchMove:"onglobaltouchmove",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseUpOutside:"onmouseupoutside",onPointerCancel:"onpointercancel",onPointerDown:"onpointerdown",onPointerEnter:"onpointerenter",onPointerLeave:"onpointerleave",onPointerMove:"onpointermove",onPointerOut:"onpointerout",onPointerOver:"onpointerover",onPointerTap:"onpointertap",onPointerUp:"onpointerup",onPointerUpOutside:"onpointerupoutside",onRightClick:"onrightclick",onRightDown:"onrightdown",onRightUp:"onrightup",onRightUpOutside:"onrightupoutside",onTap:"ontap",onTouchCancel:"ontouchcancel",onTouchEnd:"ontouchend",onTouchEndOutside:"ontouchendoutside",onTouchMove:"ontouchmove",onTouchStart:"ontouchstart",onWheel:"onwheel"});function Tm(s){return Array.isArray(s)}function Mm(s,t,n={arrays:"reference",objects:"reference",strict:!0}){const{arrays:a,objects:r,strict:o}=n;if(typeof s!=typeof t||!!s!=!!t)return!1;if(G1(s)||O1(s))return s===t;const c=D1(s);if(c&&r==="reference")return s===t;const h=Tm(s);if(h&&a==="reference")return s===t;if((h||c)&&s===t)return!0;let d;for(d in s)if(!(d in t))return!1;let m=s;if(o&&(m=t),c&&a==="shallow"&&r==="shallow"){for(d in m)if(!Mm(s[d],t[d],{strict:o,objects:"reference"}))return!1}else for(d in m)if(s[d]!==t[d])return!1;if(Em(d)){if(h&&s.length===0&&t.length===0||c&&Object.keys(s).length===0&&Object.keys(t).length===0)return!0;if(s!==t)return!1}return!0}function N1(s){return s===null}function O1(s){return typeof s=="number"}function D1(s){return!(s!==Object(s)||Tm(s)||typeof s=="function")}function G1(s){return typeof s=="string"}function Em(s){return s===void 0}const P1=Object.freeze(["children","key","ref"]);function H1(s,t=[]){const n={};return Object.entries(s).reduce((a,[r,o])=>(t.includes(r)||(a[r]=o),a),n)}function xu(s,t=[]){return H1(s,P1.concat(t))}const V1="__default";function wm(s,t={},n=!1){const a=xu(s),r=xu(t),o=Object.entries(a),c=[];if(n){const h=Object.keys(r);let d=0;for(;d<h.length;){const m=h[d];!(m in a)&&o.unshift([m,`${V1}remove`]),d+=1}}return o.forEach(([h,d])=>{if(Mm(d,r[h]))return;if(h in vr){c.push([h,d,!0,[]]);return}let m=[];h.includes("-")&&(m=h.split("-")),c.push([h,d,!1,m]);for(const g in a){const y=a[g];g.startsWith(`${h}-`)&&c.push([g,y,!1,g.split("-")])}}),{changes:c}}function L1(s){const t=s;return!(!t||!t.changes)}const j1="__default",Yd=new Map,Xd={};function Fd(s,t){if(s){const n=s[t];if(!Em(n)&&!N1(n))return n}return s}function Rm(s,t){const{__pixireact:n={},...a}=s;let r;L1(t)?r=t:r=wm(t,a);const{changes:o}=r;let c=0;for(;c<o.length;){const h=o[c];let d=!1,m=h[0],g=h[1];const y=h[2],v=h[3];let x=s,C=x[m];if(m==="draw"&&typeof g=="function"&&(s instanceof us?g(s):(d=!0,jd("warn",`The \`draw\` prop was used on a \`${n.type}\` component, but it's only valid on \`graphics\` components.`))),m in yu){const E=m;d=!0,Xd[m]||(Xd[m]=!0,jd("warn",`Event names must be pascal case; instead of \`${m}\`, you probably want \`${yu[E]}\`.`))}if(!d){if(v.length&&(C=v.reduce(Fd,x),!(C&&C.set))){const[E,...S]=v.reverse();x=S.reverse().reduce(Fd,x),m=E}if(g===`${j1}remove`)if(x instanceof Pe){let E=Yd.get(x.constructor);E||(E=x.constructor,E=new E,Yd.set(x.constructor,E)),g=E[m]}else g=0;if(y&&n){const S=vr[m];g?x[S]=g:delete x[S]}else Sm(x,m)||(x[m]=g)}c+=1}return s}function Y1(s,t,n,a){const{children:r,...o}=a,{children:c,...h}=n,d=wm(o,h,!0);return d.changes.length?d:null}function X1(s,t,n,a){const r=Y1(s,t,n,a);r&&Rm(s,r)}const F1=Object.freeze([...Object.keys(yu),"draw"]),vu={};function q1(s){const t=s.charAt(0),n=s.substring(1);return`${t.toUpperCase()}${n}`}function k1(s,t){return t.toLowerCase()}function I1(s){let t=s;return s.startsWith("pixi")&&(t=s.replace(/^pixi([A-Z])/,k1)),t}function K1(s,t,n){const a=I1(s),r=q1(a);if(!(r in vu))throw new Error(`${r} is not part of the PIXI namespace! Did you forget to extend?`);const o=vu[r],c=xu(t,F1);Object.entries(t).forEach(([d,m])=>{if(d in vr){const g=vr[d];c[g]=m}});const h=Am(new o(c),{root:n,type:a});return Rm(h,t),h}var ko={exports:{}},Io={exports:{}},Ko={exports:{}},Qo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qd;function Q1(){return qd||(qd=1,(function(s){function t(b,A){var M=b.length;b.push(A);t:for(;0<M;){var z=M-1>>>1,D=b[z];if(0<r(D,A))b[z]=A,b[M]=D,M=z;else break t}}function n(b){return b.length===0?null:b[0]}function a(b){if(b.length===0)return null;var A=b[0],M=b.pop();if(M!==A){b[0]=M;t:for(var z=0,D=b.length,L=D>>>1;z<L;){var j=2*(z+1)-1,k=b[j],J=j+1,Z=b[J];if(0>r(k,M))J<D&&0>r(Z,k)?(b[z]=Z,b[J]=M,z=J):(b[z]=k,b[j]=M,z=j);else if(J<D&&0>r(Z,M))b[z]=Z,b[J]=M,z=J;else break t}}return A}function r(b,A){var M=b.sortIndex-A.sortIndex;return M!==0?M:b.id-A.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();s.unstable_now=function(){return c.now()-h}}var d=[],m=[],g=1,y=null,v=3,x=!1,C=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function N(b){for(var A=n(m);A!==null;){if(A.callback===null)a(m);else if(A.startTime<=b)a(m),A.sortIndex=A.expirationTime,t(d,A);else break;A=n(m)}}function P(b){if(E=!1,N(b),!C)if(n(d)!==null)C=!0,Nt();else{var A=n(m);A!==null&&le(P,A.startTime-b)}}var X=!1,V=-1,Y=5,it=-1;function $(){return!(s.unstable_now()-it<Y)}function I(){if(X){var b=s.unstable_now();it=b;var A=!0;try{t:{C=!1,E&&(E=!1,w(V),V=-1),x=!0;var M=v;try{e:{for(N(b),y=n(d);y!==null&&!(y.expirationTime>b&&$());){var z=y.callback;if(typeof z=="function"){y.callback=null,v=y.priorityLevel;var D=z(y.expirationTime<=b);if(b=s.unstable_now(),typeof D=="function"){y.callback=D,N(b),A=!0;break e}y===n(d)&&a(d),N(b)}else a(d);y=n(d)}if(y!==null)A=!0;else{var L=n(m);L!==null&&le(P,L.startTime-b),A=!1}}break t}finally{y=null,v=M,x=!1}A=void 0}}finally{A?Q():X=!1}}}var Q;if(typeof R=="function")Q=function(){R(I)};else if(typeof MessageChannel<"u"){var Tt=new MessageChannel,vt=Tt.port2;Tt.port1.onmessage=I,Q=function(){vt.postMessage(null)}}else Q=function(){S(I,0)};function Nt(){X||(X=!0,Q())}function le(b,A){V=S(function(){b(s.unstable_now())},A)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(b){b.callback=null},s.unstable_continueExecution=function(){C||x||(C=!0,Nt())},s.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<b?Math.floor(1e3/b):5},s.unstable_getCurrentPriorityLevel=function(){return v},s.unstable_getFirstCallbackNode=function(){return n(d)},s.unstable_next=function(b){switch(v){case 1:case 2:case 3:var A=3;break;default:A=v}var M=v;v=A;try{return b()}finally{v=M}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(b,A){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var M=v;v=b;try{return A()}finally{v=M}},s.unstable_scheduleCallback=function(b,A,M){var z=s.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?z+M:z):M=z,b){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=M+D,b={id:g++,callback:A,priorityLevel:b,startTime:M,expirationTime:D,sortIndex:-1},M>z?(b.sortIndex=M,t(m,b),n(d)===null&&b===n(m)&&(E?(w(V),V=-1):E=!0,le(P,M-z))):(b.sortIndex=D,t(d,b),C||x||(C=!0,Nt())),b},s.unstable_shouldYield=$,s.unstable_wrapCallback=function(b){var A=v;return function(){var M=v;v=A;try{return b.apply(this,arguments)}finally{v=M}}}})(Qo)),Qo}var kd;function W1(){return kd||(kd=1,Ko.exports=Q1()),Ko.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Id;function Z1(){return Id||(Id=1,(function(s){s.exports=function(t){function n(e,i,l,u){return new lg(e,i,l,u)}function a(){}function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return e===null||typeof e!="object"?null:(e=qh&&e[qh]||e["@@iterator"],typeof e=="function"?e:null)}function c(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===dg?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gi:return"Fragment";case Di:return"Portal";case Bl:return"Profiler";case Yh:return"StrictMode";case Ul:return"Suspense";case Nl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ln:return(e.displayName||"Context")+".Provider";case Xh:return(e._context.displayName||"Context")+".Consumer";case zl:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ol:return i=e.displayName||null,i!==null?i:c(e.type)||"Memo";case jn:i=e._payload,e=e._init;try{return c(e(i))}catch{}}return null}function h(e){if(Dl===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Dl=i&&i[1]||"",kh=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Dl+e+kh}function d(e,i){if(!e||Gl)return"";Gl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(lt){var W=lt}Reflect.construct(e,[],K)}else{try{K.call()}catch(lt){W=lt}e.call(K.prototype)}}else{try{throw Error()}catch(lt){W=lt}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(lt){if(lt&&W&&typeof lt.stack=="string")return[lt.stack,W.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),_=p[0],T=p[1];if(_&&T){var U=_.split(`
`),H=T.split(`
`);for(f=u=0;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===U.length||f===H.length)for(u=U.length-1,f=H.length-1;1<=u&&0<=f&&U[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(U[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||U[u]!==H[f]){var q=`
`+U[u].replace(" at new "," at ");return e.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",e.displayName)),q}while(1<=u&&0<=f);break}}}finally{Gl=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?h(l):""}function m(e){switch(e.tag){case 26:case 27:case 5:return h(e.type);case 16:return h("Lazy");case 13:return h("Suspense");case 19:return h("SuspenseList");case 0:case 15:return e=d(e.type,!1),e;case 11:return e=d(e.type.render,!1),e;case 1:return e=d(e.type,!0),e;default:return""}}function g(e){try{var i="";do i+=m(e),e=e.return;while(e);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function y(e){var i=e,l=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(l=i.return),e=i.return;while(e)}return i.tag===3?l:null}function v(e){if(y(e)!==e)throw Error(r(188))}function x(e){var i=e.alternate;if(!i){if(i=y(e),i===null)throw Error(r(188));return i!==e?null:e}for(var l=e,u=i;;){var f=l.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){l=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===l)return v(f),e;if(p===u)return v(f),i;p=p.sibling}throw Error(r(188))}if(l.return!==u.return)l=f,u=p;else{for(var _=!1,T=f.child;T;){if(T===l){_=!0,l=f,u=p;break}if(T===u){_=!0,u=f,l=p;break}T=T.sibling}if(!_){for(T=p.child;T;){if(T===l){_=!0,l=p,u=f;break}if(T===u){_=!0,u=p,l=f;break}T=T.sibling}if(!_)throw Error(r(189))}}if(l.alternate!==u)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?e:i}function C(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=C(e),i!==null)return i;e=e.sibling}return null}function E(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(e.tag!==4&&(i=E(e),i!==null))return i;e=e.sibling}return null}function S(e){return{current:e}}function w(e){0>Hi||(e.current=Yl[Hi],Yl[Hi]=null,Hi--)}function R(e,i){Hi++,Yl[Hi]=e.current,e.current=i}function N(e){return e>>>=0,e===0?32:31-(wy(e)/Ry|0)|0}function P(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function X(e,i){var l=e.pendingLanes;if(l===0)return 0;var u=0,f=e.suspendedLanes,p=e.pingedLanes,_=e.warmLanes;e=e.finishedLanes!==0;var T=l&134217727;return T!==0?(l=T&~f,l!==0?u=P(l):(p&=T,p!==0?u=P(p):e||(_=T&~_,_!==0&&(u=P(_))))):(T=l&~f,T!==0?u=P(T):p!==0?u=P(p):e||(_=l&~_,_!==0&&(u=P(_)))),u===0?0:i!==0&&i!==u&&(i&f)===0&&(f=u&-u,_=i&-i,f>=_||f===32&&(_&4194176)!==0)?i:u}function V(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Y(e,i){switch(e){case 1:case 2:case 4:case 8:return i+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function it(){var e=Ra;return Ra<<=1,(Ra&4194176)===0&&(Ra=128),e}function $(){var e=Ba;return Ba<<=1,(Ba&62914560)===0&&(Ba=4194304),e}function I(e){for(var i=[],l=0;31>l;l++)i.push(e);return i}function Q(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Tt(e,i,l,u,f,p){var _=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var T=e.entanglements,U=e.expirationTimes,H=e.hiddenUpdates;for(l=_&~l;0<l;){var q=31-Re(l),K=1<<q;T[q]=0,U[q]=-1;var W=H[q];if(W!==null)for(H[q]=null,q=0;q<W.length;q++){var lt=W[q];lt!==null&&(lt.lane&=-536870913)}l&=~K}u!==0&&vt(e,u,0),p!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=p&~(_&~i))}function vt(e,i,l){e.pendingLanes|=i,e.suspendedLanes&=~i;var u=31-Re(i);e.entangledLanes|=i,e.entanglements[u]=e.entanglements[u]|1073741824|l&4194218}function Nt(e,i){var l=e.entangledLanes|=i;for(e=e.entanglements;l;){var u=31-Re(l),f=1<<u;f&i|e[u]&i&&(e[u]|=i),l&=~f}}function le(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function b(e){if(Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(zs,e,void 0,(e.current.flags&128)===128)}catch{}}function A(e){if(typeof Oy=="function"&&Dy(e),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(zs,e)}catch{}}function M(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}function z(e,i){if(typeof e=="object"&&e!==null){var l=vf.get(e);return l!==void 0?l:(i={value:e,source:i,stack:g(i)},vf.set(e,i),i)}return{value:e,source:i,stack:g(i)}}function D(e,i){Li[ji++]=Na,Li[ji++]=Ua,Ua=e,Na=i}function L(e,i,l){Le[je++]=bn,Le[je++]=Sn,Le[je++]=hi,hi=e;var u=bn;e=Sn;var f=32-Re(u)-1;u&=~(1<<f),l+=1;var p=32-Re(i)+f;if(30<p){var _=f-f%5;p=(u&(1<<_)-1).toString(32),u>>=_,f-=_,bn=1<<32-Re(i)+f|l<<f|u,Sn=p+e}else bn=1<<p|l<<f|u,Sn=e}function j(e){e.return!==null&&(D(e,1),L(e,1,0))}function k(e){for(;e===Ua;)Ua=Li[--ji],Li[ji]=null,Na=Li[--ji],Li[ji]=null;for(;e===hi;)hi=Le[--je],Le[je]=null,Sn=Le[--je],Le[je]=null,bn=Le[--je],Le[je]=null}function J(e,i){R(Xn,i),R(Us,e),R(re,null),e=gg(i),w(re),R(re,e)}function Z(){w(re),w(Us),w(Xn)}function _t(e){e.memoizedState!==null&&R(Oa,e);var i=re.current,l=yg(i,e.type);i!==l&&(R(Us,e),R(re,l))}function gt(e){Us.current===e&&(w(re),w(Us)),Oa.current===e&&(w(Oa),_n?ci._currentValue=Pi:ci._currentValue2=Pi)}function ot(e){var i=Error(r(418,""));throw oe(z(i,e)),ql}function Dt(e,i){if(!He)throw Error(r(175));cy(e.stateNode,e.type,e.memoizedProps,i,e)||ot(e)}function yt(e){for(ye=e.return;ye;)switch(ye.tag){case 3:case 27:rn=!0;return;case 5:case 13:rn=!1;return;default:ye=ye.return}}function pe(e){if(!He||e!==ye)return!1;if(!St)return yt(e),St=!0,!1;var i=!1;if(he?e.tag!==3&&e.tag!==27&&(e.tag!==5||of(e.type)&&!wa(e.type,e.memoizedProps))&&(i=!0):e.tag!==3&&(e.tag!==5||of(e.type)&&!wa(e.type,e.memoizedProps))&&(i=!0),i&&fe&&ot(e),yt(e),e.tag===13){if(!He)throw Error(r(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));fe=dy(e)}else fe=ye?rf(e.stateNode):null;return!0}function Jt(){He&&(fe=ye=null,St=!1)}function oe(e){Ze===null?Ze=[e]:Ze.push(e)}function me(){for(var e=Yi,i=kl=Yi=0;i<e;){var l=Ye[i];Ye[i++]=null;var u=Ye[i];Ye[i++]=null;var f=Ye[i];Ye[i++]=null;var p=Ye[i];if(Ye[i++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}p!==0&&ra(l,f,p)}}function rt(e,i,l,u){Ye[Yi++]=e,Ye[Yi++]=i,Ye[Yi++]=l,Ye[Yi++]=u,kl|=u,e.lanes|=u,e=e.alternate,e!==null&&(e.lanes|=u)}function dt(e,i,l,u){return rt(e,i,l,u),ps(e)}function Ke(e,i){return rt(e,null,null,i),ps(e)}function ra(e,i,l){e.lanes|=l;var u=e.alternate;u!==null&&(u.lanes|=l);for(var f=!1,p=e.return;p!==null;)p.childLanes|=l,u=p.alternate,u!==null&&(u.childLanes|=l),p.tag===22&&(e=p.stateNode,e===null||e._visibility&1||(f=!0)),e=p,p=p.return;f&&i!==null&&e.tag===3&&(p=e.stateNode,f=31-Re(l),p=p.hiddenUpdates,e=p[f],e===null?p[f]=[i]:e.push(i),i.lane=l|536870912)}function ps(e){if(50<js)throw js=0,oo=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}function an(e){e!==Xi&&e.next===null&&(Xi===null?Da=Xi=e:Xi=Xi.next=e),Ga=!0,Il||(Il=!0,Hm(Pm))}function Ri(e,i){if(!Kl&&Ga){Kl=!0;do for(var l=!1,u=Da;u!==null;){if(e!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var _=u.suspendedLanes,T=u.pingedLanes;p=(1<<31-Re(42|e)+1)-1,p&=f&~(_&~T),p=p&201326677?p&201326677|1:p?p|2:0}p!==0&&(l=!0,Yu(u,p))}else p=xt,p=X(u,u===zt?p:0),(p&3)===0||V(u,p)||(l=!0,Yu(u,p));u=u.next}while(l);Kl=!1}}function Pm(){Ga=Il=!1;var e=0;Fi!==0&&(Tg()&&(e=Fi),Fi=0);for(var i=We(),l=null,u=Da;u!==null;){var f=u.next,p=Lu(u,i);p===0?(u.next=null,l===null?Da=f:l.next=f,f===null&&(Xi=l)):(l=u,(e!==0||(p&3)!==0)&&(Ga=!0)),u=f}Ri(e)}function Lu(e,i){for(var l=e.suspendedLanes,u=e.pingedLanes,f=e.expirationTimes,p=e.pendingLanes&-62914561;0<p;){var _=31-Re(p),T=1<<_,U=f[_];U===-1?((T&l)===0||(T&u)!==0)&&(f[_]=Y(T,i)):U<=i&&(e.expiredLanes|=T),p&=~T}if(i=zt,l=xt,l=X(e,e===i?l:0),u=e.callbackNode,l===0||e===i&&Ut===2||e.cancelPendingCommit!==null)return u!==null&&u!==null&&Xl(u),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||V(e,l)){if(i=l&-l,i===e.callbackPriority)return i;switch(u!==null&&Xl(u),le(l)){case 2:case 8:l=Uy;break;case 32:l=Fl;break;case 268435456:l=Ny;break;default:l=Fl}return u=ju.bind(null,e),l=za(l,u),e.callbackPriority=i,e.callbackNode=l,i}return u!==null&&u!==null&&Xl(u),e.callbackPriority=2,e.callbackNode=null,2}function ju(e,i){var l=e.callbackNode;if(li()&&e.callbackNode!==l)return null;var u=xt;return u=X(e,e===zt?u:0),u===0?null:(bh(e,u,i),Lu(e,We()),e.callbackNode!=null&&e.callbackNode===l?ju.bind(null,e):null)}function Yu(e,i){if(li())return null;bh(e,i,!0)}function Hm(e){zg?Ug(function(){(wt&6)!==0?za(xf,e):e()}):za(xf,e)}function Mr(){return Fi===0&&(Fi=it()),Fi}function Vm(e,i){if(Ns===null){var l=Ns=[];Ql=0,qi=Mr(),ki={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Ql++,i.then(Xu,Xu),i}function Xu(){if(--Ql===0&&Ns!==null){ki!==null&&(ki.status="fulfilled");var e=Ns;Ns=null,qi=0,ki=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Lm(e,i){var l=[],u={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return e.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<l.length;f++)(0,l[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),u}function Er(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wr(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function zn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Un(e,i,l){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,(wt&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=ps(e),ra(e,null,l),i}return rt(e,u,i,l),ps(e)}function ms(e,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194176)!==0)){var u=i.lanes;u&=e.pendingLanes,l|=u,i.lanes=l,Nt(e,l)}}function Rr(e,i){var l=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var f=null,p=null;if(l=l.firstBaseUpdate,l!==null){do{var _={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};p===null?f=p=_:p=p.next=_,l=l.next}while(l!==null);p===null?f=p=i:p=p.next=i}else f=p=i;l={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=i:e.next=i,l.lastBaseUpdate=i}function gs(){if(Wl){var e=ki;if(e!==null)throw e}}function ys(e,i,l,u){Wl=!1;var f=e.updateQueue;Fn=!1;var p=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var U=T,H=U.next;U.next=null,_===null?p=H:_.next=H,_=U;var q=e.alternate;q!==null&&(q=q.updateQueue,T=q.lastBaseUpdate,T!==_&&(T===null?q.firstBaseUpdate=H:T.next=H,q.lastBaseUpdate=U))}if(p!==null){var K=f.baseState;_=0,q=H=U=null,T=p;do{var W=T.lane&-536870913,lt=W!==T.lane;if(lt?(xt&W)===W:(u&W)===W){W!==0&&W===qi&&(Wl=!0),q!==null&&(q=q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var qe=e,Ys=T;W=i;var _i=l;switch(Ys.tag){case 1:if(qe=Ys.payload,typeof qe=="function"){K=qe.call(_i,K,W);break t}K=qe;break t;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=Ys.payload,W=typeof qe=="function"?qe.call(_i,K,W):qe,W==null)break t;K=Rl({},K,W);break t;case 2:Fn=!0}}W=T.callback,W!==null&&(e.flags|=64,lt&&(e.flags|=8192),lt=f.callbacks,lt===null?f.callbacks=[W]:lt.push(W))}else lt={lane:W,tag:T.tag,payload:T.payload,callback:T.callback,next:null},q===null?(H=q=lt,U=K):q=q.next=lt,_|=W;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;lt=T,T=lt.next,lt.next=null,f.lastBaseUpdate=lt,f.shared.pending=null}}while(!0);q===null&&(U=K),f.baseState=U,f.firstBaseUpdate=H,f.lastBaseUpdate=q,p===null&&(f.shared.lanes=0),In|=_,e.lanes=_,e.memoizedState=K}}function Fu(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function qu(e,i){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)Fu(l[e],i)}function la(e,i){if(ze(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var l=Object.keys(e),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var f=l[u];if(!Gy.call(i,f)||!ze(e[f],i[f]))return!1}return!0}function ku(e){return e=e.status,e==="fulfilled"||e==="rejected"}function oa(){}function Iu(e,i,l){switch(l=e[l],l===void 0?e.push(i):l!==i&&(i.then(oa,oa),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===Os?Error(r(483)):e;default:if(typeof i.status=="string")i.then(oa,oa);else{if(e=zt,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,e===Os?Error(r(483)):e}throw Ii=i,Os}}function Ku(){if(Ii===null)throw Error(r(459));var e=Ii;return Ii=null,e}function ua(e){var i=Ds;return Ds+=1,Ki===null&&(Ki=[]),Iu(Ki,e,i)}function xs(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function ca(e,i){throw i.$$typeof===cg?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function Qu(e){var i=e._init;return i(e._payload)}function Wu(e){function i(O,B){if(e){var G=O.deletions;G===null?(O.deletions=[B],O.flags|=16):G.push(B)}}function l(O,B){if(!e)return null;for(;B!==null;)i(O,B),B=B.sibling;return null}function u(O){for(var B=new Map;O!==null;)O.key!==null?B.set(O.key,O):B.set(O.index,O),O=O.sibling;return B}function f(O,B){return O=Vn(O,B),O.index=0,O.sibling=null,O}function p(O,B,G){return O.index=G,e?(G=O.alternate,G!==null?(G=G.index,G<B?(O.flags|=33554434,B):G):(O.flags|=33554434,B)):(O.flags|=1048576,B)}function _(O){return e&&O.alternate===null&&(O.flags|=33554434),O}function T(O,B,G,F){return B===null||B.tag!==6?(B=Ml(G,O.mode,F),B.return=O,B):(B=f(B,G),B.return=O,B)}function U(O,B,G,F){var et=G.type;return et===Gi?q(O,B,G.props.children,F,G.key):B!==null&&(B.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===jn&&Qu(et)===B.type)?(B=f(B,G.props),xs(B,G),B.return=O,B):(B=Ta(G.type,G.key,G.props,null,O.mode,F),xs(B,G),B.return=O,B)}function H(O,B,G,F){return B===null||B.tag!==4||B.stateNode.containerInfo!==G.containerInfo||B.stateNode.implementation!==G.implementation?(B=El(G,O.mode,F),B.return=O,B):(B=f(B,G.children||[]),B.return=O,B)}function q(O,B,G,F,et){return B===null||B.tag!==7?(B=oi(G,O.mode,F,et),B.return=O,B):(B=f(B,G),B.return=O,B)}function K(O,B,G){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Ml(""+B,O.mode,G),B.return=O,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Ma:return G=Ta(B.type,B.key,B.props,null,O.mode,G),xs(G,B),G.return=O,G;case Di:return B=El(B,O.mode,G),B.return=O,B;case jn:var F=B._init;return B=F(B._payload),K(O,B,G)}if(Ea(B)||o(B))return B=oi(B,O.mode,G,null),B.return=O,B;if(typeof B.then=="function")return K(O,ua(B),G);if(B.$$typeof===Ln)return K(O,va(O,B),G);ca(O,B)}return null}function W(O,B,G,F){var et=B!==null?B.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return et!==null?null:T(O,B,""+G,F);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Ma:return G.key===et?U(O,B,G,F):null;case Di:return G.key===et?H(O,B,G,F):null;case jn:return et=G._init,G=et(G._payload),W(O,B,G,F)}if(Ea(G)||o(G))return et!==null?null:q(O,B,G,F,null);if(typeof G.then=="function")return W(O,B,ua(G),F);if(G.$$typeof===Ln)return W(O,B,va(O,G),F);ca(O,G)}return null}function lt(O,B,G,F,et){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return O=O.get(G)||null,T(B,O,""+F,et);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Ma:return O=O.get(F.key===null?G:F.key)||null,U(B,O,F,et);case Di:return O=O.get(F.key===null?G:F.key)||null,H(B,O,F,et);case jn:var Ot=F._init;return F=Ot(F._payload),lt(O,B,G,F,et)}if(Ea(F)||o(F))return O=O.get(G)||null,q(B,O,F,et,null);if(typeof F.then=="function")return lt(O,B,G,ua(F),et);if(F.$$typeof===Ln)return lt(O,B,G,va(B,F),et);ca(B,F)}return null}function qe(O,B,G,F){for(var et=null,Ot=null,st=B,At=B=0,ie=null;st!==null&&At<G.length;At++){st.index>At?(ie=st,st=null):ie=st.sibling;var Ct=W(O,st,G[At],F);if(Ct===null){st===null&&(st=ie);break}e&&st&&Ct.alternate===null&&i(O,st),B=p(Ct,B,At),Ot===null?et=Ct:Ot.sibling=Ct,Ot=Ct,st=ie}if(At===G.length)return l(O,st),St&&D(O,At),et;if(st===null){for(;At<G.length;At++)st=K(O,G[At],F),st!==null&&(B=p(st,B,At),Ot===null?et=st:Ot.sibling=st,Ot=st);return St&&D(O,At),et}for(st=u(st);At<G.length;At++)ie=lt(st,O,At,G[At],F),ie!==null&&(e&&ie.alternate!==null&&st.delete(ie.key===null?At:ie.key),B=p(ie,B,At),Ot===null?et=ie:Ot.sibling=ie,Ot=ie);return e&&st.forEach(function(Qn){return i(O,Qn)}),St&&D(O,At),et}function Ys(O,B,G,F){if(G==null)throw Error(r(151));for(var et=null,Ot=null,st=B,At=B=0,ie=null,Ct=G.next();st!==null&&!Ct.done;At++,Ct=G.next()){st.index>At?(ie=st,st=null):ie=st.sibling;var Qn=W(O,st,Ct.value,F);if(Qn===null){st===null&&(st=ie);break}e&&st&&Qn.alternate===null&&i(O,st),B=p(Qn,B,At),Ot===null?et=Qn:Ot.sibling=Qn,Ot=Qn,st=ie}if(Ct.done)return l(O,st),St&&D(O,At),et;if(st===null){for(;!Ct.done;At++,Ct=G.next())Ct=K(O,Ct.value,F),Ct!==null&&(B=p(Ct,B,At),Ot===null?et=Ct:Ot.sibling=Ct,Ot=Ct);return St&&D(O,At),et}for(st=u(st);!Ct.done;At++,Ct=G.next())Ct=lt(st,O,At,Ct.value,F),Ct!==null&&(e&&Ct.alternate!==null&&st.delete(Ct.key===null?At:Ct.key),B=p(Ct,B,At),Ot===null?et=Ct:Ot.sibling=Ct,Ot=Ct);return e&&st.forEach(function(Xy){return i(O,Xy)}),St&&D(O,At),et}function _i(O,B,G,F){if(typeof G=="object"&&G!==null&&G.type===Gi&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case Ma:t:{for(var et=G.key;B!==null;){if(B.key===et){if(et=G.type,et===Gi){if(B.tag===7){l(O,B.sibling),F=f(B,G.props.children),F.return=O,O=F;break t}}else if(B.elementType===et||typeof et=="object"&&et!==null&&et.$$typeof===jn&&Qu(et)===B.type){l(O,B.sibling),F=f(B,G.props),xs(F,G),F.return=O,O=F;break t}l(O,B);break}else i(O,B);B=B.sibling}G.type===Gi?(F=oi(G.props.children,O.mode,F,G.key),F.return=O,O=F):(F=Ta(G.type,G.key,G.props,null,O.mode,F),xs(F,G),F.return=O,O=F)}return _(O);case Di:t:{for(et=G.key;B!==null;){if(B.key===et)if(B.tag===4&&B.stateNode.containerInfo===G.containerInfo&&B.stateNode.implementation===G.implementation){l(O,B.sibling),F=f(B,G.children||[]),F.return=O,O=F;break t}else{l(O,B);break}else i(O,B);B=B.sibling}F=El(G,O.mode,F),F.return=O,O=F}return _(O);case jn:return et=G._init,G=et(G._payload),_i(O,B,G,F)}if(Ea(G))return qe(O,B,G,F);if(o(G)){if(et=o(G),typeof et!="function")throw Error(r(150));return G=et.call(G),Ys(O,B,G,F)}if(typeof G.then=="function")return _i(O,B,ua(G),F);if(G.$$typeof===Ln)return _i(O,B,va(O,G),F);ca(O,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,B!==null&&B.tag===6?(l(O,B.sibling),F=f(B,G),F.return=O,O=F):(l(O,B),F=Ml(G,O.mode,F),F.return=O,O=F),_(O)):l(O,B)}return function(O,B,G,F){try{Ds=0;var et=_i(O,B,G,F);return Ki=null,et}catch(st){if(st===Os)throw st;var Ot=n(29,st,null,O.mode);return Ot.lanes=F,Ot.return=O,Ot}finally{}}}function Zu(e,i){e=Mn,R(Ha,e),R(Qi,i),Mn=e|i.baseLanes}function Br(){R(Ha,Mn),R(Qi,Qi.current)}function zr(){Mn=Ha.current,w(Qi),w(Ha)}function Nn(e){var i=e.alternate;R($t,$t.current&1),R(Xe,e),ln===null&&(i===null||Qi.current!==null||i.memoizedState!==null)&&(ln=e)}function Ju(e){if(e.tag===22){if(R($t,$t.current),R(Xe,e),ln===null){var i=e.alternate;i!==null&&i.memoizedState!==null&&(ln=e)}}else On()}function On(){R($t,$t.current),R(Xe,Xe.current)}function pn(e){w(Xe),ln===e&&(ln=null),w($t)}function ha(e){for(var i=e;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Vl(l)||Ll(l)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function qt(){throw Error(r(321))}function Ur(e,i){if(i===null)return!1;for(var l=0;l<i.length&&l<e.length;l++)if(!ze(e[l],i[l]))return!1;return!0}function Nr(e,i,l,u,f,p){return qn=p,ut=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,at.H=e===null||e.memoizedState===null?pi:kn,di=!1,p=l(u,f),di=!1,Wi&&(p=tc(i,l,u,f)),$u(e),p}function $u(e){at.H=on;var i=Et!==null&&Et.next!==null;if(qn=0,It=Et=ut=null,Va=!1,Gs=0,Zi=null,i)throw Error(r(300));e===null||ee||(e=e.dependencies,e!==null&&xa(e)&&(ee=!0))}function tc(e,i,l,u){ut=e;var f=0;do{if(Wi&&(Zi=null),Gs=0,Wi=!1,25<=f)throw Error(r(301));if(f+=1,It=Et=null,e.updateQueue!=null){var p=e.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}at.H=mi,p=i(l,u)}while(Wi);return p}function jm(){var e=at.H,i=e.useState()[0];return i=typeof i.then=="function"?vs(i):i,e=e.useState()[0],(Et!==null?Et.memoizedState:null)!==e&&(ut.flags|=1024),i}function Or(){var e=La!==0;return La=0,e}function Dr(e,i,l){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~l}function Gr(e){if(Va){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Va=!1}qn=0,It=Et=ut=null,Wi=!1,Gs=La=0,Zi=null}function ve(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?ut.memoizedState=It=e:It=It.next=e,It}function kt(){if(Et===null){var e=ut.alternate;e=e!==null?e.memoizedState:null}else e=Et.next;var i=It===null?ut.memoizedState:It.next;if(i!==null)It=i,Et=e;else{if(e===null)throw ut.alternate===null?Error(r(467)):Error(r(310));Et=e,e={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},It===null?ut.memoizedState=It=e:It=It.next=e}return It}function vs(e){var i=Gs;return Gs+=1,Zi===null&&(Zi=[]),e=Iu(Zi,e,i),i=ut,(It===null?i.memoizedState:It.next)===null&&(i=i.alternate,at.H=i===null||i.memoizedState===null?pi:kn),e}function fa(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return vs(e);if(e.$$typeof===Ln)return ue(e)}throw Error(r(438,String(e)))}function Pr(e){var i=null,l=ut.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var u=ut.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Jl(),ut.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(e),u=0;u<e;u++)l[u]=fg;return i.index++,l}function mn(e,i){return typeof i=="function"?i(e):i}function da(e){var i=kt();return Hr(i,Et,e)}function Hr(e,i,l){var u=e.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=l;var f=e.baseQueue,p=u.pending;if(p!==null){if(f!==null){var _=f.next;f.next=p.next,p.next=_}i.baseQueue=f=p,u.pending=null}if(p=e.baseState,f===null)e.memoizedState=p;else{i=f.next;var T=_=null,U=null,H=i,q=!1;do{var K=H.lane&-536870913;if(K!==H.lane?(xt&K)===K:(qn&K)===K){var W=H.revertLane;if(W===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),K===qi&&(q=!0);else if((qn&W)===W){H=H.next,W===qi&&(q=!0);continue}else K={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},U===null?(T=U=K,_=p):U=U.next=K,ut.lanes|=W,In|=W;K=H.action,di&&l(p,K),p=H.hasEagerState?H.eagerState:l(p,K)}else W={lane:K,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},U===null?(T=U=W,_=p):U=U.next=W,ut.lanes|=K,In|=K;H=H.next}while(H!==null&&H!==i);if(U===null?_=p:U.next=T,!ze(p,e.memoizedState)&&(ee=!0,q&&(l=ki,l!==null)))throw l;e.memoizedState=p,e.baseState=_,e.baseQueue=U,u.lastRenderedState=p}return f===null&&(u.lanes=0),[e.memoizedState,u.dispatch]}function Vr(e){var i=kt(),l=i.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=e;var u=l.dispatch,f=l.pending,p=i.memoizedState;if(f!==null){l.pending=null;var _=f=f.next;do p=e(p,_.action),_=_.next;while(_!==f);ze(p,i.memoizedState)||(ee=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),l.lastRenderedState=p}return[p,u]}function ec(e,i,l){var u=ut,f=kt(),p=St;if(p){if(l===void 0)throw Error(r(407));l=l()}else l=i();var _=!ze((Et||f).memoizedState,l);if(_&&(f.memoizedState=l,ee=!0),f=f.queue,Yr(sc.bind(null,u,f,e),[e]),f.getSnapshot!==i||_||It!==null&&It.memoizedState.tag&1){if(u.flags|=2048,Bi(9,ic.bind(null,u,f,l,i),{destroy:void 0},null),zt===null)throw Error(r(349));p||(qn&60)!==0||nc(u,i,l)}return l}function nc(e,i,l){e.flags|=16384,e={getSnapshot:i,value:l},i=ut.updateQueue,i===null?(i=Jl(),ut.updateQueue=i,i.stores=[e]):(l=i.stores,l===null?i.stores=[e]:l.push(e))}function ic(e,i,l,u){i.value=l,i.getSnapshot=u,ac(i)&&rc(e)}function sc(e,i,l){return l(function(){ac(i)&&rc(e)})}function ac(e){var i=e.getSnapshot;e=e.value;try{var l=i();return!ze(e,l)}catch{return!0}}function rc(e){var i=Ke(e,2);i!==null&&ge(i,e,2)}function Lr(e){var i=ve();if(typeof e=="function"){var l=e;if(e=l(),di){A(!0);try{l()}finally{A(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mn,lastRenderedState:e},i}function lc(e,i,l,u){return e.baseState=l,Hr(e,Et,typeof u=="function"?u:mn)}function Ym(e,i,l,u,f){if(ga(e))throw Error(r(485));if(e=i.action,e!==null){var p={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){p.listeners.push(_)}};at.T!==null?l(!0):p.isTransition=!1,u(p),l=i.pending,l===null?(p.next=i.pending=p,oc(i,p)):(p.next=l.next,i.pending=l.next=p)}}function oc(e,i){var l=i.action,u=i.payload,f=e.state;if(i.isTransition){var p=at.T,_={};at.T=_;try{var T=l(f,u),U=at.S;U!==null&&U(_,T),uc(e,i,T)}catch(H){jr(e,i,H)}finally{at.T=p}}else try{p=l(f,u),uc(e,i,p)}catch(H){jr(e,i,H)}}function uc(e,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){cc(e,i,u)},function(u){return jr(e,i,u)}):cc(e,i,l)}function cc(e,i,l){i.status="fulfilled",i.value=l,hc(i),e.state=l,i=e.pending,i!==null&&(l=i.next,l===i?e.pending=null:(l=l.next,i.next=l,oc(e,l)))}function jr(e,i,l){var u=e.pending;if(e.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=l,hc(i),i=i.next;while(i!==u)}e.action=null}function hc(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function fc(e,i){return i}function dc(e,i){if(St){var l=zt.formState;if(l!==null){t:{var u=ut;if(St){if(fe){var f=iy(fe,rn);if(f){fe=rf(f),u=sy(f);break t}}ot(u)}u=!1}u&&(i=l[0])}}l=ve(),l.memoizedState=l.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fc,lastRenderedState:i},l.queue=u,l=Bc.bind(null,ut,u),u.dispatch=l,u=Lr(!1);var p=kr.bind(null,ut,!1,u.queue);return u=ve(),f={state:i,dispatch:null,action:e,pending:null},u.queue=f,l=Ym.bind(null,ut,f,p,l),f.dispatch=l,u.memoizedState=e,[i,l,!1]}function pc(e){var i=kt();return mc(i,Et,e)}function mc(e,i,l){i=Hr(e,i,fc)[0],e=da(mn)[0],i=typeof i=="object"&&i!==null&&typeof i.then=="function"?vs(i):i;var u=kt(),f=u.queue,p=f.dispatch;return l!==u.memoizedState&&(ut.flags|=2048,Bi(9,Xm.bind(null,f,l),{destroy:void 0},null)),[i,p,e]}function Xm(e,i){e.action=i}function gc(e){var i=kt(),l=Et;if(l!==null)return mc(i,l,e);kt(),i=i.memoizedState,l=kt();var u=l.queue.dispatch;return l.memoizedState=e,[i,u,!1]}function Bi(e,i,l,u){return e={tag:e,create:i,inst:l,deps:u,next:null},i=ut.updateQueue,i===null&&(i=Jl(),ut.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=e.next=e:(u=l.next,l.next=e,e.next=u,i.lastEffect=e),e}function yc(){return kt().memoizedState}function pa(e,i,l,u){var f=ve();ut.flags|=e,f.memoizedState=Bi(1|i,l,{destroy:void 0},u===void 0?null:u)}function ma(e,i,l,u){var f=kt();u=u===void 0?null:u;var p=f.memoizedState.inst;Et!==null&&u!==null&&Ur(u,Et.memoizedState.deps)?f.memoizedState=Bi(i,l,p,u):(ut.flags|=e,f.memoizedState=Bi(1|i,l,p,u))}function xc(e,i){pa(8390656,8,e,i)}function Yr(e,i){ma(2048,8,e,i)}function vc(e,i){return ma(4,2,e,i)}function _c(e,i){return ma(4,4,e,i)}function bc(e,i){if(typeof i=="function"){e=e();var l=i(e);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Sc(e,i,l){l=l!=null?l.concat([e]):null,ma(4,4,bc.bind(null,i,e),l)}function Xr(){}function Ac(e,i){var l=kt();i=i===void 0?null:i;var u=l.memoizedState;return i!==null&&Ur(i,u[1])?u[0]:(l.memoizedState=[e,i],e)}function Cc(e,i){var l=kt();i=i===void 0?null:i;var u=l.memoizedState;if(i!==null&&Ur(i,u[1]))return u[0];if(u=e(),di){A(!0);try{e()}finally{A(!1)}}return l.memoizedState=[u,i],u}function Fr(e,i,l){return l===void 0||(qn&1073741824)!==0?e.memoizedState=i:(e.memoizedState=l,e=_h(),ut.lanes|=e,In|=e,l)}function Tc(e,i,l,u){return ze(l,i)?l:Qi.current!==null?(e=Fr(e,l,u),ze(e,i)||(ee=!0),e):(qn&42)===0?(ee=!0,e.memoizedState=l):(e=_h(),ut.lanes|=e,In|=e,i)}function Mc(e,i,l,u,f){var p=ui();be(p!==0&&8>p?p:8);var _=at.T,T={};at.T=T,kr(e,!1,i,l);try{var U=f(),H=at.S;if(H!==null&&H(T,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var q=Lm(U,u);_s(e,i,q,Ee(e))}else _s(e,i,u,Ee(e))}catch(K){_s(e,i,{then:function(){},status:"rejected",reason:K},Ee())}finally{be(p),at.T=_}}function Ec(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:Pi,baseState:Pi,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mn,lastRenderedState:Pi},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mn,lastRenderedState:l},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function qr(){return ue(ci)}function wc(){return kt().memoizedState}function Rc(){return kt().memoizedState}function Fm(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var l=Ee();e=zn(l);var u=Un(i,e,l);u!==null&&(ge(u,i,l),ms(u,i,l)),i={cache:al()},e.payload=i;return}i=i.return}}function qm(e,i,l){var u=Ee();l={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},ga(e)?zc(i,l):(l=dt(e,i,l,u),l!==null&&(ge(l,e,u),Uc(l,i,u)))}function Bc(e,i,l){var u=Ee();_s(e,i,l,u)}function _s(e,i,l,u){var f={lane:u,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(ga(e))zc(i,f);else{var p=e.alternate;if(e.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var _=i.lastRenderedState,T=p(_,l);if(f.hasEagerState=!0,f.eagerState=T,ze(T,_))return rt(e,i,f,0),zt===null&&me(),!1}catch{}finally{}if(l=dt(e,i,f,u),l!==null)return ge(l,e,u),Uc(l,i,u),!0}return!1}function kr(e,i,l,u){if(u={lane:2,revertLane:Mr(),action:u,hasEagerState:!1,eagerState:null,next:null},ga(e)){if(i)throw Error(r(479))}else i=dt(e,l,u,2),i!==null&&ge(i,e,2)}function ga(e){var i=e.alternate;return e===ut||i!==null&&i===ut}function zc(e,i){Wi=Va=!0;var l=e.pending;l===null?i.next=i:(i.next=l.next,l.next=i),e.pending=i}function Uc(e,i,l){if((l&4194176)!==0){var u=i.lanes;u&=e.pendingLanes,l|=u,i.lanes=l,Nt(e,l)}}function Ir(e,i,l,u){i=e.memoizedState,l=l(u,i),l=l==null?i:Rl({},i,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}function Nc(e,i,l,u,f,p,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,p,_):i.prototype&&i.prototype.isPureReactComponent?!la(l,u)||!la(f,p):!0}function Oc(e,i,l,u){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==e&&$l.enqueueReplaceState(i,i.state,null)}function ii(e,i){var l=i;if("ref"in i){l={};for(var u in i)u!=="ref"&&(l[u]=i[u])}if(e=e.defaultProps){l===i&&(l=Rl({},l));for(var f in e)l[f]===void 0&&(l[f]=e[f])}return l}function ya(e,i){try{var l=e.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Dc(e,i,l){try{var u=e.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Kr(e,i,l){return l=zn(l),l.tag=3,l.payload={element:null},l.callback=function(){ya(e,i)},l}function Gc(e){return e=zn(e),e.tag=3,e}function Pc(e,i,l,u){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;e.payload=function(){return f(p)},e.callback=function(){Dc(i,l,u)}}var _=l.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){Dc(i,l,u),typeof f!="function"&&(Kn===null?Kn=new Set([this]):Kn.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function km(e,i,l,u,f){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=l.alternate,i!==null&&Ss(i,l,f,!0),l=Xe.current,l!==null){switch(l.tag){case 13:return ln===null?Sl():l.alternate===null&&jt===0&&(jt=3),l.flags&=-257,l.flags|=65536,l.lanes=f,u===Pa?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([u]):i.add(u),Cl(e,u,f)),!1;case 22:return l.flags|=65536,u===Pa?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([u]):l.add(u)),Cl(e,u,f)),!1}throw Error(r(435,l.tag))}return Cl(e,u,f),Sl(),!1}if(St)return i=Xe.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==ql&&(e=Error(r(422),{cause:u}),oe(z(e,l)))):(u!==ql&&(i=Error(r(423),{cause:u}),oe(z(i,l))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,u=z(u,l),f=Kr(e.stateNode,u,f),Rr(e,f),jt!==4&&(jt=2)),!1;var p=Error(r(520),{cause:u});if(p=z(p,l),Hs===null?Hs=[p]:Hs.push(p),jt!==4&&(jt=2),i===null)return!0;u=z(u,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,e=f&-f,l.lanes|=e,e=Kr(l.stateNode,u,e),Rr(l,e),!1;case 1:if(i=l.type,p=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Kn===null||!Kn.has(p))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Gc(f),Pc(f,e,l,u),Rr(l,f),!1}l=l.return}while(l!==null);return!1}function ae(e,i,l,u){i.child=e===null?_f(i,null,l,u):fi(i,e.child,l,u)}function Hc(e,i,l,u,f){l=l.render;var p=i.ref;if("ref"in u){var _={};for(var T in u)T!=="ref"&&(_[T]=u[T])}else _=u;return si(i),u=Nr(e,i,l,_,p,f),T=Or(),e!==null&&!ee?(Dr(e,i,f),gn(e,i,f)):(St&&T&&j(i),i.flags|=1,ae(e,i,u,f),i.child)}function Vc(e,i,l,u,f){if(e===null){var p=l.type;return typeof p=="function"&&!Tl(p)&&p.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=p,Lc(e,i,p,u,f)):(e=Ta(l.type,null,u,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(p=e.child,!nl(e,f)){var _=p.memoizedProps;if(l=l.compare,l=l!==null?l:la,l(_,u)&&e.ref===i.ref)return gn(e,i,f)}return i.flags|=1,e=Vn(p,u),e.ref=i.ref,e.return=i,i.child=e}function Lc(e,i,l,u,f){if(e!==null){var p=e.memoizedProps;if(la(p,u)&&e.ref===i.ref)if(ee=!1,i.pendingProps=u=p,nl(e,f))(e.flags&131072)!==0&&(ee=!0);else return i.lanes=e.lanes,gn(e,i,f)}return Qr(e,i,l,u,f)}function jc(e,i,l){var u=i.pendingProps,f=u.children,p=(i.stateNode._pendingVisibility&2)!==0,_=e!==null?e.memoizedState:null;if(bs(e,i),u.mode==="hidden"||p){if((i.flags&128)!==0){if(u=_!==null?_.baseLanes|l:l,e!==null){for(f=i.child=e.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;i.childLanes=p&~u}else i.childLanes=0,i.child=null;return Yc(e,i,u,l)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&_a(i,_!==null?_.cachePool:null),_!==null?Zu(i,_):Br(),Ju(i);else return i.lanes=i.childLanes=536870912,Yc(e,i,_!==null?_.baseLanes|l:l,l)}else _!==null?(_a(i,_.cachePool),Zu(i,_),On(),i.memoizedState=null):(e!==null&&_a(i,null),Br(),On());return ae(e,i,f,l),i.child}function Yc(e,i,l,u){var f=rl();return f=f===null?null:{parent:_n?Vt._currentValue:Vt._currentValue2,pool:f},i.memoizedState={baseLanes:l,cachePool:f},e!==null&&_a(i,null),Br(),Ju(i),e!==null&&Ss(e,i,u,!0),null}function bs(e,i){var l=i.ref;if(l===null)e!==null&&e.ref!==null&&(i.flags|=2097664);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(e===null||e.ref!==l)&&(i.flags|=2097664)}}function Qr(e,i,l,u,f){return si(i),l=Nr(e,i,l,u,void 0,f),u=Or(),e!==null&&!ee?(Dr(e,i,f),gn(e,i,f)):(St&&u&&j(i),i.flags|=1,ae(e,i,l,f),i.child)}function Xc(e,i,l,u,f,p){return si(i),i.updateQueue=null,l=tc(i,u,l,f),$u(e),u=Or(),e!==null&&!ee?(Dr(e,i,p),gn(e,i,p)):(St&&u&&j(i),i.flags|=1,ae(e,i,l,p),i.child)}function Fc(e,i,l,u,f){if(si(i),i.stateNode===null){var p=Vi,_=l.contextType;typeof _=="object"&&_!==null&&(p=ue(_)),p=new l(u,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=$l,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=u,p.state=i.memoizedState,p.refs={},Er(i),_=l.contextType,p.context=typeof _=="object"&&_!==null?ue(_):Vi,p.state=i.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(Ir(i,l,_,u),p.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(_=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),_!==p.state&&$l.enqueueReplaceState(p,p.state,null),ys(i,u,p,f),gs(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(e===null){p=i.stateNode;var T=i.memoizedProps,U=ii(l,T);p.props=U;var H=p.context,q=l.contextType;_=Vi,typeof q=="object"&&q!==null&&(_=ue(q));var K=l.getDerivedStateFromProps;q=typeof K=="function"||typeof p.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,q||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T||H!==_)&&Oc(i,p,u,_),Fn=!1;var W=i.memoizedState;p.state=W,ys(i,u,p,f),gs(),H=i.memoizedState,T||W!==H||Fn?(typeof K=="function"&&(Ir(i,l,K,u),H=i.memoizedState),(U=Fn||Nc(i,l,U,u,W,H,_))?(q||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=H),p.props=u,p.state=H,p.context=_,u=U):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{p=i.stateNode,wr(e,i),_=i.memoizedProps,q=ii(l,_),p.props=q,K=i.pendingProps,W=p.context,H=l.contextType,U=Vi,typeof H=="object"&&H!==null&&(U=ue(H)),T=l.getDerivedStateFromProps,(H=typeof T=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(_!==K||W!==U)&&Oc(i,p,u,U),Fn=!1,W=i.memoizedState,p.state=W,ys(i,u,p,f),gs();var lt=i.memoizedState;_!==K||W!==lt||Fn||e!==null&&e.dependencies!==null&&xa(e.dependencies)?(typeof T=="function"&&(Ir(i,l,T,u),lt=i.memoizedState),(q=Fn||Nc(i,l,q,u,W,lt,U)||e!==null&&e.dependencies!==null&&xa(e.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,lt,U),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,lt,U)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||_===e.memoizedProps&&W===e.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&W===e.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=lt),p.props=u,p.state=lt,p.context=U,u=q):(typeof p.componentDidUpdate!="function"||_===e.memoizedProps&&W===e.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&W===e.memoizedState||(i.flags|=1024),u=!1)}return p=u,bs(e,i),u=(i.flags&128)!==0,p||u?(p=i.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,e!==null&&u?(i.child=fi(i,e.child,null,f),i.child=fi(i,null,l,f)):ae(e,i,l,f),i.memoizedState=p.state,e=i.child):e=gn(e,i,f),e}function qc(e,i,l,u){return Jt(),i.flags|=256,ae(e,i,l,u),i.child}function Wr(e){return{baseLanes:e,cachePool:Zc()}}function Zr(e,i,l){return e=e!==null?e.childLanes&~l:0,i&&(e|=Fe),e}function kc(e,i,l){var u=i.pendingProps,f=!1,p=(i.flags&128)!==0,_;if((_=p)||(_=e!==null&&e.memoizedState===null?!1:($t.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,e===null){if(St){if(f?Nn(i):On(),St){var T=fe,U;(U=T)&&(T=uy(T,rn),T!==null?(i.memoizedState={dehydrated:T,treeContext:hi!==null?{id:bn,overflow:Sn}:null,retryLane:536870912},U=n(18,null,null,0),U.stateNode=T,U.return=i,i.child=U,ye=i,fe=null,U=!0):U=!1),U||ot(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Ll(T)?i.lanes=16:i.lanes=536870912,null;pn(i)}return T=u.children,u=u.fallback,f?(On(),f=i.mode,T=$r({mode:"hidden",children:T},f),u=oi(u,f,l,null),T.return=i,u.return=i,T.sibling=u,i.child=T,f=i.child,f.memoizedState=Wr(l),f.childLanes=Zr(e,_,l),i.memoizedState=to,u):(Nn(i),Jr(i,T))}if(U=e.memoizedState,U!==null&&(T=U.dehydrated,T!==null)){if(p)i.flags&256?(Nn(i),i.flags&=-257,i=tl(e,i,l)):i.memoizedState!==null?(On(),i.child=e.child,i.flags|=128,i=null):(On(),f=u.fallback,T=i.mode,u=$r({mode:"visible",children:u.children},T),f=oi(f,T,l,null),f.flags|=2,u.return=i,f.return=i,u.sibling=f,i.child=u,fi(i,e.child,null,l),u=i.child,u.memoizedState=Wr(l),u.childLanes=Zr(e,_,l),i.memoizedState=to,i=f);else if(Nn(i),Ll(T))_=ey(T).digest,u=Error(r(419)),u.stack="",u.digest=_,oe({value:u,source:null,stack:null}),i=tl(e,i,l);else if(ee||Ss(e,i,l,!1),_=(l&e.childLanes)!==0,ee||_){if(_=zt,_!==null){if(u=l&-l,(u&42)!==0)u=1;else switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=64;break;case 268435456:u=134217728;break;default:u=0}if(u=(u&(_.suspendedLanes|l))!==0?0:u,u!==0&&u!==U.retryLane)throw U.retryLane=u,Ke(e,u),ge(_,e,u),Sf}Vl(T)||Sl(),i=tl(e,i,l)}else Vl(T)?(i.flags|=128,i.child=e.child,i=sg.bind(null,e),ny(T,i),i=null):(e=U.treeContext,He&&(fe=ry(T),ye=i,St=!0,Ze=null,rn=!1,e!==null&&(Le[je++]=bn,Le[je++]=Sn,Le[je++]=hi,bn=e.id,Sn=e.overflow,hi=i)),i=Jr(i,u.children),i.flags|=4096);return i}return f?(On(),f=u.fallback,T=i.mode,U=e.child,p=U.sibling,u=Vn(U,{mode:"hidden",children:u.children}),u.subtreeFlags=U.subtreeFlags&31457280,p!==null?f=Vn(p,f):(f=oi(f,T,l,null),f.flags|=2),f.return=i,u.return=i,u.sibling=f,i.child=u,u=f,f=i.child,T=e.child.memoizedState,T===null?T=Wr(l):(U=T.cachePool,U!==null?(p=_n?Vt._currentValue:Vt._currentValue2,U=U.parent!==p?{parent:p,pool:p}:U):U=Zc(),T={baseLanes:T.baseLanes|l,cachePool:U}),f.memoizedState=T,f.childLanes=Zr(e,_,l),i.memoizedState=to,u):(Nn(i),l=e.child,e=l.sibling,l=Vn(l,{mode:"visible",children:u.children}),l.return=i,l.sibling=null,e!==null&&(_=i.deletions,_===null?(i.deletions=[e],i.flags|=16):_.push(e)),i.child=l,i.memoizedState=null,l)}function Jr(e,i){return i=$r({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function $r(e,i){return Gh(e,i,0,null)}function tl(e,i,l){return fi(i,e.child,null,l),e=Jr(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Ic(e,i,l){e.lanes|=i;var u=e.alternate;u!==null&&(u.lanes|=i),il(e.return,i,l)}function el(e,i,l,u,f){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:f}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=l,p.tailMode=f)}function Kc(e,i,l){var u=i.pendingProps,f=u.revealOrder,p=u.tail;if(ae(e,i,u.children,l),u=$t.current,(u&2)!==0)u=u&1|2,i.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ic(e,l,i);else if(e.tag===19)Ic(e,l,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}switch(R($t,u),f){case"forwards":for(l=i.child,f=null;l!==null;)e=l.alternate,e!==null&&ha(e)===null&&(f=l),l=l.sibling;l=f,l===null?(f=i.child,i.child=null):(f=l.sibling,l.sibling=null),el(i,!1,f,l,p);break;case"backwards":for(l=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&ha(e)===null){i.child=f;break}e=f.sibling,f.sibling=l,l=f,f=e}el(i,!0,l,null,p);break;case"together":el(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function gn(e,i,l){if(e!==null&&(i.dependencies=e.dependencies),In|=i.lanes,(l&i.childLanes)===0)if(e!==null){if(Ss(e,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,l=Vn(e,e.pendingProps),i.child=l,l.return=i;e.sibling!==null;)e=e.sibling,l=l.sibling=Vn(e,e.pendingProps),l.return=i;l.sibling=null}return i.child}function nl(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&xa(e)))}function Im(e,i,l){switch(i.tag){case 3:J(i,i.stateNode.containerInfo),Dn(i,Vt,e.memoizedState.cache),Jt();break;case 27:case 5:_t(i);break;case 4:J(i,i.stateNode.containerInfo);break;case 10:Dn(i,i.type,i.memoizedProps.value);break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Nn(i),i.flags|=128,null):(l&i.child.childLanes)!==0?kc(e,i,l):(Nn(i),e=gn(e,i,l),e!==null?e.sibling:null);Nn(i);break;case 19:var f=(e.flags&128)!==0;if(u=(l&i.childLanes)!==0,u||(Ss(e,i,l,!1),u=(l&i.childLanes)!==0),f){if(u)return Kc(e,i,l);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),R($t,$t.current),u)break;return null;case 22:case 23:return i.lanes=0,jc(e,i,l);case 24:Dn(i,Vt,e.memoizedState.cache)}return gn(e,i,l)}function Qc(e,i,l){if(e!==null)if(e.memoizedProps!==i.pendingProps)ee=!0;else{if(!nl(e,l)&&(i.flags&128)===0)return ee=!1,Im(e,i,l);ee=(e.flags&131072)!==0}else ee=!1,St&&(i.flags&1048576)!==0&&L(i,Na,i.index);switch(i.lanes=0,i.tag){case 16:t:{e=i.pendingProps;var u=i.elementType,f=u._init;if(u=f(u._payload),i.type=u,typeof u=="function")Tl(u)?(e=ii(u,e),i.tag=1,i=Fc(null,i,u,e,l)):(i.tag=0,i=Qr(null,i,u,e,l));else{if(u!=null){if(f=u.$$typeof,f===zl){i.tag=11,i=Hc(null,i,u,e,l);break t}else if(f===Ol){i.tag=14,i=Vc(null,i,u,e,l);break t}}throw i=c(u)||u,Error(r(306,i,""))}}return i;case 0:return Qr(e,i,i.type,i.pendingProps,l);case 1:return u=i.type,f=ii(u,i.pendingProps),Fc(e,i,u,f,l);case 3:t:{if(J(i,i.stateNode.containerInfo),e===null)throw Error(r(387));var p=i.pendingProps;f=i.memoizedState,u=f.element,wr(e,i),ys(i,p,null,l);var _=i.memoizedState;if(p=_.cache,Dn(i,Vt,p),p!==f.cache&&sl(i,[Vt],l,!0),gs(),p=_.element,He&&f.isDehydrated)if(f={element:p,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=qc(e,i,p,l);break t}else if(p!==u){u=z(Error(r(424)),i),oe(u),i=qc(e,i,p,l);break t}else for(He&&(fe=ay(i.stateNode.containerInfo),ye=i,St=!0,Ze=null,rn=!0),l=_f(i,null,p,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Jt(),p===u){i=gn(e,i,l);break t}ae(e,i,p,l)}i=i.child}return i;case 26:if(Ve)return bs(e,i),e===null?(l=cf(i.type,null,i.pendingProps,null))?i.memoizedState=l:St||(i.stateNode=by(i.type,i.pendingProps,Xn.current,i)):i.memoizedState=cf(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:if(he)return _t(i),e===null&&he&&St&&(u=i.stateNode=gf(i.type,i.pendingProps,Xn.current,re.current,!1),ye=i,rn=!0,fe=lf(u)),u=i.pendingProps.children,e!==null||St?ae(e,i,u,l):i.child=fi(i,null,u,l),bs(e,i),i.child;case 5:return e===null&&St&&(xy(i.type,i.pendingProps,re.current),(f=u=fe)&&(u=ly(u,i.type,i.pendingProps,rn),u!==null?(i.stateNode=u,ye=i,fe=lf(u),rn=!1,f=!0):f=!1),f||ot(i)),_t(i),f=i.type,p=i.pendingProps,_=e!==null?e.memoizedProps:null,u=p.children,wa(f,p)?u=null:_!==null&&wa(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Nr(e,i,jm,null,null,l),_n?ci._currentValue=f:ci._currentValue2=f),bs(e,i),ae(e,i,u,l),i.child;case 6:return e===null&&St&&(vy(i.pendingProps,re.current),(e=l=fe)&&(l=oy(l,i.pendingProps,rn),l!==null?(i.stateNode=l,ye=i,fe=null,e=!0):e=!1),e||ot(i)),null;case 13:return kc(e,i,l);case 4:return J(i,i.stateNode.containerInfo),u=i.pendingProps,e===null?i.child=fi(i,null,u,l):ae(e,i,u,l),i.child;case 11:return Hc(e,i,i.type,i.pendingProps,l);case 7:return ae(e,i,i.pendingProps,l),i.child;case 8:return ae(e,i,i.pendingProps.children,l),i.child;case 12:return ae(e,i,i.pendingProps.children,l),i.child;case 10:return u=i.pendingProps,Dn(i,i.type,u.value),ae(e,i,u.children,l),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,si(i),f=ue(f),u=u(f),i.flags|=1,ae(e,i,u,l),i.child;case 14:return Vc(e,i,i.type,i.pendingProps,l);case 15:return Lc(e,i,i.type,i.pendingProps,l);case 19:return Kc(e,i,l);case 22:return jc(e,i,l);case 24:return si(i),u=ue(Vt),e===null?(f=rl(),f===null&&(f=zt,p=al(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=l),f=p),i.memoizedState={parent:u,cache:f},Er(i),Dn(i,Vt,f)):((e.lanes&l)!==0&&(wr(e,i),ys(i,null,null,l),gs()),f=e.memoizedState,p=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Dn(i,Vt,u)):(u=p.cache,Dn(i,Vt,u),u!==f.cache&&sl(i,[Vt],l,!0))),ae(e,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Dn(e,i,l){_n?(R(ja,i._currentValue),i._currentValue=l):(R(ja,i._currentValue2),i._currentValue2=l)}function yn(e){var i=ja.current;_n?e._currentValue=i:e._currentValue2=i,w(ja)}function il(e,i,l){for(;e!==null;){var u=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),e===l)break;e=e.return}}function sl(e,i,l,u){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var p=f.dependencies;if(p!==null){var _=f.child;p=p.firstContext;t:for(;p!==null;){var T=p;p=f;for(var U=0;U<i.length;U++)if(T.context===i[U]){p.lanes|=l,T=p.alternate,T!==null&&(T.lanes|=l),il(p.return,l,e),u||(_=null);break t}p=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=l,p=_.alternate,p!==null&&(p.lanes|=l),il(_,l,e),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===e){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Ss(e,i,l,u){e=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=f.type;ze(f.pendingProps.value,_.value)||(e!==null?e.push(T):e=[T])}}else if(f===Oa.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(ci):e=[ci])}f=f.return}e!==null&&sl(i,e,l,u),i.flags|=262144}function xa(e){for(e=e.firstContext;e!==null;){var i=e.context;if(!ze(_n?i._currentValue:i._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function si(e){gi=e,An=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ue(e){return Wc(gi,e)}function va(e,i){return gi===null&&si(e),Wc(e,i)}function Wc(e,i){var l=_n?i._currentValue:i._currentValue2;if(i={context:i,memoizedValue:l,next:null},An===null){if(e===null)throw Error(r(308));An=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else An=An.next=i;return l}function al(){return{controller:new Hy,data:new Map,refCount:0}}function As(e){e.refCount--,e.refCount===0&&Vy(Ly,function(){e.controller.abort()})}function rl(){var e=yi.current;return e!==null?e:zt.pooledCache}function _a(e,i){i===null?R(yi,yi.current):R(yi,i.pool)}function Zc(){var e=rl();return e===null?null:{parent:_n?Vt._currentValue:Vt._currentValue2,pool:e}}function Ce(e){e.flags|=4}function Jc(e,i){if(e!==null&&e.child===i.child)return!1;if((i.flags&16)!==0)return!0;for(e=i.child;e!==null;){if((e.flags&13878)!==0||(e.subtreeFlags&13878)!==0)return!0;e=e.sibling}return!1}function ll(e,i,l,u){if(ce)for(l=i.child;l!==null;){if(l.tag===5||l.tag===6)Pl(e,l.stateNode);else if(!(l.tag===4||he&&l.tag===27)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return;l=l.return}l.sibling.return=l.return,l=l.sibling}else if(Yn)for(var f=i.child;f!==null;){if(f.tag===5){var p=f.stateNode;l&&u&&(p=sf(p,f.type,f.memoizedProps)),Pl(e,p)}else if(f.tag===6)p=f.stateNode,l&&u&&(p=af(p,f.memoizedProps)),Pl(e,p);else if(f.tag!==4){if(f.tag===22&&f.memoizedState!==null)p=f.child,p!==null&&(p.return=f),ll(e,f,!0,!0);else if(f.child!==null){f.child.return=f,f=f.child;continue}}if(f===i)break;for(;f.sibling===null;){if(f.return===null||f.return===i)return;f=f.return}f.sibling.return=f.return,f=f.sibling}}function $c(e,i,l,u){if(Yn)for(var f=i.child;f!==null;){if(f.tag===5){var p=f.stateNode;l&&u&&(p=sf(p,f.type,f.memoizedProps)),ef(e,p)}else if(f.tag===6)p=f.stateNode,l&&u&&(p=af(p,f.memoizedProps)),ef(e,p);else if(f.tag!==4){if(f.tag===22&&f.memoizedState!==null)p=f.child,p!==null&&(p.return=f),$c(e,f,!(f.memoizedProps!==null&&f.memoizedProps.mode==="manual"),!0);else if(f.child!==null){f.child.return=f,f=f.child;continue}}if(f===i)break;for(;f.sibling===null;){if(f.return===null||f.return===i)return;f=f.return}f.sibling.return=f.return,f=f.sibling}}function th(e,i){if(Yn&&Jc(e,i)){e=i.stateNode;var l=e.containerInfo,u=tf();$c(u,i,!1,!1),e.pendingChildren=u,Ce(i),ty(l,u)}}function ol(e,i,l,u){if(ce)e.memoizedProps!==u&&Ce(i);else if(Yn){var f=e.stateNode,p=e.memoizedProps;if((e=Jc(e,i))||p!==u){var _=re.current;p=$g(f,l,p,u,!e,null),p===f?i.stateNode=f:(Kh(p,l,u,_)&&Ce(i),i.stateNode=p,e?ll(p,i,!1,!1):Ce(i))}else i.stateNode=f}}function ul(e,i,l){if(Eg(i,l)){if(e.flags|=16777216,!Zh(i,l))if(Th())e.flags|=8192;else throw Ii=Pa,Zl}else e.flags&=-16777217}function eh(e,i){if(Ay(i)){if(e.flags|=16777216,!mf(i))if(Th())e.flags|=8192;else throw Ii=Pa,Zl}else e.flags&=-16777217}function ba(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?$():536870912,e.lanes|=i,ts|=i)}function Cs(e,i){if(!St)switch(e.tailMode){case"hidden":i=e.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function Gt(e){var i=e.alternate!==null&&e.alternate.child===e.child,l=0,u=0;if(i)for(var f=e.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags&31457280,u|=f.flags&31457280,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=u,e.childLanes=l,i}function Km(e,i,l){var u=i.pendingProps;switch(k(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(i),null;case 1:return Gt(i),null;case 3:return l=i.stateNode,u=null,e!==null&&(u=e.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),yn(Vt),Z(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(pe(i)?Ce(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ze!==null&&(_l(Ze),Ze=null))),th(e,i),Gt(i),null;case 26:if(Ve){l=i.type;var f=i.memoizedState;return e===null?(Ce(i),f!==null?(Gt(i),eh(i,f)):(Gt(i),ul(i,l,u))):f?f!==e.memoizedState?(Ce(i),Gt(i),eh(i,f)):(Gt(i),i.flags&=-16777217):(ce?e.memoizedProps!==u&&Ce(i):ol(e,i,l,u),Gt(i),ul(i,l,u)),null}case 27:if(he){if(gt(i),l=Xn.current,f=i.type,e!==null&&i.stateNode!=null)ce?e.memoizedProps!==u&&Ce(i):ol(e,i,f,u);else{if(!u){if(i.stateNode===null)throw Error(r(166));return Gt(i),null}e=re.current,pe(i)?Dt(i,e):(e=gf(f,u,l,e,!0),i.stateNode=e,Ce(i))}return Gt(i),null}case 5:if(gt(i),l=i.type,e!==null&&i.stateNode!=null)ol(e,i,l,u);else{if(!u){if(i.stateNode===null)throw Error(r(166));return Gt(i),null}e=re.current,pe(i)?Dt(i,e):(f=_g(l,u,Xn.current,e,i),ll(f,i,!1,!1),i.stateNode=f,Kh(f,l,u,e)&&Ce(i))}return Gt(i),ul(i,i.type,i.pendingProps),null;case 6:if(e&&i.stateNode!=null)l=e.memoizedProps,ce?l!==u&&Ce(i):Yn&&(l!==u?(i.stateNode=Qh(u,Xn.current,re.current,i),Ce(i)):i.stateNode=e.stateNode);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(e=Xn.current,l=re.current,pe(i)){if(!He)throw Error(r(176));if(e=i.stateNode,l=i.memoizedProps,u=null,f=ye,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}hy(e,l,i,u)||ot(i)}else i.stateNode=Qh(u,e,l,i)}return Gt(i),null;case 13:if(u=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=pe(i),u!==null&&u.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(!He)throw Error(r(344));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));fy(f,i)}else Jt(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Gt(i),f=!1}else Ze!==null&&(_l(Ze),Ze=null),f=!0;if(!f)return i.flags&256?(pn(i),i):(pn(i),null)}if(pn(i),(i.flags&128)!==0)return i.lanes=l,i;if(l=u!==null,e=e!==null&&e.memoizedState!==null,l){u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return l!==e&&l&&(i.child.flags|=8192),ba(i,i.updateQueue),Gt(i),null;case 4:return Z(),th(e,i),e===null&&Ag(i.stateNode.containerInfo),Gt(i),null;case 10:return yn(i.type),Gt(i),null;case 19:if(w($t),f=i.memoizedState,f===null)return Gt(i),null;if(u=(i.flags&128)!==0,p=f.rendering,p===null)if(u)Cs(f,!1);else{if(jt!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(p=ha(e),p!==null){for(i.flags|=128,Cs(f,!1),e=p.updateQueue,i.updateQueue=e,ba(i,e),i.subtreeFlags=0,e=l,l=i.child;l!==null;)Dh(l,e),l=l.sibling;return R($t,$t.current&1|2),i.child}e=e.sibling}f.tail!==null&&We()>Vs&&(i.flags|=128,u=!0,Cs(f,!1),i.lanes=4194304)}else{if(!u)if(e=ha(p),e!==null){if(i.flags|=128,u=!0,e=e.updateQueue,i.updateQueue=e,ba(i,e),Cs(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!St)return Gt(i),null}else 2*We()-f.renderingStartTime>Vs&&l!==536870912&&(i.flags|=128,u=!0,Cs(f,!1),i.lanes=4194304);f.isBackwards?(p.sibling=i.child,i.child=p):(e=f.last,e!==null?e.sibling=p:i.child=p,f.last=p)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=We(),i.sibling=null,e=$t.current,R($t,u?e&1|2:e&1),i):(Gt(i),null);case 22:case 23:return pn(i),zr(),u=i.memoizedState!==null,e!==null?e.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(l&536870912)!==0&&(i.flags&128)===0&&(Gt(i),i.subtreeFlags&6&&(i.flags|=8192)):Gt(i),l=i.updateQueue,l!==null&&ba(i,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==l&&(i.flags|=2048),e!==null&&w(yi),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),yn(Vt),Gt(i),null;case 25:return null}throw Error(r(156,i.tag))}function Qm(e,i){switch(k(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return yn(Vt),Z(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return gt(i),null;case 13:if(pn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Jt()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return w($t),null;case 4:return Z(),null;case 10:return yn(i.type),null;case 22:case 23:return pn(i),zr(),e!==null&&w(yi),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return yn(Vt),null;case 25:return null;default:return null}}function nh(e,i){switch(k(i),i.tag){case 3:yn(Vt),Z();break;case 26:case 27:case 5:gt(i);break;case 4:Z();break;case 13:pn(i);break;case 19:w($t);break;case 10:yn(i.type);break;case 22:case 23:pn(i),zr(),e!==null&&w(yi);break;case 24:yn(Vt)}}function Ts(e,i){try{var l=i.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var f=u.next;l=f;do{if((l.tag&e)===e){u=void 0;var p=l.create,_=l.inst;u=p(),_.destroy=u}l=l.next}while(l!==f)}}catch(T){Mt(i,i.return,T)}}function Gn(e,i,l){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&e)===e){var _=u.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=i;var U=l;try{T()}catch(H){Mt(f,U,H)}}}u=u.next}while(u!==p)}}catch(H){Mt(i,i.return,H)}}function ih(e){var i=e.updateQueue;if(i!==null){var l=e.stateNode;try{qu(i,l)}catch(u){Mt(e,e.return,u)}}}function sh(e,i,l){l.props=ii(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(u){Mt(e,i,u)}}function ai(e,i){try{var l=e.ref;if(l!==null){var u=e.stateNode;switch(e.tag){case 26:case 27:case 5:var f=ws(u);break;default:f=u}typeof l=="function"?e.refCleanup=l(f):l.current=f}}catch(p){Mt(e,i,p)}}function Te(e,i){var l=e.ref,u=e.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(f){Mt(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){Mt(e,i,f)}else l.current=null}function ah(e){var i=e.type,l=e.memoizedProps,u=e.stateNode;try{Yg(u,i,l,e)}catch(f){Mt(e,e.return,f)}}function rh(e,i,l){try{Xg(e.stateNode,e.type,l,i,e)}catch(u){Mt(e,e.return,u)}}function lh(e){return e.tag===5||e.tag===3||(Ve?e.tag===26:!1)||(he?e.tag===27:!1)||e.tag===4}function cl(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||lh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&(!he||e.tag!==27)&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hl(e,i,l){var u=e.tag;if(u===5||u===6)e=e.stateNode,i?qg(l,e,i):Lg(l,e);else if(!(u===4||he&&u===27)&&(e=e.child,e!==null))for(hl(e,i,l),e=e.sibling;e!==null;)hl(e,i,l),e=e.sibling}function Sa(e,i,l){var u=e.tag;if(u===5||u===6)e=e.stateNode,i?Fg(l,e,i):Vg(l,e);else if(!(u===4||he&&u===27)&&(e=e.child,e!==null))for(Sa(e,i,l),e=e.sibling;e!==null;)Sa(e,i,l),e=e.sibling}function oh(e,i,l){e=e.containerInfo;try{nf(e,l)}catch(u){Mt(i,i.return,u)}}function Wm(e,i){for(xg(e.containerInfo),ne=i;ne!==null;)if(e=ne,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,ne=i;else for(;ne!==null;){e=ne;var l=e.alternate;switch(i=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&l!==null){i=void 0;var u=e,f=l.memoizedProps;l=l.memoizedState;var p=u.stateNode;try{var _=ii(u.type,f,u.elementType===u.type);i=p.getSnapshotBeforeUpdate(_,l),p.__reactInternalSnapshotBeforeUpdate=i}catch(T){Mt(u,u.return,T)}}break;case 3:(i&1024)!==0&&ce&&Jg(e.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=e.sibling,i!==null){i.return=e.return,ne=i;break}ne=e.return}return _=Tf,Tf=!1,_}function uh(e,i,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:xn(e,l),u&4&&Ts(5,l);break;case 1:if(xn(e,l),u&4)if(e=l.stateNode,i===null)try{e.componentDidMount()}catch(T){Mt(l,l.return,T)}else{var f=ii(l.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(T){Mt(l,l.return,T)}}u&64&&ih(l),u&512&&ai(l,l.return);break;case 3:if(xn(e,l),u&64&&(u=l.updateQueue,u!==null)){if(e=null,l.child!==null)switch(l.child.tag){case 27:case 5:e=ws(l.child.stateNode);break;case 1:e=l.child.stateNode}try{qu(u,e)}catch(T){Mt(l,l.return,T)}}break;case 26:if(Ve){xn(e,l),u&512&&ai(l,l.return);break}case 27:case 5:xn(e,l),i===null&&u&4&&ah(l),u&512&&ai(l,l.return);break;case 12:xn(e,l);break;case 13:xn(e,l),u&4&&hh(e,l);break;case 22:if(f=l.memoizedState!==null||Cn,!f){i=i!==null&&i.memoizedState!==null||Lt;var p=Cn,_=Lt;Cn=f,(Lt=i)&&!_?Pn(e,l,(l.subtreeFlags&8772)!==0):xn(e,l),Cn=p,Lt=_}u&512&&(l.memoizedProps.mode==="manual"?ai(l,l.return):Te(l,l.return));break;default:xn(e,l)}}function ch(e){var i=e.alternate;i!==null&&(e.alternate=null,ch(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Mg(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Qe(e,i,l){for(l=l.child;l!==null;)fl(e,i,l),l=l.sibling}function fl(e,i,l){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(zs,l)}catch{}switch(l.tag){case 26:if(Ve){Lt||Te(l,i),Qe(e,i,l),l.memoizedState?ff(l.memoizedState):l.stateNode&&pf(l.stateNode);break}case 27:if(he){Lt||Te(l,i);var u=Kt,f=Ue;Kt=l.stateNode,Qe(e,i,l),Ey(l.stateNode),Kt=u,Ue=f;break}case 5:Lt||Te(l,i);case 6:if(ce){if(u=Kt,f=Ue,Kt=null,Qe(e,i,l),Kt=u,Ue=f,Kt!==null)if(Ue)try{Ig(Kt,l.stateNode)}catch(p){Mt(l,i,p)}else try{kg(Kt,l.stateNode)}catch(p){Mt(l,i,p)}}else Qe(e,i,l);break;case 18:ce&&Kt!==null&&(Ue?yy(Kt,l.stateNode):gy(Kt,l.stateNode));break;case 4:ce?(u=Kt,f=Ue,Kt=l.stateNode.containerInfo,Ue=!0,Qe(e,i,l),Kt=u,Ue=f):(Yn&&oh(l.stateNode,l,tf()),Qe(e,i,l));break;case 0:case 11:case 14:case 15:Lt||Gn(2,l,i),Lt||Gn(4,l,i),Qe(e,i,l);break;case 1:Lt||(Te(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"&&sh(l,i,u)),Qe(e,i,l);break;case 21:Qe(e,i,l);break;case 22:Lt||Te(l,i),Lt=(u=Lt)||l.memoizedState!==null,Qe(e,i,l),Lt=u;break;default:Qe(e,i,l)}}function hh(e,i){if(He&&i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{my(e)}catch(l){Mt(i,i.return,l)}}function Zm(e){switch(e.tag){case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Cf),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Cf),i;default:throw Error(r(435,e.tag))}}function dl(e,i){var l=Zm(e);i.forEach(function(u){var f=ag.bind(null,e,u);l.has(u)||(l.add(u),u.then(f,f))})}function _e(e,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var f=l[u],p=e,_=i;if(ce){var T=_;t:for(;T!==null;){switch(T.tag){case 27:case 5:Kt=T.stateNode,Ue=!1;break t;case 3:Kt=T.stateNode.containerInfo,Ue=!0;break t;case 4:Kt=T.stateNode.containerInfo,Ue=!0;break t}T=T.return}if(Kt===null)throw Error(r(160));fl(p,_,f),Kt=null,Ue=!1}else fl(p,_,f);p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)fh(i,e),i=i.sibling}function fh(e,i){var l=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_e(i,e),Me(e),u&4&&(Gn(3,e,e.return),Ts(3,e),Gn(5,e,e.return));break;case 1:_e(i,e),Me(e),u&512&&(Lt||l===null||Te(l,l.return)),u&64&&Cn&&(e=e.updateQueue,e!==null&&(u=e.callbacks,u!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:if(Ve){var f=Je;_e(i,e),Me(e),u&512&&(Lt||l===null||Te(l,l.return)),u&4&&(u=l!==null?l.memoizedState:null,i=e.memoizedState,l===null?i===null?e.stateNode===null?e.stateNode=_y(f,e.type,e.memoizedProps,e):df(f,e.type,e.stateNode):e.stateNode=hf(f,i,e.memoizedProps):u!==i?(u===null?l.stateNode!==null&&pf(l.stateNode):ff(u),i===null?df(f,e.type,e.stateNode):hf(f,i,e.memoizedProps)):i===null&&e.stateNode!==null&&rh(e,e.memoizedProps,l.memoizedProps));break}case 27:if(he&&u&4&&e.alternate===null){f=e.stateNode;var p=e.memoizedProps;try{Ty(f),My(e.type,p,f,e)}catch(q){Mt(e,e.return,q)}}case 5:if(_e(i,e),Me(e),u&512&&(Lt||l===null||Te(l,l.return)),ce){if(e.flags&32){i=e.stateNode;try{$h(i)}catch(q){Mt(e,e.return,q)}}u&4&&e.stateNode!=null&&(i=e.memoizedProps,rh(e,i,l!==null?l.memoizedProps:i)),u&1024&&(eo=!0)}break;case 6:if(_e(i,e),Me(e),u&4&&ce){if(e.stateNode===null)throw Error(r(162));u=e.memoizedProps,l=l!==null?l.memoizedProps:u,i=e.stateNode;try{jg(i,l,u)}catch(q){Mt(e,e.return,q)}}break;case 3:if(Ve?(Sy(),f=Je,Je=jl(i.containerInfo),_e(i,e),Je=f):_e(i,e),Me(e),u&4){if(ce&&He&&l!==null&&l.memoizedState.isDehydrated)try{py(i.containerInfo)}catch(q){Mt(e,e.return,q)}if(Yn){u=i.containerInfo,l=i.pendingChildren;try{nf(u,l)}catch(q){Mt(e,e.return,q)}}}eo&&(eo=!1,dh(e));break;case 4:Ve?(l=Je,Je=jl(e.stateNode.containerInfo),_e(i,e),Me(e),Je=l):(_e(i,e),Me(e)),u&4&&Yn&&oh(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:_e(i,e),Me(e);break;case 13:_e(i,e),Me(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(ao=We()),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,dl(e,u)));break;case 22:u&512&&(Lt||l===null||Te(l,l.return)),f=e.memoizedState!==null;var _=l!==null&&l.memoizedState!==null,T=Cn,U=Lt;if(Cn=T||f,Lt=U||_,_e(i,e),Lt=U,Cn=T,Me(e),i=e.stateNode,i._current=e,i._visibility&=-3,i._visibility|=i._pendingVisibility&2,u&8192&&(i._visibility=f?i._visibility&-2:i._visibility|1,f&&(i=Cn||Lt,l===null||_||i||zi(e)),ce&&(e.memoizedProps===null||e.memoizedProps.mode!=="manual"))){t:if(l=null,ce)for(i=e;;){if(i.tag===5||Ve&&i.tag===26||he&&i.tag===27){if(l===null){_=l=i;try{p=_.stateNode,f?Kg(p):Wg(_.stateNode,_.memoizedProps)}catch(q){Mt(_,_.return,q)}}}else if(i.tag===6){if(l===null){_=i;try{var H=_.stateNode;f?Qg(H):Zg(H,_.memoizedProps)}catch(q){Mt(_,_.return,q)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}}u&4&&(u=e.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,dl(e,l))));break;case 19:_e(i,e),Me(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,dl(e,u)));break;case 21:break;default:_e(i,e),Me(e)}}function Me(e){var i=e.flags;if(i&2){try{if(ce&&(!he||e.tag!==27)){t:{for(var l=e.return;l!==null;){if(lh(l)){var u=l;break t}l=l.return}throw Error(r(160))}switch(u.tag){case 27:if(he){var f=u.stateNode,p=cl(e);Sa(e,p,f);break}case 5:var _=u.stateNode;u.flags&32&&($h(_),u.flags&=-33);var T=cl(e);Sa(e,T,_);break;case 3:case 4:var U=u.stateNode.containerInfo,H=cl(e);hl(e,H,U);break;default:throw Error(r(161))}}}catch(q){Mt(e,e.return,q)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function dh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;dh(i),i.tag===5&&i.flags&1024&&Bg(i.stateNode),e=e.sibling}}function xn(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)uh(e,i.alternate,i),i=i.sibling}function zi(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Gn(4,i,i.return),zi(i);break;case 1:Te(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&sh(i,i.return,l),zi(i);break;case 26:case 27:case 5:Te(i,i.return),zi(i);break;case 22:Te(i,i.return),i.memoizedState===null&&zi(i);break;default:zi(i)}e=e.sibling}}function Pn(e,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=e,p=i,_=p.flags;switch(p.tag){case 0:case 11:case 15:Pn(f,p,l),Ts(4,p);break;case 1:if(Pn(f,p,l),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){Mt(u,u.return,H)}if(u=p,f=u.updateQueue,f!==null){var T=u.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)Fu(U[f],T)}catch(H){Mt(u,u.return,H)}}l&&_&64&&ih(p),ai(p,p.return);break;case 26:case 27:case 5:Pn(f,p,l),l&&u===null&&_&4&&ah(p),ai(p,p.return);break;case 12:Pn(f,p,l);break;case 13:Pn(f,p,l),l&&_&4&&hh(f,p);break;case 22:p.memoizedState===null&&Pn(f,p,l),ai(p,p.return);break;default:Pn(f,p,l)}i=i.sibling}}function pl(e,i){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&As(l))}function ml(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&As(e))}function Hn(e,i,l,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ph(e,i,l,u),i=i.sibling}function ph(e,i,l,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Hn(e,i,l,u),f&2048&&Ts(9,i);break;case 3:Hn(e,i,l,u),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&As(e)));break;case 12:if(f&2048){Hn(e,i,l,u),e=i.stateNode;try{var p=i.memoizedProps,_=p.id,T=p.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(U){Mt(i,i.return,U)}}else Hn(e,i,l,u);break;case 23:break;case 22:p=i.stateNode,i.memoizedState!==null?p._visibility&4?Hn(e,i,l,u):Ms(e,i):p._visibility&4?Hn(e,i,l,u):(p._visibility|=4,Ui(e,i,l,u,(i.subtreeFlags&10256)!==0)),f&2048&&pl(i.alternate,i);break;case 24:Hn(e,i,l,u),f&2048&&ml(i.alternate,i);break;default:Hn(e,i,l,u)}}function Ui(e,i,l,u,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var p=e,_=i,T=l,U=u,H=_.flags;switch(_.tag){case 0:case 11:case 15:Ui(p,_,T,U,f),Ts(8,_);break;case 23:break;case 22:var q=_.stateNode;_.memoizedState!==null?q._visibility&4?Ui(p,_,T,U,f):Ms(p,_):(q._visibility|=4,Ui(p,_,T,U,f)),f&&H&2048&&pl(_.alternate,_);break;case 24:Ui(p,_,T,U,f),f&&H&2048&&ml(_.alternate,_);break;default:Ui(p,_,T,U,f)}i=i.sibling}}function Ms(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=e,u=i,f=u.flags;switch(u.tag){case 22:Ms(l,u),f&2048&&pl(u.alternate,u);break;case 24:Ms(l,u),f&2048&&ml(u.alternate,u);break;default:Ms(l,u)}i=i.sibling}}function ri(e){if(e.subtreeFlags&Ji)for(e=e.child;e!==null;)mh(e),e=e.sibling}function mh(e){switch(e.tag){case 26:ri(e),e.flags&Ji&&(e.memoizedState!==null?Cy(Je,e.memoizedState,e.memoizedProps):Jh(e.type,e.memoizedProps));break;case 5:ri(e),e.flags&Ji&&Jh(e.type,e.memoizedProps);break;case 3:case 4:if(Ve){var i=Je;Je=jl(e.stateNode.containerInfo),ri(e),Je=i}else ri(e);break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Ji,Ji=16777216,ri(e),Ji=i):ri(e));break;default:ri(e)}}function gh(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Es(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];ne=u,xh(u,e)}gh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)yh(e),e=e.sibling}function yh(e){switch(e.tag){case 0:case 11:case 15:Es(e),e.flags&2048&&Gn(9,e,e.return);break;case 3:Es(e);break;case 12:Es(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&4&&(e.return===null||e.return.tag!==13)?(i._visibility&=-5,Aa(e)):Es(e);break;default:Es(e)}}function Aa(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];ne=u,xh(u,e)}gh(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Gn(8,i,i.return),Aa(i);break;case 22:l=i.stateNode,l._visibility&4&&(l._visibility&=-5,Aa(i));break;default:Aa(i)}e=e.sibling}}function xh(e,i){for(;ne!==null;){var l=ne;switch(l.tag){case 0:case 11:case 15:Gn(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:As(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,ne=u;else t:for(l=e;ne!==null;){u=ne;var f=u.sibling,p=u.return;if(ch(u),u===l){ne=null;break t}if(f!==null){f.return=p,ne=f;break t}ne=p}}}function gl(e){var i=Wh(e);if(i!=null){if(typeof i.memoizedProps["data-testname"]!="string")throw Error(r(364));return i}if(e=Ng(e),e===null)throw Error(r(362));return e.stateNode.current}function yl(e,i){var l=e.tag;switch(i.$$typeof){case Ya:if(e.type===i.value)return!0;break;case Xa:t:{for(i=i.value,e=[e,0],l=0;l<e.length;){var u=e[l++],f=u.tag,p=e[l++],_=i[p];if(f!==5&&f!==26&&f!==27||!Bs(u)){for(;_!=null&&yl(u,_);)p++,_=i[p];if(p===i.length){i=!0;break t}else for(u=u.child;u!==null;)e.push(u,p),u=u.sibling}}i=!1}return i;case Fa:if((l===5||l===26||l===27)&&Gg(e.stateNode,i.value))return!0;break;case ka:if((l===5||l===6||l===26||l===27)&&(e=Dg(e),e!==null&&0<=e.indexOf(i.value)))return!0;break;case qa:if((l===5||l===26||l===27)&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===i.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function xl(e){switch(e.$$typeof){case Ya:return"<"+(c(e.value)||"Unknown")+">";case Xa:return":has("+(xl(e)||"")+")";case Fa:return'[role="'+e.value+'"]';case ka:return'"'+e.value+'"';case qa:return'[data-testname="'+e.value+'"]';default:throw Error(r(365))}}function vh(e,i){var l=[];e=[e,0];for(var u=0;u<e.length;){var f=e[u++],p=f.tag,_=e[u++],T=i[_];if(p!==5&&p!==26&&p!==27||!Bs(f)){for(;T!=null&&yl(f,T);)_++,T=i[_];if(_===i.length)l.push(f);else for(f=f.child;f!==null;)e.push(f,_),f=f.sibling}}return l}function vl(e,i){if(!Rs)throw Error(r(363));e=gl(e),e=vh(e,i),i=[],e=Array.from(e);for(var l=0;l<e.length;){var u=e[l++],f=u.tag;if(f===5||f===26||f===27)Bs(u)||i.push(u.stateNode);else for(u=u.child;u!==null;)e.push(u),u=u.sibling}return i}function Ee(){if((wt&2)!==0&&xt!==0)return xt&-xt;if(at.T!==null){var e=qi;return e!==0?e:Mr()}return Cg()}function _h(){Fe===0&&(Fe=(xt&536870912)===0||St?it():536870912);var e=Xe.current;return e!==null&&(e.flags|=32),Fe}function ge(e,i,l){(e===zt&&Ut===2||e.cancelPendingCommit!==null)&&(Ni(e,0),vn(e,xt,Fe,!1)),Q(e,l),((wt&2)===0||e!==zt)&&(e===zt&&((wt&2)===0&&(xi|=l),jt===4&&vn(e,xt,Fe,!1)),an(e))}function bh(e,i,l){if((wt&6)!==0)throw Error(r(327));var u=!l&&(i&60)===0&&(i&e.expiredLanes)===0||V(e,i),f=u?tg(e,i):Al(e,i,!0),p=u;do{if(f===0){$i&&!u&&vn(e,i,0,!1);break}else if(f===6)vn(e,i,0,!Tn);else{if(l=e.current.alternate,p&&!Jm(l)){f=Al(e,i,!1),p=!1;continue}if(f===2){if(p=i,e.errorRecoveryDisabledLanes&p)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var T=e;f=Hs;var U=He&&T.current.memoizedState.isDehydrated;if(U&&(Ni(T,_).flags|=256),_=Al(T,_,!1),_!==2){if(no&&!U){T.errorRecoveryDisabledLanes|=p,xi|=p,f=4;break t}p=un,un=f,p!==null&&_l(p)}f=_}if(p=!1,f!==2)continue}}if(f===1){Ni(e,0),vn(e,i,0,!0);break}t:{switch(u=e,f){case 0:case 1:throw Error(r(345));case 4:if((i&4194176)===i){vn(u,i,Fe,!Tn);break t}break;case 2:un=null;break;case 3:case 5:break;default:throw Error(r(329))}if(u.finishedWork=l,u.finishedLanes=i,(i&62914560)===i&&(p=ao+300-We(),10<p)){if(vn(u,i,Fe,!Tn),X(u,0)!==0)break t;u.timeoutHandle=bg(Sh.bind(null,u,l,un,Ia,so,i,Fe,xi,ts,Tn,2,-0,0),p);break t}Sh(u,l,un,Ia,so,i,Fe,xi,ts,Tn,0,-0,0)}}break}while(!0);an(e)}function _l(e){un===null?un=e:un.push.apply(un,e)}function Sh(e,i,l,u,f,p,_,T,U,H,q,K,W){var lt=i.subtreeFlags;if((lt&8192||(lt&16785408)===16785408)&&(wg(),mh(i),i=Rg(),i!==null)){e.cancelPendingCommit=i(zh.bind(null,e,l,u,f,_,T,U,1,K,W)),vn(e,p,_,!H);return}zh(e,l,u,f,_,T,U,q,K,W)}function Jm(e){for(var i=e;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var f=l[u],p=f.getSnapshot;f=f.value;try{if(!ze(p(),f))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function vn(e,i,l,u){i&=~io,i&=~xi,e.suspendedLanes|=i,e.pingedLanes&=~i,u&&(e.warmLanes|=i),u=e.expirationTimes;for(var f=i;0<f;){var p=31-Re(f),_=1<<p;u[p]=-1,f&=~_}l!==0&&vt(e,l,i)}function Ah(){return(wt&6)===0?(Ri(0),!1):!0}function bl(){if(ft!==null){if(Ut===0)var e=ft.return;else e=ft,An=gi=null,Gr(e),Ki=null,Ds=0,e=ft;for(;e!==null;)nh(e.alternate,e),e=e.return;ft=null}}function Ni(e,i){e.finishedWork=null,e.finishedLanes=0;var l=e.timeoutHandle;l!==Hl&&(e.timeoutHandle=Hl,Sg(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),bl(),zt=e,ft=l=Vn(e.current,null),xt=i,Ut=0,Ne=null,Tn=!1,$i=V(e,i),no=!1,ts=Fe=io=xi=In=jt=0,un=Hs=null,so=!1,(i&8)!==0&&(i|=i&32);var u=e.entangledLanes;if(u!==0)for(e=e.entanglements,u&=i;0<u;){var f=31-Re(u),p=1<<f;i|=e[f],u&=~p}return Mn=i,me(),l}function Ch(e,i){ut=null,at.H=on,i===Os?(i=Ku(),Ut=3):i===Zl?(i=Ku(),Ut=4):Ut=i===Sf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ne=i,ft===null&&(jt=1,ya(e,z(i,e.current)))}function Th(){var e=Xe.current;return e===null?!0:(xt&4194176)===xt?ln===null:(xt&62914560)===xt||(xt&536870912)!==0?e===ln:!1}function Mh(){var e=at.H;return at.H=on,e===null?on:e}function Eh(){var e=at.A;return at.A=jy,e}function Sl(){jt=4,Tn||(xt&4194176)!==xt&&Xe.current!==null||($i=!0),(In&134217727)===0&&(xi&134217727)===0||zt===null||vn(zt,xt,Fe,!1)}function Al(e,i,l){var u=wt;wt|=2;var f=Mh(),p=Eh();(zt!==e||xt!==i)&&(Ia=null,Ni(e,i)),i=!1;var _=jt;t:do try{if(Ut!==0&&ft!==null){var T=ft,U=Ne;switch(Ut){case 8:bl(),_=6;break t;case 3:case 2:case 6:Xe.current===null&&(i=!0);var H=Ut;if(Ut=0,Ne=null,Oi(e,T,U,H),l&&$i){_=0;break t}break;default:H=Ut,Ut=0,Ne=null,Oi(e,T,U,H)}}$m(),_=jt;break}catch(q){Ch(e,q)}while(!0);return i&&e.shellSuspendCounter++,An=gi=null,wt=u,at.H=f,at.A=p,ft===null&&(zt=null,xt=0,me()),_}function $m(){for(;ft!==null;)wh(ft)}function tg(e,i){var l=wt;wt|=2;var u=Mh(),f=Eh();zt!==e||xt!==i?(Ia=null,Vs=We()+500,Ni(e,i)):$i=V(e,i);t:do try{if(Ut!==0&&ft!==null){i=ft;var p=Ne;e:switch(Ut){case 1:Ut=0,Ne=null,Oi(e,i,p,1);break;case 2:if(ku(p)){Ut=0,Ne=null,Rh(i);break}i=function(){Ut===2&&zt===e&&(Ut=7),an(e)},p.then(i,i);break t;case 3:Ut=7;break t;case 4:Ut=5;break t;case 7:ku(p)?(Ut=0,Ne=null,Rh(i)):(Ut=0,Ne=null,Oi(e,i,p,7));break;case 5:var _=null;switch(ft.tag){case 26:_=ft.memoizedState;case 5:case 27:var T=ft,U=T.type,H=T.pendingProps;if(_?mf(_):Zh(U,H)){Ut=0,Ne=null;var q=T.sibling;if(q!==null)ft=q;else{var K=T.return;K!==null?(ft=K,Ca(K)):ft=null}break e}}Ut=0,Ne=null,Oi(e,i,p,5);break;case 6:Ut=0,Ne=null,Oi(e,i,p,6);break;case 8:bl(),jt=6;break t;default:throw Error(r(462))}}eg();break}catch(W){Ch(e,W)}while(!0);return An=gi=null,at.H=u,at.A=f,wt=l,ft!==null?0:(zt=null,xt=0,me(),jt)}function eg(){for(;ft!==null&&!By();)wh(ft)}function wh(e){var i=Qc(e.alternate,e,Mn);e.memoizedProps=e.pendingProps,i===null?Ca(e):ft=i}function Rh(e){var i=e,l=i.alternate;switch(i.tag){case 15:case 0:i=Xc(l,i,i.pendingProps,i.type,void 0,xt);break;case 11:i=Xc(l,i,i.pendingProps,i.type.render,i.ref,xt);break;case 5:Gr(i);default:nh(l,i),i=ft=Dh(i,Mn),i=Qc(l,i,Mn)}e.memoizedProps=e.pendingProps,i===null?Ca(e):ft=i}function Oi(e,i,l,u){An=gi=null,Gr(i),Ki=null,Ds=0;var f=i.return;try{if(km(e,f,i,l,xt)){jt=1,ya(e,z(l,e.current)),ft=null;return}}catch(p){if(f!==null)throw ft=f,p;jt=1,ya(e,z(l,e.current)),ft=null;return}i.flags&32768?(St||u===1?e=!0:$i||(xt&536870912)!==0?e=!1:(Tn=e=!0,(u===2||u===3||u===6)&&(u=Xe.current,u!==null&&u.tag===13&&(u.flags|=16384))),Bh(i,e)):Ca(i)}function Ca(e){var i=e;do{if((i.flags&32768)!==0){Bh(i,Tn);return}e=i.return;var l=Km(i.alternate,i,Mn);if(l!==null){ft=l;return}if(i=i.sibling,i!==null){ft=i;return}ft=i=e}while(i!==null);jt===0&&(jt=5)}function Bh(e,i){do{var l=Qm(e.alternate,e);if(l!==null){l.flags&=32767,ft=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(e=e.sibling,e!==null)){ft=e;return}ft=e=l}while(e!==null);jt=6,ft=null}function zh(e,i,l,u,f,p,_,T,U,H){var q=at.T,K=ui();try{be(2),at.T=null,ng(e,i,l,u,K,f,p,_,T,U,H)}finally{at.T=q,be(K)}}function ng(e,i,l,u,f,p,_,T){do li();while(vi!==null);if((wt&6)!==0)throw Error(r(327));var U=e.finishedWork;if(u=e.finishedLanes,U===null)return null;if(e.finishedWork=null,e.finishedLanes=0,U===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var H=U.lanes|U.childLanes;if(H|=kl,Tt(e,u,H,p,_,T),e===zt&&(ft=zt=null,xt=0),(U.subtreeFlags&10256)===0&&(U.flags&10256)===0||Ka||(Ka=!0,ro=H,lo=l,rg(Fl,function(){return li(),null})),l=(U.flags&15990)!==0,(U.subtreeFlags&15990)!==0||l?(l=at.T,at.T=null,p=ui(),be(2),_=wt,wt|=4,Wm(e,U),fh(U,e),vg(e.containerInfo),e.current=U,uh(e,U.alternate,U),zy(),wt=_,be(p),at.T=l):e.current=U,Ka?(Ka=!1,vi=e,Ls=u):Uh(e,H),H=e.pendingLanes,H===0&&(Kn=null),b(U.stateNode),an(e),i!==null)for(f=e.onRecoverableError,U=0;U<i.length;U++)H=i[U],f(H.value,{componentStack:H.stack});return(Ls&3)!==0&&li(),H=e.pendingLanes,(u&4194218)!==0&&(H&42)!==0?e===oo?js++:(js=0,oo=e):js=0,Ri(0),null}function Uh(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,As(i)))}function li(){if(vi!==null){var e=vi,i=ro;ro=0;var l=le(Ls),u=32>l?32:l;l=at.T;var f=ui();try{if(be(u),at.T=null,vi===null)var p=!1;else{u=lo,lo=null;var _=vi,T=Ls;if(vi=null,Ls=0,(wt&6)!==0)throw Error(r(331));var U=wt;if(wt|=4,yh(_.current),ph(_,_.current,T,u),wt=U,Ri(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(zs,_)}catch{}p=!0}return p}finally{be(f),at.T=l,Uh(e,i)}}return!1}function Nh(e,i,l){i=z(l,i),i=Kr(e.stateNode,i,2),e=Un(e,i,2),e!==null&&(Q(e,2),an(e))}function Mt(e,i,l){if(e.tag===3)Nh(e,e,l);else for(;i!==null;){if(i.tag===3){Nh(i,e,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Kn===null||!Kn.has(u))){e=z(l,e),l=Gc(2),u=Un(i,l,2),u!==null&&(Pc(l,u,i,e),Q(u,2),an(u));break}}i=i.return}}function Cl(e,i,l){var u=e.pingCache;if(u===null){u=e.pingCache=new Yy;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(l)||(no=!0,f.add(l),e=ig.bind(null,e,i,l),i.then(e,e))}function ig(e,i,l){var u=e.pingCache;u!==null&&u.delete(i),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,zt===e&&(xt&l)===l&&(jt===4||jt===3&&(xt&62914560)===xt&&300>We()-ao?(wt&2)===0&&Ni(e,0):io|=l,ts===xt&&(ts=0)),an(e)}function Oh(e,i){i===0&&(i=$()),e=Ke(e,i),e!==null&&(Q(e,i),an(e))}function sg(e){var i=e.memoizedState,l=0;i!==null&&(l=i.retryLane),Oh(e,l)}function ag(e,i){var l=0;switch(e.tag){case 13:var u=e.stateNode,f=e.memoizedState;f!==null&&(l=f.retryLane);break;case 19:u=e.stateNode;break;case 22:u=e.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),Oh(e,l)}function rg(e,i){return za(e,i)}function lg(e,i,l,u){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vn(e,i){var l=e.alternate;return l===null?(l=n(e.tag,i,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=i,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&31457280,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,i=e.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Dh(e,i){e.flags&=31457282;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,i=l.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Ta(e,i,l,u,f,p){var _=0;if(u=e,typeof e=="function")Tl(e)&&(_=1);else if(typeof e=="string")_=Ve&&he?uf(e,l,re.current)?26:yf(e)?27:5:Ve?uf(e,l,re.current)?26:5:he&&yf(e)?27:5;else t:switch(e){case Gi:return oi(l.children,f,p,i);case Yh:_=8,f|=24;break;case Bl:return e=n(12,l,i,f|2),e.elementType=Bl,e.lanes=p,e;case Ul:return e=n(13,l,i,f),e.elementType=Ul,e.lanes=p,e;case Nl:return e=n(19,l,i,f),e.elementType=Nl,e.lanes=p,e;case Fh:return Gh(l,f,p,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case hg:case Ln:_=10;break t;case Xh:_=9;break t;case zl:_=11;break t;case Ol:_=14;break t;case jn:_=16,u=null;break t}_=29,l=Error(r(130,e===null?"null":typeof e,"")),u=null}return i=n(_,l,i,f),i.elementType=e,i.type=u,i.lanes=p,i}function oi(e,i,l,u){return e=n(7,e,u,i),e.lanes=l,e}function Gh(e,i,l,u){e=n(22,e,u,i),e.elementType=Fh,e.lanes=l;var f={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var p=f._current;if(p===null)throw Error(r(456));if((f._pendingVisibility&2)===0){var _=Ke(p,2);_!==null&&(f._pendingVisibility|=2,ge(_,p,2))}},attach:function(){var p=f._current;if(p===null)throw Error(r(456));if((f._pendingVisibility&2)!==0){var _=Ke(p,2);_!==null&&(f._pendingVisibility&=-3,ge(_,p,2))}}};return e.stateNode=f,e}function Ml(e,i,l){return e=n(6,e,null,i),e.lanes=l,e}function El(e,i,l){return i=n(4,e.children!==null?e.children:[],e.key,i),i.lanes=l,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function og(e,i,l,u,f,p,_,T){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Hl,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Ph(e,i,l,u,f,p,_,T,U,H,q,K){return e=new og(e,i,l,_,T,U,H,K),i=1,p===!0&&(i|=24),p=n(3,null,null,i),e.current=p,p.stateNode=e,i=al(),i.refCount++,e.pooledCache=i,i.refCount++,p.memoizedState={element:u,isDehydrated:l,cache:i},Er(p),e}function Hh(e){return e?(e=Vi,e):Vi}function Vh(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=x(i),e=e!==null?C(e):null,e===null?null:ws(e.stateNode)}function Lh(e,i,l,u,f,p){f=Hh(f),u.context===null?u.context=f:u.pendingContext=f,u=zn(i),u.payload={element:l},p=p===void 0?null:p,p!==null&&(u.callback=p),l=Un(e,u,i),l!==null&&(ge(l,e,i),ms(l,e,i))}function jh(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<i?l:i}}function wl(e,i){jh(e,i),(e=e.alternate)&&jh(e,i)}var ht={},ug=Fy(),we=W1(),Rl=Object.assign,cg=Symbol.for("react.element"),Ma=Symbol.for("react.transitional.element"),Di=Symbol.for("react.portal"),Gi=Symbol.for("react.fragment"),Yh=Symbol.for("react.strict_mode"),Bl=Symbol.for("react.profiler"),hg=Symbol.for("react.provider"),Xh=Symbol.for("react.consumer"),Ln=Symbol.for("react.context"),zl=Symbol.for("react.forward_ref"),Ul=Symbol.for("react.suspense"),Nl=Symbol.for("react.suspense_list"),Ol=Symbol.for("react.memo"),jn=Symbol.for("react.lazy"),Fh=Symbol.for("react.offscreen"),fg=Symbol.for("react.memo_cache_sentinel"),qh=Symbol.iterator,dg=Symbol.for("react.client.reference"),at=ug.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Dl,kh,Gl=!1,Ea=Array.isArray,pg=t.rendererVersion,mg=t.rendererPackageName,Ih=t.extraDevToolsConfig,ws=t.getPublicInstance,gg=t.getRootHostContext,yg=t.getChildHostContext,xg=t.prepareForCommit,vg=t.resetAfterCommit,_g=t.createInstance,Pl=t.appendInitialChild,Kh=t.finalizeInitialChildren,wa=t.shouldSetTextContent,Qh=t.createTextInstance,bg=t.scheduleTimeout,Sg=t.cancelTimeout,Hl=t.noTimeout,_n=t.isPrimaryRenderer;t.warnsIfNotActing;var ce=t.supportsMutation,Yn=t.supportsPersistence,He=t.supportsHydration,Wh=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var Ag=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var be=t.setCurrentUpdatePriority,ui=t.getCurrentUpdatePriority,Cg=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var Tg=t.shouldAttemptEagerTransition,Mg=t.detachDeletedInstance;t.requestPostPaintCallback;var Eg=t.maySuspendCommit,Zh=t.preloadInstance,wg=t.startSuspendingCommit,Jh=t.suspendInstance,Rg=t.waitForCommitToBeReady,Pi=t.NotPendingTransition,ci=t.HostTransitionContext,Bg=t.resetFormInstance;t.bindToConsole;var zg=t.supportsMicrotasks,Ug=t.scheduleMicrotask,Rs=t.supportsTestSelectors,Ng=t.findFiberRoot,Og=t.getBoundingRect,Dg=t.getTextContent,Bs=t.isHiddenSubtree,Gg=t.matchAccessibilityRole,Pg=t.setFocusIfFocusable,Hg=t.setupIntersectionObserver,Vg=t.appendChild,Lg=t.appendChildToContainer,jg=t.commitTextUpdate,Yg=t.commitMount,Xg=t.commitUpdate,Fg=t.insertBefore,qg=t.insertInContainerBefore,kg=t.removeChild,Ig=t.removeChildFromContainer,$h=t.resetTextContent,Kg=t.hideInstance,Qg=t.hideTextInstance,Wg=t.unhideInstance,Zg=t.unhideTextInstance,Jg=t.clearContainer,$g=t.cloneInstance,tf=t.createContainerChildSet,ef=t.appendChildToContainerChildSet,ty=t.finalizeContainerChildren,nf=t.replaceContainerChildren,sf=t.cloneHiddenInstance,af=t.cloneHiddenTextInstance,Vl=t.isSuspenseInstancePending,Ll=t.isSuspenseInstanceFallback,ey=t.getSuspenseInstanceFallbackErrorDetails,ny=t.registerSuspenseInstanceRetry,iy=t.canHydrateFormStateMarker,sy=t.isFormStateMarkerMatching,rf=t.getNextHydratableSibling,lf=t.getFirstHydratableChild,ay=t.getFirstHydratableChildWithinContainer,ry=t.getFirstHydratableChildWithinSuspenseInstance,ly=t.canHydrateInstance,oy=t.canHydrateTextInstance,uy=t.canHydrateSuspenseInstance,cy=t.hydrateInstance,hy=t.hydrateTextInstance,fy=t.hydrateSuspenseInstance,dy=t.getNextHydratableInstanceAfterSuspenseInstance,py=t.commitHydratedContainer,my=t.commitHydratedSuspenseInstance,gy=t.clearSuspenseBoundary,yy=t.clearSuspenseBoundaryFromContainer,of=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var xy=t.validateHydratableInstance,vy=t.validateHydratableTextInstance,Ve=t.supportsResources,uf=t.isHostHoistableType,jl=t.getHoistableRoot,cf=t.getResource,hf=t.acquireResource,ff=t.releaseResource,_y=t.hydrateHoistable,df=t.mountHoistable,pf=t.unmountHoistable,by=t.createHoistableInstance,Sy=t.prepareToCommitHoistables,Ay=t.mayResourceSuspendCommit,mf=t.preloadResource,Cy=t.suspendResource,he=t.supportsSingletons,gf=t.resolveSingletonInstance,Ty=t.clearSingleton,My=t.acquireSingletonInstance,Ey=t.releaseSingletonInstance,yf=t.isHostSingletonType,Yl=[],Hi=-1,Vi={},Re=Math.clz32?Math.clz32:N,wy=Math.log,Ry=Math.LN2,Ra=128,Ba=4194304,za=we.unstable_scheduleCallback,Xl=we.unstable_cancelCallback,By=we.unstable_shouldYield,zy=we.unstable_requestPaint,We=we.unstable_now,xf=we.unstable_ImmediatePriority,Uy=we.unstable_UserBlockingPriority,Fl=we.unstable_NormalPriority,Ny=we.unstable_IdlePriority,Oy=we.log,Dy=we.unstable_setDisableYieldValue,zs=null,Be=null,ze=typeof Object.is=="function"?Object.is:M,vf=new WeakMap,Li=[],ji=0,Ua=null,Na=0,Le=[],je=0,hi=null,bn=1,Sn="",re=S(null),Us=S(null),Xn=S(null),Oa=S(null),ye=null,fe=null,St=!1,Ze=null,rn=!1,ql=Error(r(519)),Ye=[],Yi=0,kl=0,Da=null,Xi=null,Il=!1,Ga=!1,Kl=!1,Fi=0,Ns=null,Ql=0,qi=0,ki=null,Fn=!1,Wl=!1,Gy=Object.prototype.hasOwnProperty,Os=Error(r(460)),Zl=Error(r(474)),Pa={then:function(){}},Ii=null,Ki=null,Ds=0,fi=Wu(!0),_f=Wu(!1),Qi=S(null),Ha=S(0),Xe=S(null),ln=null,$t=S(0),qn=0,ut=null,Et=null,It=null,Va=!1,Wi=!1,di=!1,La=0,Gs=0,Zi=null,Py=0,Jl=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},on={readContext:ue,use:fa,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt};on.useCacheRefresh=qt,on.useMemoCache=qt,on.useHostTransitionStatus=qt,on.useFormState=qt,on.useActionState=qt,on.useOptimistic=qt;var pi={readContext:ue,use:fa,useCallback:function(e,i){return ve().memoizedState=[e,i===void 0?null:i],e},useContext:ue,useEffect:xc,useImperativeHandle:function(e,i,l){l=l!=null?l.concat([e]):null,pa(4194308,4,bc.bind(null,i,e),l)},useLayoutEffect:function(e,i){return pa(4194308,4,e,i)},useInsertionEffect:function(e,i){pa(4,2,e,i)},useMemo:function(e,i){var l=ve();i=i===void 0?null:i;var u=e();if(di){A(!0);try{e()}finally{A(!1)}}return l.memoizedState=[u,i],u},useReducer:function(e,i,l){var u=ve();if(l!==void 0){var f=l(i);if(di){A(!0);try{l(i)}finally{A(!1)}}}else f=i;return u.memoizedState=u.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},u.queue=e,e=e.dispatch=qm.bind(null,ut,e),[u.memoizedState,e]},useRef:function(e){var i=ve();return e={current:e},i.memoizedState=e},useState:function(e){e=Lr(e);var i=e.queue,l=Bc.bind(null,ut,i);return i.dispatch=l,[e.memoizedState,l]},useDebugValue:Xr,useDeferredValue:function(e,i){var l=ve();return Fr(l,e,i)},useTransition:function(){var e=Lr(!1);return e=Mc.bind(null,ut,e.queue,!0,!1),ve().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,l){var u=ut,f=ve();if(St){if(l===void 0)throw Error(r(407));l=l()}else{if(l=i(),zt===null)throw Error(r(349));(xt&60)!==0||nc(u,i,l)}f.memoizedState=l;var p={value:l,getSnapshot:i};return f.queue=p,xc(sc.bind(null,u,p,e),[e]),u.flags|=2048,Bi(9,ic.bind(null,u,p,l,i),{destroy:void 0},null),l},useId:function(){var e=ve(),i=zt.identifierPrefix;if(St){var l=Sn,u=bn;l=(u&~(1<<32-Re(u)-1)).toString(32)+l,i=":"+i+"R"+l,l=La++,0<l&&(i+="H"+l.toString(32)),i+=":"}else l=Py++,i=":"+i+"r"+l.toString(32)+":";return e.memoizedState=i},useCacheRefresh:function(){return ve().memoizedState=Fm.bind(null,ut)}};pi.useMemoCache=Pr,pi.useHostTransitionStatus=qr,pi.useFormState=dc,pi.useActionState=dc,pi.useOptimistic=function(e){var i=ve();i.memoizedState=i.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=kr.bind(null,ut,!0,l),l.dispatch=i,[e,i]};var kn={readContext:ue,use:fa,useCallback:Ac,useContext:ue,useEffect:Yr,useImperativeHandle:Sc,useInsertionEffect:vc,useLayoutEffect:_c,useMemo:Cc,useReducer:da,useRef:yc,useState:function(){return da(mn)},useDebugValue:Xr,useDeferredValue:function(e,i){var l=kt();return Tc(l,Et.memoizedState,e,i)},useTransition:function(){var e=da(mn)[0],i=kt().memoizedState;return[typeof e=="boolean"?e:vs(e),i]},useSyncExternalStore:ec,useId:wc};kn.useCacheRefresh=Rc,kn.useMemoCache=Pr,kn.useHostTransitionStatus=qr,kn.useFormState=pc,kn.useActionState=pc,kn.useOptimistic=function(e,i){var l=kt();return lc(l,Et,e,i)};var mi={readContext:ue,use:fa,useCallback:Ac,useContext:ue,useEffect:Yr,useImperativeHandle:Sc,useInsertionEffect:vc,useLayoutEffect:_c,useMemo:Cc,useReducer:Vr,useRef:yc,useState:function(){return Vr(mn)},useDebugValue:Xr,useDeferredValue:function(e,i){var l=kt();return Et===null?Fr(l,e,i):Tc(l,Et.memoizedState,e,i)},useTransition:function(){var e=Vr(mn)[0],i=kt().memoizedState;return[typeof e=="boolean"?e:vs(e),i]},useSyncExternalStore:ec,useId:wc};mi.useCacheRefresh=Rc,mi.useMemoCache=Pr,mi.useHostTransitionStatus=qr,mi.useFormState=gc,mi.useActionState=gc,mi.useOptimistic=function(e,i){var l=kt();return Et!==null?lc(l,Et,e,i):(l.baseState=e,[e,l.queue.dispatch])};var $l={isMounted:function(e){return(e=e._reactInternals)?y(e)===e:!1},enqueueSetState:function(e,i,l){e=e._reactInternals;var u=Ee(),f=zn(u);f.payload=i,l!=null&&(f.callback=l),i=Un(e,f,u),i!==null&&(ge(i,e,u),ms(i,e,u))},enqueueReplaceState:function(e,i,l){e=e._reactInternals;var u=Ee(),f=zn(u);f.tag=1,f.payload=i,l!=null&&(f.callback=l),i=Un(e,f,u),i!==null&&(ge(i,e,u),ms(i,e,u))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var l=Ee(),u=zn(l);u.tag=2,i!=null&&(u.callback=i),i=Un(e,u,l),i!==null&&(ge(i,e,l),ms(i,e,l))}},bf=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Sf=Error(r(461)),ee=!1,to={dehydrated:null,treeContext:null,retryLane:0},ja=S(null),gi=null,An=null,Hy=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(l,u){e.push(u)}};this.abort=function(){i.aborted=!0,e.forEach(function(l){return l()})}},Vy=we.unstable_scheduleCallback,Ly=we.unstable_NormalPriority,Vt={$$typeof:Ln,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Af=at.S;at.S=function(e,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Vm(e,i),Af!==null&&Af(e,i)};var yi=S(null),Cn=!1,Lt=!1,eo=!1,Cf=typeof WeakSet=="function"?WeakSet:Set,ne=null,Tf=!1,Kt=null,Ue=!1,Je=null,Ji=8192,jy={getCacheForType:function(e){var i=ue(Vt),l=i.data.get(e);return l===void 0&&(l=e(),i.data.set(e,l)),l}},Ya=0,Xa=1,Fa=2,qa=3,ka=4;if(typeof Symbol=="function"&&Symbol.for){var Ps=Symbol.for;Ya=Ps("selector.component"),Xa=Ps("selector.has_pseudo_class"),Fa=Ps("selector.role"),qa=Ps("selector.test_id"),ka=Ps("selector.text")}var Yy=typeof WeakMap=="function"?WeakMap:Map,wt=0,zt=null,ft=null,xt=0,Ut=0,Ne=null,Tn=!1,$i=!1,no=!1,Mn=0,jt=0,In=0,xi=0,io=0,Fe=0,ts=0,Hs=null,un=null,so=!1,ao=0,Vs=1/0,Ia=null,Kn=null,Ka=!1,vi=null,Ls=0,ro=0,lo=null,js=0,oo=null;return ht.attemptContinuousHydration=function(e){if(e.tag===13){var i=Ke(e,67108864);i!==null&&ge(i,e,67108864),wl(e,67108864)}},ht.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var i=Ee(),l=Ke(e,i);l!==null&&ge(l,e,i),wl(e,i)}},ht.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if(e=e.stateNode,e.current.memoizedState.isDehydrated){var i=P(e.pendingLanes);if(i!==0){for(e.pendingLanes|=2,e.entangledLanes|=2;i;){var l=1<<31-Re(i);e.entanglements[1]|=l,i&=~l}an(e),(wt&6)===0&&(Vs=We()+500,Ri(0))}}break;case 13:i=Ke(e,2),i!==null&&ge(i,e,2),Ah(),wl(e,2)}},ht.batchedUpdates=function(e,i){return e(i)},ht.createComponentSelector=function(e){return{$$typeof:Ya,value:e}},ht.createContainer=function(e,i,l,u,f,p,_,T,U,H){return Ph(e,i,!1,null,l,u,p,_,T,U,H,null)},ht.createHasPseudoClassSelector=function(e){return{$$typeof:Xa,value:e}},ht.createHydrationContainer=function(e,i,l,u,f,p,_,T,U,H,q,K,W){return e=Ph(l,u,!0,e,f,p,T,U,H,q,K,W),e.context=Hh(null),l=e.current,u=Ee(),f=zn(u),f.callback=i??null,Un(l,f,u),e.current.lanes=u,Q(e,u),an(e),e},ht.createPortal=function(e,i,l){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Di,key:u==null?null:""+u,children:e,containerInfo:i,implementation:l}},ht.createRoleSelector=function(e){return{$$typeof:Fa,value:e}},ht.createTestNameSelector=function(e){return{$$typeof:qa,value:e}},ht.createTextSelector=function(e){return{$$typeof:ka,value:e}},ht.defaultOnCaughtError=function(e){console.error(e)},ht.defaultOnRecoverableError=function(e){bf(e)},ht.defaultOnUncaughtError=function(e){bf(e)},ht.deferredUpdates=function(e){var i=at.T,l=ui();try{return be(32),at.T=null,e()}finally{be(l),at.T=i}},ht.discreteUpdates=function(e,i,l,u,f){var p=at.T,_=ui();try{return be(2),at.T=null,e(i,l,u,f)}finally{be(_),at.T=p,wt===0&&(Vs=We()+500)}},ht.findAllNodes=vl,ht.findBoundingRects=function(e,i){if(!Rs)throw Error(r(363));i=vl(e,i),e=[];for(var l=0;l<i.length;l++)e.push(Og(i[l]));for(i=e.length-1;0<i;i--){l=e[i];for(var u=l.x,f=u+l.width,p=l.y,_=p+l.height,T=i-1;0<=T;T--)if(i!==T){var U=e[T],H=U.x,q=H+U.width,K=U.y,W=K+U.height;if(u>=H&&p>=K&&f<=q&&_<=W){e.splice(i,1);break}else if(u!==H||l.width!==U.width||W<p||K>_){if(!(p!==K||l.height!==U.height||q<u||H>f)){H>u&&(U.width+=H-u,U.x=u),q<f&&(U.width=f-H),e.splice(i,1);break}}else{K>p&&(U.height+=K-p,U.y=p),W<_&&(U.height=_-K),e.splice(i,1);break}}}return e},ht.findHostInstance=Vh,ht.findHostInstanceWithNoPortals=function(e){return e=x(e),e=e!==null?E(e):null,e===null?null:ws(e.stateNode)},ht.findHostInstanceWithWarning=function(e){return Vh(e)},ht.flushPassiveEffects=li,ht.flushSyncFromReconciler=function(e){var i=wt;wt|=1;var l=at.T,u=ui();try{if(be(2),at.T=null,e)return e()}finally{be(u),at.T=l,wt=i,(wt&6)===0&&Ri(0)}},ht.flushSyncWork=Ah,ht.focusWithin=function(e,i){if(!Rs)throw Error(r(363));for(e=gl(e),i=vh(e,i),i=Array.from(i),e=0;e<i.length;){var l=i[e++],u=l.tag;if(!Bs(l)){if((u===5||u===26||u===27)&&Pg(l.stateNode))return!0;for(l=l.child;l!==null;)i.push(l),l=l.sibling}}return!1},ht.getFindAllNodesFailureDescription=function(e,i){if(!Rs)throw Error(r(363));var l=0,u=[];e=[gl(e),0];for(var f=0;f<e.length;){var p=e[f++],_=p.tag,T=e[f++],U=i[T];if((_!==5&&_!==26&&_!==27||!Bs(p))&&(yl(p,U)&&(u.push(xl(U)),T++,T>l&&(l=T)),T<i.length))for(p=p.child;p!==null;)e.push(p,T),p=p.sibling}if(l<i.length){for(e=[];l<i.length;l++)e.push(xl(i[l]));return`findAllNodes was able to match part of the selector:
  `+(u.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},ht.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 27:case 5:return ws(e.child.stateNode);default:return e.child.stateNode}},ht.injectIntoDevTools=function(){var e={bundleType:0,version:pg,rendererPackageName:mg,currentDispatcherRef:at,findFiberByHostInstance:Wh,reconcilerVersion:"19.0.0"};if(Ih!==null&&(e.rendererConfig=Ih),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(i.isDisabled||!i.supportsFiber)e=!0;else{try{zs=i.inject(e),Be=i}catch{}e=!!i.checkDCE}}return e},ht.isAlreadyRendering=function(){return!1},ht.observeVisibleRects=function(e,i,l,u){if(!Rs)throw Error(r(363));e=vl(e,i);var f=Hg(e,l,u).disconnect;return{disconnect:function(){f()}}},ht.shouldError=function(){return null},ht.shouldSuspend=function(){return!1},ht.startHostTransition=function(e,i,l,u){if(e.tag!==5)throw Error(r(476));var f=Ec(e).queue;Mc(e,f,i,Pi,l===null?a:function(){var p=Ec(e).next.queue;return _s(e,p,{},Ee()),l(u)})},ht.updateContainer=function(e,i,l,u){var f=i.current,p=Ee();return Lh(f,p,e,i,l,u),p},ht.updateContainerSync=function(e,i,l,u){return i.tag===0&&li(),Lh(i.current,2,e,i,l,u),2},ht},s.exports.default=s.exports,Object.defineProperty(s.exports,"__esModule",{value:!0})})(Io)),Io.exports}var Kd;function J1(){return Kd||(Kd=1,ko.exports=Z1()),ko.exports}var $1=J1();const tb=br($1),eb=tb;function nb(s,t,n,a){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function ib(){}function sb(){return!1}const Bm={};function ab(s){return s??Bm}function rb(){return ei.currentUpdatePriority}function lb(){return null}function ob(s){throw new Error("Not yet implemented.")}function ub(s){return s}function cb(){return Bm}function hb(s){s instanceof Pe?s.visible=!1:s instanceof Ae&&(s.enabled=!1)}function fb(s){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function zm(s){if(s instanceof Ae){const t=s.__pixireact.parent;if(t){const n=t.__pixireact.filters.indexOf(s);t.__pixireact.filters.splice(n,1),t.filters=t.__pixireact.filters}s.__pixireact.parent=null}}function Um(s,t,...n){}function Qd(s,t,n){if(Um(),t instanceof Pe){const a=t,r=t,o=n;a.parent===s&&s.removeChild(r);const c=s.getChildIndex(o);s.addChildAt(r,c)}else if(t instanceof Ae){const o=t.__pixireact.filters.indexOf(n);zm(t),Cm(s,t,o)}}function db(){return!1}function pb(){return!0}function mb(){return null}function gb(){}function yb(){}function Wd(s,t){t instanceof Ae&&zm(t),t.destroy()}function xb(s){}function vb(){}function _b(){}function bb(){return-1.1}function Sb(){return null}function Ab(){if(ei.currentUpdatePriority)return ei.currentUpdatePriority;const s=typeof self<"u"&&self||typeof window<"u"&&window;if(!s)return is.DefaultEventPriority;switch(s.event?.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return is.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return is.ContinuousEventPriority;default:return is.DefaultEventPriority}}function Cb(s){ei.currentUpdatePriority=s}function Tb(){return!1}function Mb(){return!1}function Eb(){}function wb(){}function Rb(){}function Bb(s){s instanceof Pe?s.visible=!0:s instanceof Ae&&(s.enabled=!0)}function zb(s){throw new Error("Text instances are not yet supported. Please use a `<text>` component.")}function Ub(){return null}const Nb={isPrimaryRenderer:!1,noTimeout:-1,NotPendingTransition:null,supportsHydration:!1,supportsMutation:!0,supportsPersistence:!1,warnsIfNotActing:!1,afterActiveInstanceBlur:B1,appendChild:qo,appendChildToContainer:qo,appendInitialChild:qo,beforeActiveInstanceBlur:z1,cancelTimeout:clearTimeout,clearContainer:U1,commitUpdate:X1,createInstance:K1,createTextInstance:nb,hideTextInstance:fb,unhideTextInstance:zb,detachDeletedInstance:ib,finalizeInitialChildren:sb,getChildHostContext:ab,getCurrentUpdatePriority:rb,getInstanceFromNode:lb,getInstanceFromScope:ob,getPublicInstance:ub,getRootHostContext:cb,hideInstance:hb,insertBefore:Qd,insertInContainerBefore:Qd,maySuspendCommit:db,preloadInstance:pb,prepareForCommit:mb,preparePortalMount:gb,prepareScopeUpdate:yb,removeChild:Wd,removeChildFromContainer:Wd,requestPostPaintCallback:xb,resetAfterCommit:vb,resetFormInstance:_b,resolveEventTimeStamp:bb,resolveEventType:Sb,resolveUpdatePriority:Ab,scheduleTimeout:setTimeout,shouldAttemptEagerTransition:Tb,setCurrentUpdatePriority:Cb,shouldSetTextContent:Mb,startSuspendingCommit:Eb,suspendInstance:wb,trackSchedulerEvent:Rb,unhideInstance:Bb,waitForCommitToBeReady:Ub},_r=eb(Nb);_r.injectIntoDevTools({bundleType:0,rendererPackageName:"@pixi/react",version:R1.version});const cs=new Map;function Ob(s,t={}){let n=cs.get(s),a=n?.applicationState??{isInitialised:!1,isInitialising:!1};const r=n?.internalState??{};n||(a.app=new Mu,r.rootContainer=Am(a.app.stage));const o=n?.fiber??_r.createContainer(r.rootContainer,is.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null);if(!n){let c;s instanceof HTMLCanvasElement&&(c=s),c||(c=document.createElement("canvas"),s.innerHTML="",s.appendChild(c)),r.canvas=c,n={applicationState:a,fiber:o,internalState:r,render:async(d,m)=>(!a.app.renderer&&!a.isInitialised&&!a.isInitialising&&(a.isInitialising=!0,await a.app.init({...m,canvas:c}),a.isInitialising=!1,a.isInitialised=!0,a={...a},t.onInit?.(a.app)),Object.entries(m).forEach(([g,y])=>{const v=g;Sm(m,v)||(a.app[v]=y)}),_r.updateContainer(Bt.jsx(E1,{value:a,children:d}),o,null,()=>{}),a.app)},cs.set(c,n)}return n}function Nm(s){ei.unmountQueue.delete(s);const t=s.fiber;t&&_r.updateContainer(null,t,null,()=>{s.applicationState.app&&s.applicationState.app.destroy(),cs.delete(s.internalState.canvas)})}function Db(){for(const s of ei.unmountQueue)Nm(s)}function Gb(s){const t=cs.get(s);t&&(t.applicationState.isInitialised?Nm(t):ei.unmountQueue.add(t))}function Pb(s){const t=cs.get(s);t&&ei.unmountQueue.delete(t)}const or=typeof window<"u"&&(window.document?.createElement||window.navigator?.product==="ReactNative")?ct.useLayoutEffect:ct.useEffect,Hb={...ti.defaultTextStyle},Vb=ct.forwardRef(function(t,n){const{children:a,className:r,defaultTextStyle:o,extensions:c,onInit:h,resizeTo:d,...m}=t,g=Qy(),y=ct.useRef(null),v=ct.useRef(null),x=ct.useRef(new Set);ct.useImperativeHandle(n,()=>({getApplication(){return y.current},getCanvas(){return v.current}}));const C=ct.useCallback(()=>{const S=y.current;S&&(d?"current"in d?d.current instanceof HTMLElement&&(S.resizeTo=d.current):S.resizeTo=d:S.resizeTo=void 0)},[d]),E=ct.useCallback(S=>{Db(),y.current=S,C(),h?.(S)},[h]);return or(()=>{if(c){const S=[...c],w=x.current;for(const R of w.values()){const N=S.indexOf(R);N===-1&&(te.remove(R),w.delete(R)),S.splice(N,1)}for(const R in S)te.add(R),w.add(R)}},[c]),or(()=>{const S=v.current;if(S){let w=cs.get(S);w||(w=Ob(S,{onInit:E})),w.render(Bt.jsx(g,{children:a}),m)}},[m,a,E,d]),or(()=>{C()},[d]),or(()=>{o?Object.assign(ti.defaultTextStyle,o):Object.assign(ti.defaultTextStyle,Hb)},[o]),ct.useEffect(()=>{const S=v.current;if(S)return Pb(S),()=>{Gb(S)}},[]),Bt.jsx("canvas",{ref:v,className:r})}),Lb=ct.forwardRef(function(t,n){return Bt.jsx($d,{children:Bt.jsx(Vb,{ref:n,...t})})});function jb(s){Object.assign(vu,s)}function Hu(){const s=ct.useContext(Pu);return Um(s.app instanceof Mu,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),s}const Yb=({onPositionChange:s,initialPosition:t,width:n=8,hitAreaWidth:a=40})=>{const[r,o]=ct.useState(t??window.innerWidth/2),[c,h]=ct.useState(!1),d=ct.useRef(null);return ct.useEffect(()=>{const m=y=>{if(!c)return;const v=y.clientX;o(v),s(v)},g=()=>{h(!1)};return c&&(document.addEventListener("mousemove",m),document.addEventListener("mouseup",g)),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",g)}},[c,s]),Bt.jsx("div",{ref:d,className:"fixed top-0 h-screen cursor-col-resize z-splitter flex items-center justify-center",style:{left:r-a/2,width:a},onMouseDown:()=>h(!0),children:Bt.jsx("div",{className:`h-full ${c?"bg-blue":"bg-white"}`,style:{width:n}})})},Xb=""+new URL("beast-CSRFmx6K.webp",import.meta.url).href,Fb=""+new URL("head-over-heels-amiga-71-BOypwZHW.webp",import.meta.url).href,qb=""+new URL("metal-slug-neo-geo-09-ZttQaqdt.webp",import.meta.url).href,kb=""+new URL("micro-machines-2-megadrive-genesis-11.png-DqCNv1id.webp",import.meta.url).href,Ib=""+new URL("moonbase9-2JlMZB67.png",import.meta.url).href,Kb=""+new URL("rickroll_short_43-BLBmws83.mp4",import.meta.url).href,Qb=""+new URL("sonic-the-hedgehog-megadrive-001-tW1mdMo3.webp",import.meta.url).href,Wb=""+new URL("speedball-2-brutal-deluxe-amiga-42-CvhttDJL.webp",import.meta.url).href,Zb=""+new URL("Testcard_F-DV1NSLZk.jpg",import.meta.url).href,Jb=""+new URL("wipeout-2097-ps1-53.jpg-CtOxhwP4.webp",import.meta.url).href,$b=""+new URL("yosi-BnbMDEMB.webp",import.meta.url).href,Om={moonbase:{src:Ib,type:"image",description:"Moonbase (C64)"},sonic:{src:Qb,type:"image",description:"Sonic the Hedgehog (Mega Drive)"},metalSlug:{src:qb,type:"image",description:"Metal Slug (Neo Geo/Arcade)"},speedball:{src:Wb,type:"image",description:"Speedball 2 (Amiga)"},amigaHoh:{src:Fb,type:"image",description:"Head Over Heels (Amiga)"},testcard:{src:Zb,type:"image",description:"BBC Test Card F"},beast:{src:Xb,type:"image",description:"Shadow of the Beast (Amiga)"},microMachines:{src:kb,type:"image",description:"Micro Machines 2 (Mega Drive)"},wipeout:{src:Jb,type:"image",description:"Wipeout 2097 (PlayStation)"},yosi:{src:$b,type:"image",description:"Yoshi's Island (SNES)"},rickroll:{src:Kb,type:"video",description:"Rick Astley - Never Gonna Give You Up"}},tS=({value:s,onChange:t})=>Bt.jsx("div",{className:"flex flex-col gap-2 p-2.5 bg-background-content border-b border-border overflow-x-auto absolute top-0 left-0 z-media-selector max-h-full",children:Object.entries(Om).map(([n,a])=>Bt.jsxs("button",{onClick:()=>t(n),className:`
            p-1 rounded border-2 cursor-pointer
            flex flex-col items-center gap-1
            ${s===n?"border-blue-light bg-blue-light/10":"border-border bg-background"}
          `,children:[a.type==="image"?Bt.jsx("img",{src:a.src,alt:n,className:"w-20 h-[60px] object-cover rounded-sm"}):Bt.jsx("div",{className:"w-20 h-[60px] bg-background-bar rounded-sm flex items-center justify-center text-2xl",children:"▶️"}),Bt.jsx("span",{className:"text-[11px] text-text",children:n})]},n))}),wi=`
in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,eS=`#version 300 es
precision mediump float;

in vec2 vTextureCoord;
uniform sampler2D uTexture;

uniform float uRadius;      // Blur radius in pixels
uniform float uCutoff;      // Brightness cutoff (0.0 to 1.0)
uniform float uIntensity;   // Bloom intensity (0.0 to 1.0)
uniform vec2 uResolution;   // Screen resolution
uniform float uEdgeBlur;    // Edge blur multiplier (1.0 = uniform, 2.0 = edges 2x blurrier)

// Pixi built-in uniforms (provided automatically)
uniform vec4 uInputClamp;  // xy: min texture coords, zw: max texture coords of visible area

out vec4 finalColor;

// 13-tap pattern: center + 4-point diamond inner ring + 8-point outer ring
// This gives smoother, more circular bloom
const vec2 poissonOffsets[13] = vec2[](
    // Center
    vec2(0.0, 0.0),
    
    // Inner ring (diamond pattern at radius ~0.4)
    vec2(0.283, -0.283),   // Top-right diagonal
    vec2(0.283, 0.283),    // Bottom-right diagonal
    vec2(-0.283, 0.283),   // Bottom-left diagonal
    vec2(-0.283, -0.283),  // Top-left diagonal
    
    // Outer ring (8 points at radius ~1.0)
    vec2(0.0, -1.0),       // Top
    vec2(0.707, -0.707),   // Top-right
    vec2(1.0, 0.0),        // Right
    vec2(0.707, 0.707),    // Bottom-right
    vec2(0.0, 1.0),        // Bottom
    vec2(-0.707, 0.707),   // Bottom-left
    vec2(-1.0, 0.0),       // Left
    vec2(-0.707, -0.707)   // Top-left
);

// Weights for each sample - falloff from center to outer ring
const float poissonWeights[13] = float[](
    4.0,  // Center - highest weight
    
    // Inner ring - medium weight
    2.5, 2.5, 2.5, 2.5,
    
    // Outer ring - lower weight (33% of original)
    0.4, 0.33, 0.4, 0.33,
    0.4, 0.33, 0.4, 0.33
);

void main() {
    vec3 originalColor = texture(uTexture, vTextureCoord).rgb;
    
    // Calculate pixel size
    vec2 pixelSize = 1.0 / uResolution;
    
    // Calculate distance from center using the same logic as vignette/curvature
    vec2 visibleSize = uInputClamp.zw - uInputClamp.xy;
    vec2 visibleCenter = (uInputClamp.xy + uInputClamp.zw) * 0.5;
    vec2 centered = (vTextureCoord - visibleCenter) / visibleSize;
    
    // Distance from center (0 at center, ~0.707 at corners for square aspect)
    float distFromCenter = length(centered);
    
    // Calculate variable intensity based on distance from center
    // At center: intensity = uIntensity
    // At corners: intensity = uIntensity * uEdgeBlur
    // Linear interpolation based on distance
    float localIntensity = uIntensity * mix(1.0, uEdgeBlur, distFromCenter);
    
    // Accumulate bloom from neighboring pixels
    vec3 bloom = vec3(0.0);
    float totalWeight = 0.0;
    
    // Sample using two-ring pattern for smoother bloom
    for (int i = 0; i < 13; i++) {
        vec2 offset = poissonOffsets[i] * pixelSize * uRadius;
        vec2 sampleCoord = vTextureCoord + offset;
        
        // Sample the neighbor
        vec3 sampleColor = texture(uTexture, sampleCoord).rgb;
        
        // Calculate brightness of the sample
        float sampleBrightness = max(max(sampleColor.r, sampleColor.g), sampleColor.b);
        
        // Apply smooth cutoff to determine contribution
        // Only bright pixels contribute to bloom
        float contribution = smoothstep(uCutoff * 0.5, uCutoff + 0.1, sampleBrightness);
        
        // Get weight for this sample
        float weight = poissonWeights[i] * contribution;
        
        bloom += sampleColor * weight;
        totalWeight += weight;
    }
    
    // Normalize the bloom (avoid divide by zero)
    bloom /= max(totalWeight, 0.001);
    
    // Calculate brightness of current pixel
    float currentBrightness = max(max(originalColor.r, originalColor.g), originalColor.b);
    
    // Bloom should only affect pixels that are darker than the bloom source
    // Calculate the difference and clamp to positive values only
    vec3 bloomDiff = max(bloom - originalColor, vec3(0.0));
    vec3 bloomContribution = bloomDiff * localIntensity;
    
    // Add bloom to original color
    vec3 result = originalColor + bloomContribution;
    
    finalColor = vec4(result, 1.0);
}`,Jn={radius:3,cutoff:.88,intensity:.14,edgeBlur:1.5};class nS extends Ae{uniforms;constructor(t={}){const n={...Jn,...t},a=dn.from({vertex:wi,fragment:eS,name:"bloom-filter"});super({glProgram:a,resources:{bloomUniforms:{uRadius:{value:n.radius,type:"f32"},uCutoff:{value:n.cutoff,type:"f32"},uIntensity:{value:n.intensity,type:"f32"},uEdgeBlur:{value:n.edgeBlur,type:"f32"},uResolution:{value:new Float32Array(2),type:"vec2<f32>"}}}}),this.uniforms=this.resources.bloomUniforms.uniforms}apply(t,n,a,r){this.uniforms.uResolution[0]=n.frame.width,this.uniforms.uResolution[1]=n.frame.height,super.apply(t,n,a,r)}}const iS=`#version 300 es
precision mediump float;

in vec2 vTextureCoord;
uniform sampler2D uTexture;

uniform float uGamma;        // Gamma correction
uniform float uSaturation;   // Color saturation
uniform float uBrightness;   // Brightness (0.0 to 2.0)

out vec4 finalColor;

void main() {
    vec3 colour = texture(uTexture, vTextureCoord).rgb;
    
    // Apply brightness adjustment
    colour *= uBrightness;
    
    // Apply saturation adjustment
    float luminance = dot(colour, vec3(0.299, 0.587, 0.114));
    vec3 grayscale = vec3(luminance);
    colour = mix(grayscale, colour, uSaturation);
    
    // Apply gamma correction
    colour = pow(colour, vec3(1.0 / uGamma));
    
    finalColor = vec4(colour, 1.0);
}`,dr={gamma:1,saturation:1,brightness:1};class sS extends Ae{uniforms;constructor(t={}){const n={...dr,...t},a=dn.from({vertex:wi,fragment:iS,name:"color-adjustment-filter"});super({glProgram:a,resources:{colorAdjustmentUniforms:{uGamma:{value:n.gamma,type:"f32"},uSaturation:{value:n.saturation,type:"f32"},uBrightness:{value:n.brightness,type:"f32"}}}}),this.uniforms=this.resources.colorAdjustmentUniforms.uniforms}}const Dm=(s,t)=>s.replace(/\{\{(\w+)\}\}/g,(n,a)=>{if(a in t){const r=t[a];return typeof r=="boolean"?r?"1":"0":String(r)}return console.warn(`Shader placeholder {{${a}}} not found in values map`),n}),aS=`#version 300 es
precision mediump float;

// Injected define for multisampling
#define MULTISAMPLE {{MULTISAMPLE}}

in vec2 vTextureCoord;
uniform sampler2D uTexture;

uniform float uCurvatureX;  // Screen curvature - horizontal
uniform float uCurvatureY;  // Screen curvature - vertical
uniform vec2 uResolution;   // Screen resolution for AA sampling

// Pixi built-in uniforms (provided automatically)
uniform vec4 uInputClamp;  // xy: min texture coords, zw: max texture coords of visible area

out vec4 finalColor;

vec2 distort(vec2 coord) {
    vec2 curvatureDistortion = vec2(uCurvatureX, uCurvatureY);
    vec2 barrelScale = 1.0 - (0.23 * curvatureDistortion);
    
    // Map texture coords to normalized visible space (0-1)
    vec2 visibleSize = uInputClamp.zw - uInputClamp.xy;
    vec2 visibleCenter = (uInputClamp.xy + uInputClamp.zw) * 0.5;
    
    // Normalize coord to visible area's 0-1 range
    vec2 normalizedCoord = (coord - uInputClamp.xy) / visibleSize;
    
    // Center normalized coordinates around 0,0
    normalizedCoord -= vec2(0.5, 0.5);
    
    // Apply barrel distortion
    float rsq = normalizedCoord.x * normalizedCoord.x + normalizedCoord.y * normalizedCoord.y;
    normalizedCoord += normalizedCoord * (curvatureDistortion * rsq);
    normalizedCoord *= barrelScale;
    
    // Re-center normalized coordinates
    normalizedCoord += vec2(0.5, 0.5);
    
    // Map back to texture coordinate space
    return normalizedCoord * visibleSize + uInputClamp.xy;
}

void main() {
    #if MULTISAMPLE
        // Calculate pixel size in texture coordinates for AA sampling
        vec2 pixelSize = 1.0 / uResolution;
        
        // Quincunx (X) pattern: center + 4 diagonal corners
        // Sample offsets at half-pixel distance diagonally
        vec2 offset = pixelSize * 0.5;
        
        // Take 5 samples with distortion applied to each
        vec2 coord0 = distort(vTextureCoord);                                    // Center
        vec2 coord1 = distort(vTextureCoord + vec2(-offset.x, -offset.y));      // Top-left
        vec2 coord2 = distort(vTextureCoord + vec2( offset.x, -offset.y));      // Top-right
        vec2 coord3 = distort(vTextureCoord + vec2(-offset.x,  offset.y));      // Bottom-left
        vec2 coord4 = distort(vTextureCoord + vec2( offset.x,  offset.y));      // Bottom-right
        
        // Branchless bounds check for each sample (check against visible bounds)
        float inBounds0 = step(uInputClamp.x, coord0.x) * step(coord0.x, uInputClamp.z) * step(uInputClamp.y, coord0.y) * step(coord0.y, uInputClamp.w);
        float inBounds1 = step(uInputClamp.x, coord1.x) * step(coord1.x, uInputClamp.z) * step(uInputClamp.y, coord1.y) * step(coord1.y, uInputClamp.w);
        float inBounds2 = step(uInputClamp.x, coord2.x) * step(coord2.x, uInputClamp.z) * step(uInputClamp.y, coord2.y) * step(coord2.y, uInputClamp.w);
        float inBounds3 = step(uInputClamp.x, coord3.x) * step(coord3.x, uInputClamp.z) * step(uInputClamp.y, coord3.y) * step(coord3.y, uInputClamp.w);
        float inBounds4 = step(uInputClamp.x, coord4.x) * step(coord4.x, uInputClamp.z) * step(uInputClamp.y, coord4.y) * step(coord4.y, uInputClamp.w);
        
        // Sample textures and apply bounds check
        vec3 sample0 = texture(uTexture, coord0).rgb * inBounds0;
        vec3 sample1 = texture(uTexture, coord1).rgb * inBounds1;
        vec3 sample2 = texture(uTexture, coord2).rgb * inBounds2;
        vec3 sample3 = texture(uTexture, coord3).rgb * inBounds3;
        vec3 sample4 = texture(uTexture, coord4).rgb * inBounds4;
        
        // Weighted average: center gets 50%, corners get 12.5% each
        vec3 colour = sample0 * 0.5 + (sample1 + sample2 + sample3 + sample4) * 0.125;
        
        finalColor = vec4(colour, 1.0);
    #else
        // Single sample - faster but may have aliasing at edges
        vec2 coord = distort(vTextureCoord);
        
        // Check if in bounds
        float inBounds = step(uInputClamp.x, coord.x) * step(coord.x, uInputClamp.z) * 
                         step(uInputClamp.y, coord.y) * step(coord.y, uInputClamp.w);
        
        vec3 colour = texture(uTexture, coord).rgb * inBounds;
        finalColor = vec4(colour, 1.0);
    #endif
}`,na={curvatureX:.15,curvatureY:.15,multisampling:!0};class rS extends Ae{uniforms;constructor(t={}){const n={...na,...t},a=Dm(aS,{MULTISAMPLE:n.multisampling}),r=dn.from({vertex:wi,fragment:a,name:"curvature-filter"});super({glProgram:r,resources:{curvatureUniforms:{uCurvatureX:{value:n.curvatureX,type:"f32"},uCurvatureY:{value:n.curvatureY,type:"f32"},uResolution:{value:new Float32Array(2),type:"vec2<f32>"}}}}),this.uniforms=this.resources.curvatureUniforms.uniforms}apply(t,n,a,r){this.uniforms.uResolution[0]=n.frame.width,this.uniforms.uResolution[1]=n.frame.height,super.apply(t,n,a,r)}}const lS=`#version 300 es
precision mediump float;

// Injected number of samples for antialiasing
#define NUM_SAMPLES {{NUM_SAMPLES}}

in vec2 vTextureCoord;
uniform sampler2D uTexture;

uniform float uPixelWidth;      // Width of virtual pixels in output pixels
uniform float uMaskBrightness;  // Shadow mask brightness (0.0 to 1.0)
uniform vec2 uResolution;        // Screen resolution
uniform float uTransitionWidth; // Width of transition zone between phosphors (0.0 to 1.0, 0 = hard edge, 1 = maximum smooth)

// Pixi built-in uniforms (provided automatically)
uniform vec4 uInputClamp;  // xy: min texture coords, zw: max texture coords of visible area

out vec4 finalColor;

void main() {
    vec3 colour = texture(uTexture, vTextureCoord).rgb;
    vec3 originalColour = colour;

    // Normalize transition width to actual proportion of phosphor width
    // Input is 0-1 for ease of use, convert to 0-0.166 (max sensible value)
    float transitionWidth = uTransitionWidth * 0.166666;

    // Convert to virtual pixel space for slot mask, accounting for visible area
    // Map texture coord to position within visible area (0-1), then to pixel position
    float normalizedX = (vTextureCoord.x - uInputClamp.x) / (uInputClamp.z - uInputClamp.x);

    // Multi-sample the phosphor mask to reduce aliasing
    vec3 mask = vec3(0.0);
    float sampleWidth = 1.0 / uResolution.x; // Width of one output pixel in normalized coords

    for (int i = 0; i < NUM_SAMPLES; i++) {
         // Distribute samples across pixel - offset is the proportion we are into the pixel:
        float offset = (float(i) + 0.5) / float(NUM_SAMPLES) - 0.5;
        float sampleX = normalizedX + offset * sampleWidth * (uInputClamp.z - uInputClamp.x);
        float sampleVirtualX = sampleX * uResolution.x / uPixelWidth;
        float samplePos = fract(sampleVirtualX);

        // smooth transitions for each RGB sample:
        float isRed = 1.0 - smoothstep(0.333333 - transitionWidth, 0.333333 + transitionWidth, samplePos);
        float isGreen = smoothstep(0.333333 - transitionWidth, 0.333333 + transitionWidth, samplePos) *
                       (1.0 - smoothstep(0.666667 - transitionWidth, 0.666667 + transitionWidth, samplePos));
        float isBlue = smoothstep(0.666667 - transitionWidth, 0.666667 + transitionWidth, samplePos);

        // Accumulate mask values
        mask.r += mix(uMaskBrightness, 1.0, isRed);
        mask.g += mix(uMaskBrightness, 1.0, isGreen);
        mask.b += mix(uMaskBrightness, 1.0, isBlue);
    }

    mask /= float(NUM_SAMPLES); // Average the samples
    
    vec3 maskedColour = originalColour * mask;
    
    // White boost for bright grays/whites
    float minOriginal = min(min(originalColour.r, originalColour.g), originalColour.b);
    float maxOriginal = max(max(originalColour.r, originalColour.g), originalColour.b);
    float colorVariation = maxOriginal - minOriginal;
    float grayness = 1.0 - smoothstep(0.0, 0.1, colorVariation);
    float brightness = (originalColour.r + originalColour.g + originalColour.b) / 3.0;
    float whiteBoost = grayness * smoothstep(0.5, 0.8, brightness);
    
    // Apply compensation
    float avgMaskEffect = (1.0 + 2.0 * uMaskBrightness) / 3.0;
    float compensation = 1.0 / max(avgMaskEffect, 0.001);
    vec3 compensatedColour = maskedColour * compensation;
    float maxChannel = max(max(compensatedColour.r, compensatedColour.g), compensatedColour.b);
    float clampScale = min(1.0, 1.0 / max(maxChannel, 0.001));
    vec3 maskedPath = compensatedColour * clampScale;
    
    colour = mix(maskedPath, originalColour, whiteBoost);
    
    finalColor = vec4(colour, 1.0);
}`,Zs={pixelWidth:4,maskBrightness:.7,numSamples:4,transitionWidth:.3};class oS extends Ae{uniforms;constructor(t={}){const n={...Zs,...t},a=Dm(lS,{NUM_SAMPLES:n.numSamples}),r=dn.from({vertex:wi,fragment:a,name:"phosphor-mask-filter"});super({glProgram:r,resources:{phosphorMaskUniforms:{uPixelWidth:{value:n.pixelWidth,type:"f32"},uMaskBrightness:{value:n.maskBrightness,type:"f32"},uResolution:{value:new Float32Array(2),type:"vec2<f32>"},uTransitionWidth:{value:n.transitionWidth,type:"f32"}}}}),this.uniforms=this.resources.phosphorMaskUniforms.uniforms}apply(t,n,a,r){this.uniforms.uResolution[0]=n.frame.width,this.uniforms.uResolution[1]=n.frame.height,super.apply(t,n,a,r)}}const uS=`#version 300 es
precision mediump float;

in vec2 vTextureCoord;
uniform sampler2D uTexture;

uniform float uCornerRadius; // Corner radius as proportion (0.0-0.1 of image size)

// Pixi built-in uniforms (provided automatically)
uniform vec4 uInputClamp;  // xy: min texture coords, zw: max texture coords of visible area

out vec4 finalColor;

void main() {
    // Sample the texture
    vec4 color = texture(uTexture, vTextureCoord);
    
    // Calculate position in normalized visible space
    vec2 visibleSize = uInputClamp.zw - uInputClamp.xy;
    vec2 normalizedPos = (vTextureCoord - uInputClamp.xy) / visibleSize;
    
    // For the current Y, calculate the X bounds of the rounded rectangle
    float minX = 0.0;
    float maxX = 1.0;
    
    // Top corners (when y < radius)
    float topCornerFactor = step(normalizedPos.y, uCornerRadius);
    float dy_top = uCornerRadius - normalizedPos.y;
    float dx_top = sqrt(max(0.0, uCornerRadius * uCornerRadius - dy_top * dy_top));
    minX = mix(minX, uCornerRadius - dx_top, topCornerFactor);
    maxX = mix(maxX, 1.0 - uCornerRadius + dx_top, topCornerFactor);
    
    // Bottom corners (when y > 1 - radius)
    float bottomCornerFactor = step(1.0 - uCornerRadius, normalizedPos.y);
    float dy_bottom = normalizedPos.y - (1.0 - uCornerRadius);
    float dx_bottom = sqrt(max(0.0, uCornerRadius * uCornerRadius - dy_bottom * dy_bottom));
    minX = mix(minX, uCornerRadius - dx_bottom, bottomCornerFactor);
    maxX = mix(maxX, 1.0 - uCornerRadius + dx_bottom, bottomCornerFactor);
    
    // Check if current X is within bounds with smooth edges
    float edgeSoftness = 0.002; // Adjust for softer/harder edges
    float leftEdge = smoothstep(minX - edgeSoftness, minX + edgeSoftness, normalizedPos.x);
    float rightEdge = 1.0 - smoothstep(maxX - edgeSoftness, maxX + edgeSoftness, normalizedPos.x);
    float cornerMask = leftEdge * rightEdge;
    
    // Apply the mask to the original color
    finalColor = vec4(color.rgb * cornerMask, color.a);
}`,Gm={cornerRadius:.025};class cS extends Ae{uniforms;constructor(t={}){const n={...Gm,...t},a=dn.from({vertex:wi,fragment:uS,name:"rounded-corners-filter"});super({glProgram:a,resources:{roundedCornersUniforms:{uCornerRadius:{value:n.cornerRadius,type:"f32"}}}}),this.uniforms=this.resources.roundedCornersUniforms.uniforms}}const hS=`#version 300 es
precision mediump float;

in vec2 vTextureCoord;
uniform sampler2D uTexture;

uniform float uPixelHeight;  // Height of virtual pixels in output pixels
uniform vec2 uResolution;    // Screen resolution
uniform float uGapBrightness;  // Brightness of dark bands (0.0 to 1.0)

// Pixi built-in uniforms (provided automatically)
uniform vec4 uInputClamp;  // xy: min texture coords, zw: max texture coords of visible area

out vec4 finalColor;

// Sample neighborhood in cross pattern to get average luminosity
float getNeighborhoodLuminosity(vec2 coord) {
    vec2 pixelSize = 1.0 / uResolution;
    
    // Sample in cross pattern: center + 4 cardinal directions
    vec3 centerSample = texture(uTexture, coord).rgb;
    vec3 leftSample = texture(uTexture, coord + vec2(-pixelSize.x, 0.0)).rgb;
    vec3 rightSample = texture(uTexture, coord + vec2(pixelSize.x, 0.0)).rgb;
    vec3 topSample = texture(uTexture, coord + vec2(0.0, -pixelSize.y)).rgb;
    vec3 bottomSample = texture(uTexture, coord + vec2(0.0, pixelSize.y)).rgb;
    
    // Calculate luminosity for each sample (simple average)
    float centerLum = (centerSample.r + centerSample.g + centerSample.b) / 3.0;
    float leftLum = (leftSample.r + leftSample.g + leftSample.b) / 3.0;
    float rightLum = (rightSample.r + rightSample.g + rightSample.b) / 3.0;
    float topLum = (topSample.r + topSample.g + topSample.b) / 3.0;
    float bottomLum = (bottomSample.r + bottomSample.g + bottomSample.b) / 3.0;
    
    // Weight center more heavily (0.5) and edges equally (0.125 each)
    return centerLum * 0.5 + (leftLum + rightLum + topLum + bottomLum) * 0.125;
}

void main() {
    // Get the color at this position (for final output mixing)
    vec3 color = texture(uTexture, vTextureCoord).rgb;
    
    // Get neighborhood luminosity for determining scanline thickness
    float luminosity = getNeighborhoodLuminosity(vTextureCoord);
    
    // Convert to virtual pixel space, accounting for visible area
    // Map texture coord to position within visible area (0-1), then to pixel position
    float normalizedY = (vTextureCoord.y - uInputClamp.y) / (uInputClamp.w - uInputClamp.y);
    float virtualPixelY = normalizedY * uResolution.y / uPixelHeight;
    
    // Calculate position within scanline period (0 to 2 for double height scanlines)
    float yInScanline = mod(virtualPixelY, 2.0);
    
    // Calculate distance to nearest dark band center
    // Dark band centers are at 0.5 and 1.5 in our 2-unit period
    // Use branchless selection: if yInScanline < 1.0, use 0.5, else use 1.5
    float darkCenter = mix(1.5, 0.5, step(yInScanline, 1.0));
    
    float distToDarkCenter = abs(yInScanline - darkCenter);
    
    // Calculate minimum line width in virtual pixel space
    // Each scanline period is 2 virtual pixels, and we need at least 1 real pixel
    float realPixInVirtual = 1.0 / uPixelHeight;
    
    // Calculate threshold based on luminosity - how close we need to be to the centre of
    // a dark band to be considered "in" the dark band.
    // Bright pixels = low threshold = thin dark bands (wide bright bands)
    // Dark pixels = high threshold = thick dark bands (narrow bright bands)
    // Range from 0.5 (black) to 0.0 (white) - allows dark bands to completely disappear
    float distanceThresh = 0.5 * (1.0 - luminosity); // Range from 0.5 to 0.0
    
    // Clamp threshold to ensure both dark and bright bands are at least 1 real pixel wide
    // Maximum threshold is 1.0 - realPixInVirtual (ensures bright band is at least 1 real pixel)
    // Minimum threshold is realPixInVirtual (ensures dark band is at least 1 real pixel)
    //distanceThresh = clamp(distanceThresh, realPixInVirtual, 1.0 - realPixInVirtual);
    
    // Calculate the ratio of dark to bright stripe widths
    // Dark stripe width = 2 * threshold (extends ±threshold from center)
    // Bright stripe width = 2 * (1.0 - threshold)
    float darkToBrightRatio = distanceThresh / (1.0 - distanceThresh);
    
    // Calculate boost factor to compensate for the darkening
    // Dark bands now contribute gap_brightness instead of 0
    // Average = (bright * boost + dark * gap_brightness) / (bright + dark)
    // To maintain original brightness of 1.0:
    // boost = 1 + darkToBrightRatio * (1.0 - uGapBrightness)
    float boostFactor = 1.0 + darkToBrightRatio * (1.0 - uGapBrightness);
    
    // Apply soft cutoff using smoothstep for anti-aliasing
    // Transition width is 1/4 of a virtual pixel for smooth edges
    float transitionWidth = 0.25;
    float innerBoundary = distanceThresh - transitionWidth * 0.5;
    float outerBoundary = distanceThresh + transitionWidth * 0.5;
    
    // Smoothstep gives us a gradual transition from dark (0) to bright (1)
    float inBrightBand = smoothstep(innerBoundary, outerBoundary, distToDarkCenter);
    
    // Output the boosted color for bright band, reduced brightness for dark band
    vec3 brightBandColor = color * boostFactor;
    vec3 darkBandColor = color * uGapBrightness;
    vec3 outputColor = mix(darkBandColor, brightBandColor, inBrightBand);
    
    finalColor = vec4(outputColor, 1.0);
}`,_u={pixelHeight:4,gapBrightness:.7};class fS extends Ae{uniforms;constructor(t={}){const n={..._u,...t},a=dn.from({vertex:wi,fragment:hS,name:"scanlines-filter"});super({glProgram:a,resources:{scanlinesUniforms:{uPixelHeight:{value:n.pixelHeight,type:"f32"},uResolution:{value:new Float32Array(2),type:"vec2<f32>"},uGapBrightness:{value:n.gapBrightness,type:"f32"}}}}),this.uniforms=this.resources.scanlinesUniforms.uniforms}apply(t,n,a,r){this.uniforms.uResolution[0]=n.frame.width,this.uniforms.uResolution[1]=n.frame.height,super.apply(t,n,a,r)}}const dS=`#version 300 es
precision mediump float;

in vec2 vTextureCoord;
uniform sampler2D uTexture;

uniform float uIntensity; // Vignette effect (-1.0 to 1.0, negative = brighten center)
uniform float uRadius;    // Vignette radius (0.0 to 2.0)
uniform float uSoftness;  // Vignette edge softness (0.0 = hard edge, 1.0 = very soft)

// Pixi built-in uniforms (provided automatically)
uniform vec4 uInputClamp;  // xy: min texture coords, zw: max texture coords of visible area

out vec4 finalColor;

void main() {
    vec3 colour = texture(uTexture, vTextureCoord).rgb;
    
    // Calculate the center of the visible area using Pixi's input clamp
    vec2 visibleCenter = (uInputClamp.xy + uInputClamp.zw) * 0.5;
    
    // Calculate position relative to the actual visible center
    vec2 centered = vTextureCoord - visibleCenter;
    
    // Scale the distance calculation to account for the visible area size
    vec2 visibleSize = uInputClamp.zw - uInputClamp.xy;
    centered = centered / visibleSize;
    
    // Calculate distance from center (0 to ~1.414 at corners)
    float dist = length(centered) * 2.0;
    
    // Use a higher power for smoother, more gradual falloff
    // pow(dist, 6) starts very slowly and accelerates rapidly
    // This creates a more natural, less obvious transition
    float falloff = pow(dist / uRadius, 6.0);
    
    // Apply softness to control the transition smoothness
    // Higher softness = more gradual transition
    float vignetteFactor = 1.0 - smoothstep(0.0, uSoftness, falloff);
    
    // Apply the vignette effect
    // When intensity > 0: darkens edges (traditional vignette)
    // When intensity < 0: brightens center (negative vignette/spotlight)
    // vignetteFactor is 1 at center, 0 at edges
    
    if (uIntensity > 0.0) {
        // Traditional darkening vignette
        colour *= mix(1.0 - uIntensity, 1.0, vignetteFactor);
    } else {
        // Negative vignette - brighten the center
        // Use multiplication to amplify existing bright areas
        float brightnessFactor = 1.0 + (-uIntensity * vignetteFactor);
        colour *= brightnessFactor;
    }
    
    finalColor = vec4(colour, 1.0);
}`,pr={intensity:.4,radius:.8,softness:.5};class pS extends Ae{uniforms;constructor(t={}){const n={...pr,...t},a=dn.from({vertex:wi,fragment:dS,name:"vignette-filter"});super({glProgram:a,resources:{vignetteUniforms:{uIntensity:{value:n.intensity,type:"f32"},uRadius:{value:n.radius,type:"f32"},uSoftness:{value:n.softness,type:"f32"}}}}),this.uniforms=this.resources.vignetteUniforms.uniforms}}const mS=({roundedCorners:s,scanlines:t,phosphorMask:n,bloom:a,curvature:r,vignette:o,colorAdjustment:c})=>{const h=[];return s!==!1&&h.push(new cS(s)),t!==!1&&h.push(new fS(t)),n!==!1&&h.push(new oS(n)),a!==!1&&h.push(new nS(a)),r!==!1&&h.push(new rS(r)),o!==!1&&h.push(new pS(o)),c!==!1&&h.push(new sS(c)),h},gS=({roundedCorners:s,cornerRadius:t,scanlines:n,pixelHeight:a,gapBrightness:r,phosphorMask:o,pixelWidth:c,maskBrightness:h,phosphorMaskNumSamples:d,transitionWidth:m,bloom:g,intensity:y,radius:v,cutoff:x,edgeBlur:C,curvature:E,curvatureX:S,curvatureY:w,multisampling:R,vignette:N,vignetteIntensity:P,vignetteRadius:X,softness:V,colorAdjustment:Y,gamma:it,saturation:$,brightness:I})=>ct.useMemo(()=>mS({roundedCorners:s?{cornerRadius:t}:!1,scanlines:n?{pixelHeight:a,gapBrightness:r}:!1,phosphorMask:o?{pixelWidth:c,maskBrightness:h,numSamples:d,transitionWidth:m}:!1,bloom:g?{intensity:y,radius:v,cutoff:x,edgeBlur:C}:!1,curvature:E?{curvatureX:S,curvatureY:w,multisampling:R}:!1,vignette:N?{intensity:P,radius:X,softness:V}:!1,colorAdjustment:Y?{gamma:it,saturation:$,brightness:I}:!1}),[s,t,n,a,r,o,c,h,d,m,g,y,v,x,C,E,S,w,R,N,P,X,V,Y,it,$,I]),Vu=()=>{const[s,t]=ct.useState({width:window.innerWidth,height:window.innerHeight});return ct.useEffect(()=>{const n=()=>{t({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[]),s},yS=({src:s,filters:t})=>{const{app:n}=Hu(),[a,r]=ct.useState(null);if(Vu(),ct.useEffect(()=>{(async()=>{const h=await Ws.load(s);r(h)})()},[s]),!a)return null;const o=Math.min(n.screen.width/a.width,n.screen.height/a.height);return Bt.jsx("pixiSprite",{texture:a,anchor:.5,scale:o,x:n.screen.width/2,y:n.screen.height/2,filters:t})},xS=({src:s,filters:t})=>{const{app:n}=Hu(),[a,r]=ct.useState(null),[o,c]=ct.useState({width:1,height:1});if(Vu(),ct.useEffect(()=>{(async()=>{const m=document.createElement("video");m.src=s,m.loop=!0,m.muted=!0,m.autoplay=!0,await new Promise(y=>{m.addEventListener("canplay",y,{once:!0})}),m.play();const g=pt.from(m);r(g),c({width:m.videoWidth,height:m.videoHeight})})()},[s]),!a)return null;const h=Math.min(n.screen.width/o.width,n.screen.height/o.height);return Bt.jsx("pixiSprite",{texture:a,anchor:.5,scale:h,x:n.screen.width/2,y:n.screen.height/2,filters:t})},vS=s=>{const{app:t}=Hu(),{imageSource:n,splitPosition:a}=s,r=Om[n],o=gS(s);Vu();const c=r.type==="video"?xS:yS,h=ct.useMemo(()=>new us().rect(a,0,t.screen.width-a,t.screen.height).fill("#ffffff"),[a,t.screen.width,t.screen.height]);return Bt.jsxs("pixiContainer",{children:[Bt.jsx(c,{src:r.src}),Bt.jsx("pixiContainer",{mask:h,children:Bt.jsx(c,{src:r.src,filters:o})})]})},_S={properties:{cutoff:{description:"Brightness threshold for bloom (0-1)"},edgeBlur:{description:`How much more should the edge/corner of the screen blur? This reproduces CRT screens which would be
well focussed in the middle and slightly unfocused in the corners`},intensity:{description:"Bloom intensity multiplier"},radius:{description:"Blur radius in pixels"}}},bS={properties:{maskBrightness:{description:`Brightness of the mask pattern (0-1). This is the brightness of the 'off' pixels - a value of 1
turns the phosphor mask effect off entirely. A value of 0 means only pure red, green, and blue
pixels will be on`},numSamples:{description:`Number of samples for antialiasing (1 = off, 2-8 recommended). Setting this higher can
avoid Moire patterns, but is slower to render. Try adjusting in combination with the transition
width to get a good compromise.`},pixelWidth:{description:"Width of phosphor mask pixels"},transitionWidth:{description:`how smooth is the transition between R,G,B phosphors.
0 = hard edge, 1 = very smooth

A hard edge (0) is more authentic, but can produce moire patterns,
especially with small pixelWidth and a low number of samples.`}}},Wn={BloomFilterUniforms:_S,PhosphorMaskFilterOptions:bS},{useArgs:SS}=__STORYBOOK_MODULE_PREVIEW_API__;jb({Container:Pe,Graphics:us,Sprite:ls});const AS=s=>{const[t,n]=ct.useState(window.innerWidth/2);return Bt.jsxs(Bt.Fragment,{children:[Bt.jsx(Lb,{backgroundColor:0,antialias:!0,resizeTo:window,autoStart:!0,roundPixels:!0,children:Bt.jsx(vS,{...s,splitPosition:t})}),Bt.jsx(Yb,{onPositionChange:n,initialPosition:t})]})},CS={title:"CRT Filters/All Filters",component:AS,decorators:[(s,t)=>{const[,n]=SS(),a=r=>{n({imageSource:r})};return Bt.jsxs("div",{className:"h-screen flex flex-col",children:[Bt.jsx("div",{className:"flex-1",children:Bt.jsx(s,{})}),Bt.jsx(tS,{value:t.args.imageSource,onChange:a})]})}],parameters:{layout:"fullscreen",controls:{expanded:!0,panelPosition:"right"}},argTypes:{imageSource:{control:{type:"inline-radio",labels:{moonbase:"🌙 Moonbase",sonic:"🦔 Sonic",metalSlug:"🔫 Metal Slug",speedball:"⚽ Speedball",amigaHoh:"🎮 Head Over Heels",testcard:"📺 Test Card",beast:"👾 Beast",microMachines:"🏎️ Micro Machines",wipeout:"🏁 Wipeout",yosi:"🦖 Yosi",rickroll:"🎵 Video"}},options:["moonbase","sonic","metalSlug","speedball","amigaHoh","testcard","beast","microMachines","wipeout","yosi","rickroll"],table:{category:"General",disable:!0}},roundedCorners:{control:"boolean",table:{category:"Screen Shape"}},cornerRadius:{control:{type:"range",min:0,max:.2,step:.01},if:{arg:"roundedCorners",truthy:!0},description:"Corner radius",table:{category:"Screen Shape",subcategory:"Settings",defaultValue:{summary:`${Gm.cornerRadius}`}}},scanlines:{control:"boolean",description:"Enable scanlines",table:{category:"Scanlines"}},pixelHeight:{control:{type:"range",min:2,max:8,step:.1},description:"Pixel height",if:{arg:"scanlines",truthy:!0},table:{category:"Scanlines",subcategory:"Settings",defaultValue:{summary:`${_u.pixelHeight}`}}},gapBrightness:{control:{type:"range",min:0,max:1,step:.1},description:"Gap brightness",if:{arg:"scanlines",truthy:!0},table:{category:"Scanlines",subcategory:"Settings",defaultValue:{summary:`${_u.gapBrightness}`}}},phosphorMask:{control:"boolean",description:"Enable phosphor mask",table:{category:"Phosphor Mask"}},pixelWidth:{control:{type:"range",min:3,max:12,step:.05},description:Wn.PhosphorMaskFilterOptions.properties.pixelWidth.description,if:{arg:"phosphorMask",truthy:!0},table:{category:"Phosphor Mask",subcategory:"Settings",defaultValue:{summary:`${Zs.pixelWidth}`}}},maskBrightness:{control:{type:"range",min:0,max:1,step:.1},description:Wn.PhosphorMaskFilterOptions.properties.maskBrightness.description,if:{arg:"phosphorMask",truthy:!0},table:{category:"Phosphor Mask",subcategory:"Settings",defaultValue:{summary:`${Zs.maskBrightness}`}}},phosphorMaskNumSamples:{control:{type:"range",min:1,max:16,step:1},description:Wn.PhosphorMaskFilterOptions.properties.numSamples.description,if:{arg:"phosphorMask",truthy:!0},table:{category:"Phosphor Mask",subcategory:"Settings",defaultValue:{summary:`${Zs.numSamples}`}}},transitionWidth:{control:{type:"range",min:0,max:1,step:.05},description:Wn.PhosphorMaskFilterOptions.properties.transitionWidth.description,if:{arg:"phosphorMask",truthy:!0},table:{category:"Phosphor Mask",subcategory:"Settings",defaultValue:{summary:`${Zs.transitionWidth}`}}},bloom:{control:"boolean",description:"Enable bloom filter",table:{category:"Bloom Filter"}},intensity:{control:{type:"range",min:0,max:1,step:.01},description:Wn.BloomFilterUniforms.properties.intensity.description,if:{arg:"bloom",truthy:!0},table:{category:"Bloom Filter",subcategory:"Settings",defaultValue:{summary:`${Jn.intensity}`}}},radius:{control:{type:"range",min:1,max:10,step:.5},description:Wn.BloomFilterUniforms.properties.radius.description,if:{arg:"bloom",truthy:!0},table:{category:"Bloom Filter",subcategory:"Settings",defaultValue:{summary:`${Jn.radius}`}}},cutoff:{control:{type:"range",min:0,max:1,step:.01},description:Wn.BloomFilterUniforms.properties.cutoff.description,if:{arg:"bloom",truthy:!0},table:{category:"Bloom Filter",subcategory:"Settings",defaultValue:{summary:`${Jn.cutoff}`}}},edgeBlur:{control:{type:"range",min:0,max:5,step:.1},description:Wn.BloomFilterUniforms.properties.edgeBlur.description,if:{arg:"bloom",truthy:!0},table:{category:"Bloom Filter",subcategory:"Settings",defaultValue:{summary:`${Jn.edgeBlur}`}}},curvature:{control:"boolean",description:"Enable screen curvature",table:{category:"Screen Curvature"}},curvatureX:{control:{type:"range",min:0,max:.6,step:.01},description:"Horizontal curvature",if:{arg:"curvature",truthy:!0},table:{category:"Screen Curvature",subcategory:"Settings",defaultValue:{summary:`${na.curvatureX}`}}},curvatureY:{control:{type:"range",min:0,max:.6,step:.01},description:"Vertical curvature",if:{arg:"curvature",truthy:!0},table:{category:"Screen Curvature",subcategory:"Settings",defaultValue:{summary:`${na.curvatureY}`}}},multisampling:{control:"boolean",description:"Enable multisampling for smoother curvature",if:{arg:"curvature",truthy:!0},table:{category:"Screen Curvature",subcategory:"Settings",defaultValue:{summary:`${na.multisampling}`}}},vignette:{control:"boolean",description:"Enable vignette",table:{category:"Vignette"}},vignetteIntensity:{control:{type:"range",min:-1,max:1,step:.1},description:"Vignette intensity (negative values brighten)",if:{arg:"vignette",truthy:!0},table:{category:"Vignette",subcategory:"Settings",defaultValue:{summary:`${pr.intensity}`}}},vignetteRadius:{control:{type:"range",min:0,max:2,step:.1},description:"Vignette radius",if:{arg:"vignette",truthy:!0},table:{category:"Vignette",subcategory:"Settings",defaultValue:{summary:`${pr.radius}`}}},softness:{control:{type:"range",min:0,max:1,step:.1},description:"Softness",if:{arg:"vignette",truthy:!0},table:{category:"Vignette",subcategory:"Settings",defaultValue:{summary:`${pr.softness}`}}},colorAdjustment:{control:"boolean",description:"Enable color adjustment",table:{category:"Color Adjustment"}},gamma:{control:{type:"range",min:.5,max:2,step:.1},description:"Gamma correction",if:{arg:"colorAdjustment",truthy:!0},table:{category:"Color Adjustment",subcategory:"Settings",defaultValue:{summary:`${dr.gamma}`}}},saturation:{control:{type:"range",min:0,max:2,step:.1},description:"Color saturation",if:{arg:"colorAdjustment",truthy:!0},table:{category:"Color Adjustment",subcategory:"Settings",defaultValue:{summary:`${dr.saturation}`}}},brightness:{control:{type:"range",min:0,max:2,step:.1},description:"Brightness level",if:{arg:"colorAdjustment",truthy:!0},table:{category:"Color Adjustment",subcategory:"Settings",defaultValue:{summary:`${dr.brightness}`}}}}},Js={args:{imageSource:"moonbase",roundedCorners:!0,cornerRadius:.06,scanlines:!0,pixelHeight:4,gapBrightness:.3,phosphorMask:!0,pixelWidth:4.5,maskBrightness:.3,phosphorMaskNumSamples:6,transitionWidth:.3,bloom:!0,intensity:Jn.intensity,radius:6.5,cutoff:Jn.cutoff,edgeBlur:Jn.edgeBlur,curvature:!0,curvatureX:.35,curvatureY:.35,multisampling:na.multisampling,vignette:!0,vignetteIntensity:.6,vignetteRadius:1.3,softness:.5,colorAdjustment:!0,gamma:1,saturation:1.2,brightness:1.5}};Js.parameters={...Js.parameters,docs:{...Js.parameters?.docs,source:{originalSource:`{
  args: {
    imageSource: "moonbase",
    roundedCorners: true,
    cornerRadius: 0.06,
    //defaultRoundedCornersUniforms.cornerRadius,
    scanlines: true,
    pixelHeight: 4,
    // defaultScanlinesUniforms.pixelHeight,
    gapBrightness: 0.3,
    //defaultScanlinesUniforms.gapBrightness,
    phosphorMask: true,
    pixelWidth: 4.5,
    // defaultPhosphorMaskUniforms.pixelWidth,
    maskBrightness: 0.3,
    // defaultPhosphorMaskUniforms.maskBrightness,
    phosphorMaskNumSamples: 6,
    // defaultPhosphorMaskOptions.numSamples,
    transitionWidth: 0.3,
    // defaultPhosphorMaskOptions.transitionWidth,
    bloom: true,
    intensity: defaultBloomUniforms.intensity,
    radius: 6.5,
    // defaultBloomUniforms.radius,
    cutoff: defaultBloomUniforms.cutoff,
    edgeBlur: defaultBloomUniforms.edgeBlur,
    curvature: true,
    curvatureX: 0.35,
    // defaultCurvatureOptions.curvatureX,
    curvatureY: 0.35,
    // defaultCurvatureOptions.curvatureY,
    multisampling: defaultCurvatureOptions.multisampling,
    vignette: true,
    vignetteIntensity: 0.6,
    //defaultVignetteUniforms.intensity,
    vignetteRadius: 1.3,
    // defaultVignetteUniforms.radius,
    softness: 0.5,
    //defaultVignetteUniforms.softness,
    colorAdjustment: true,
    gamma: 1,
    //defaultColorAdjustmentUniforms.gamma,
    saturation: 1.2,
    // defaultColorAdjustmentUniforms.saturation,
    brightness: 1.5 //defaultColorAdjustmentUniforms.brightness,
  }
}`,...Js.parameters?.docs?.source}}};const TS=["Default"],zS=Object.freeze(Object.defineProperty({__proto__:null,Default:Js,__namedExportsOrder:TS,default:CS},Symbol.toStringTag,{value:"Module"}));export{Zt as $,Xp as A,Se as B,Pe as C,Ft as D,nt as E,Ae as F,aa as G,cp as H,en as I,L0 as J,Vf as K,ls as L,mt as M,cx as N,bx as O,de as P,Wt as Q,au as R,vx as S,$a as T,eu as U,Qt as V,Tx as W,jf as X,_o as Y,Xf as Z,X0 as _,nn as a,dp as a0,Fp as a1,bt as a2,Rt as a3,Bx as a4,Zx as a5,gv as a6,xv as a7,Av as a8,Tv as a9,Mv as aa,ti as ab,A_ as ac,sm as ad,id as ae,ed as af,o0 as ag,Ud as ah,R_ as ai,us as aj,Xt as ak,c0 as al,wd as am,gr as an,mu as ao,Bd as ap,lm as aq,zS as ar,qx as b,ia as c,hr as d,te as e,nd as f,Yx as g,Tu as h,Lp as i,Cp as j,fn as k,Pp as l,Ed as m,mv as n,yv as o,bv as p,Cv as q,A0 as r,Kp as s,Ar as t,pt as u,u0 as v,Ht as w,dn as x,wv as y,Rn as z};
